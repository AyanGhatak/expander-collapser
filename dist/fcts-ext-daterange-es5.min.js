!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1);!function(t){t(FusionCharts)}(function(t){t.register("extension",["date-range-chooser",function(t){var e=this,n=e.extAPI;window.dr=new r,n(window.dr)}])})},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=n(4),s=function(){function t(){r(this,t),this.startDt=0,this.endDt=0,this.startText={attr:function(){}},this.endText={attr:function(){}}}return a(t,[{key:"init",value:function(t){var e=this;t("X-Axis","graphics","chart",function(t,n,r){e.x=t,e.paper=n,e.chart=r})}},{key:"placeInCanvas",value:function(){this.range={startDate:12,endDate:23}}},{key:"draw",value:function(){var t=this.paper,e=t.text(20,22,"From: ");e.attr("font-family","sans-serif"),e.attr("fill","#000");var n=t.rect(50,10,90,25);n.attr("stroke","#000"),this.startText=t.text(95,22,this.getFormattedDate(this.startDate)),this.startText.attr("font-family","sans-serif"),this.startText.attr("fill","#000");var r=t.text(170,22,"To: ");r.attr("font-family","sans-serif"),r.attr("fill","#000");var a=t.rect(190,10,90,25);a.attr("stroke","#000"),this.endText=t.text(235,22,this.getFormattedDate(this.endDate)),this.endText.attr("font-family","sans-serif"),this.endText.attr("fill","#000")}},{key:"dispose",value:function(){}},{key:"swapDates",value:function(){var t=this.dateRange.startDate;this.dateRange.startDate=this.dateRange.endDate,this.dateRange.endDate=t}},{key:"syncRange",value:function(){}},{key:"getFormattedDate",value:function(t){return this.chart.getFormattedDate(t)}},{key:"getTimestamp",value:function(t){return this.chart.getTimestamp(t)}},{key:"setConfig",value:function(t){}},{key:"getConfig",value:function(){return{calendarVisible:"false"}}},{key:"startDate",get:function(){return this.startDt},set:function(t){if(t<=this.endDt){this.startDt=t;var e=this.getFormattedDate(this.startDt);this.startText.attr("text",e);var n=new i;n.timestamp=this.startDt}}},{key:"endDate",get:function(){return this.endDt},set:function(t){if(t>=this.startDt){this.endDt=t;var e=this.getFormattedDate(this.endDt);this.endText.attr("text",e);var n=new o;n.timestamp=this.endDt}}}]),t}();t.exports=s},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=function(t){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),o(e,[{key:"validateDate",value:function(t){return!0}}]),e}(s);t.exports=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){n(this,t),this.timestamp=0}return r(t,[{key:"displayDate",value:function(){}},{key:"date",get:function(){return this.timestamp},set:function(t){this.timestamp=t}}]),t}();t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=function(t){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),o(e,[{key:"validateDate",value:function(t){return!0}}]),e}(s);t.exports=u}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGY1ODdkMzgwYzZhYTVlZTI1YTRmIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZXJhbmdlLmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1zdGFydGRhdGVpbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZWlucHV0LmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1lbmRkYXRlaW5wdXQuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiRGF0ZVJhbmdlIiwiZmFjdG9yeSIsIkZ1c2lvbkNoYXJ0cyIsIkZDIiwicmVnaXN0ZXIiLCJnbG9iYWwiLCJ0aGlzIiwiZXh0QVBJIiwid2luZG93IiwiZHIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIlN0YXJ0RGF0ZUlucHV0IiwiRW5kRGF0ZUlucHV0Iiwic3RhcnREdCIsImVuZER0Iiwic3RhcnRUZXh0IiwiYXR0ciIsImVuZFRleHQiLCJ2YWx1ZSIsInJlcXVpcmUiLCJzZWxmIiwieCIsImdyYXBoaWNzIiwiY2hhcnQiLCJwYXBlciIsInJhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInN0YXJ0TGFiZWwiLCJ0ZXh0Iiwic3RhcnRSZWN0IiwicmVjdCIsImdldEZvcm1hdHRlZERhdGUiLCJlbmRMYWJlbCIsImVuZFJlY3QiLCJ0ZW1wIiwiZGF0ZVJhbmdlIiwidGltZXN0YW1wIiwiZGF0ZVN0cmluZyIsImdldFRpbWVzdGFtcCIsImNvbmZpZ09iaiIsImNhbGVuZGFyVmlzaWJsZSIsImdldCIsInNldCIsImZvcm1hdHRlZFN0YXJ0RGF0ZSIsInNkaSIsImZvcm1hdHRlZEVuZERhdGUiLCJlZGkiLCJfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkRhdGVJbnB1dCIsIl9EYXRlSW5wdXQiLCJnZXRQcm90b3R5cGVPZiIsImFwcGx5IiwiYXJndW1lbnRzIiwibXMiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdFNUNoQyxZQUNBLElBQU1XLEdBQVlYLEVBQVEsSUFFekIsU0FBV1ksR0FDVkEsRUFBUUMsZUFDUCxTQUFVQyxHQUNYQSxFQUFHQyxTQUFTLGFBQWMscUJBQXNCLFNBQVVWLEdBQ3hELEdBQUlXLEdBQVNDLEtBQ1RDLEVBQVNGLEVBQU9FLE1BS3BCQyxRQUFPQyxHQUFLLEdBQUlULEdBQ2hCTyxFQUFPQyxPQUFPQyxVRnFEWixTQUFTaEIsRUFBUUQsRUFBU0gsR0duRWhDLFlIeUVDLFNBQVNxQixHQUFnQkMsRUFBVUMsR0FBZSxLQUFNRCxZQUFvQkMsSUFBZ0IsS0FBTSxJQUFJQyxXQUFVLHFDQUZoSCxHQUFJQyxHQUFlLFdBQWMsUUFBU0MsR0FBaUJDLEVBQVFDLEdBQVMsSUFBSyxHQUFJQyxHQUFJLEVBQUdBLEVBQUlELEVBQU1FLE9BQVFELElBQUssQ0FBRSxHQUFJRSxHQUFhSCxFQUFNQyxFQUFJRSxHQUFXQyxXQUFhRCxFQUFXQyxhQUFjLEVBQU9ELEVBQVdFLGNBQWUsRUFBVSxTQUFXRixLQUFZQSxFQUFXRyxVQUFXLEdBQU1DLE9BQU9DLGVBQWVULEVBQVFJLEVBQVdNLElBQUtOLElBQWlCLE1BQU8sVUFBVVIsRUFBYWUsRUFBWUMsR0FBaUosTUFBOUhELElBQVlaLEVBQWlCSCxFQUFZaUIsVUFBV0YsR0FBaUJDLEdBQWFiLEVBQWlCSCxFQUFhZ0IsR0FBcUJoQixNR3RFN2hCa0IsRUFBaUJ6QyxFQUFRLEdBQ3pCMEMsRUFBZTFDLEVBQVEsR0FLckJXLEVIMkVXLFdHMUVmLFFBQUFBLEtBQWVVLEVBQUFKLEtBQUFOLEdBSWJNLEtBQUswQixRQUFVLEVBQ2YxQixLQUFLMkIsTUFBUSxFQUNiM0IsS0FBSzRCLFdBQ0hDLEtBQU0sY0FFUjdCLEtBQUs4QixTQUNIRCxLQUFNLGNIeU9ULE1BbEpBckIsR0FBYWQsSUFDWDBCLElBQUssT0FDTFcsTUFBTyxTR25ESkMsR0FDSixHQUFJQyxHQUFPakMsSUFDWGdDLEdBQVEsU0FBVSxXQUFZLFFBQVMsU0FBVUUsRUFBR0MsRUFBVUMsR0FDNURILEVBQUtDLEVBQUlBLEVBQ1RELEVBQUtJLE1BQVFGLEVBQ2JGLEVBQUtHLE1BQVFBLE9IdURkaEIsSUFBSyxnQkFDTFcsTUFBTyxXR25EUi9CLEtBQUtzQyxPQUNIQyxVQUFXLEdBQ1hDLFFBQVMsT0h3RFZwQixJQUFLLE9BQ0xXLE1BQU8sV0dwRFIsR0FBSU0sR0FBUXJDLEtBQUtxQyxNQUViSSxFQUFhSixFQUFNSyxLQUFLLEdBQUksR0FBSSxTQUNwQ0QsR0FBV1osS0FBSyxjQUFlLGNBQy9CWSxFQUFXWixLQUFLLE9BQVEsT0FDeEIsSUFBSWMsR0FBWU4sRUFBTU8sS0FBSyxHQUFJLEdBQUksR0FBSSxHQUN2Q0QsR0FBVWQsS0FBSyxTQUFVLFFBQ3pCN0IsS0FBSzRCLFVBQVlTLEVBQU1LLEtBQUssR0FBSSxHQUFJMUMsS0FBSzZDLGlCQUFpQjdDLEtBQUt1QyxZQUMvRHZDLEtBQUs0QixVQUFVQyxLQUFLLGNBQWUsY0FDbkM3QixLQUFLNEIsVUFBVUMsS0FBSyxPQUFRLE9BRTVCLElBQUlpQixHQUFXVCxFQUFNSyxLQUFLLElBQUssR0FBSSxPQUNuQ0ksR0FBU2pCLEtBQUssY0FBZSxjQUM3QmlCLEVBQVNqQixLQUFLLE9BQVEsT0FDdEIsSUFBSWtCLEdBQVVWLEVBQU1PLEtBQUssSUFBSyxHQUFJLEdBQUksR0FDdENHLEdBQVFsQixLQUFLLFNBQVUsUUFDdkI3QixLQUFLOEIsUUFBVU8sRUFBTUssS0FBSyxJQUFLLEdBQUkxQyxLQUFLNkMsaUJBQWlCN0MsS0FBS3dDLFVBQzlEeEMsS0FBSzhCLFFBQVFELEtBQUssY0FBZSxjQUNqQzdCLEtBQUs4QixRQUFRRCxLQUFLLE9BQVEsV0h3RHpCVCxJQUFLLFVBQ0xXLE1BQU8sZUFVUFgsSUFBSyxZQUNMVyxNQUFPLFdHeERSLEdBQUlpQixHQUFPaEQsS0FBS2lELFVBQVVWLFNBQzFCdkMsTUFBS2lELFVBQVVWLFVBQVl2QyxLQUFLaUQsVUFBVVQsUUFDMUN4QyxLQUFLaUQsVUFBVVQsUUFBVVEsS0hrRXhCNUIsSUFBSyxZQUNMVyxNQUFPLGVBU1BYLElBQUssbUJBQ0xXLE1BQU8sU0cvRFFtQixHQUNoQixNQUFPbEQsTUFBS29DLE1BQU1TLGlCQUFpQkssTUh5RWxDOUIsSUFBSyxlQUNMVyxNQUFPLFNHbEVJb0IsR0FDWixNQUFPbkQsTUFBS29DLE1BQU1nQixhQUFhRCxNSDJFOUIvQixJQUFLLFlBQ0xXLE1BQU8sU0dyRUNzQixPSDZFUmpDLElBQUssWUFDTFcsTUFBTyxXR3ZFUixPQUNFdUIsZ0JBQWlCLFlINEVsQmxDLElBQUssWUFDTG1DLElBQUssV0dsTU4sTUFBT3ZELE1BQUswQixTSHFNWDhCLElBQUssU0dsTU85QixHQUNiLEdBQUlBLEdBQVcxQixLQUFLMkIsTUFBTyxDQUN6QjNCLEtBQUswQixRQUFVQSxDQUNmLElBQUkrQixHQUFxQnpELEtBQUs2QyxpQkFBaUI3QyxLQUFLMEIsUUFDcEQxQixNQUFLNEIsVUFBVUMsS0FBSyxPQUFRNEIsRUFFNUIsSUFBSUMsR0FBTSxHQUFJbEMsRUFDZGtDLEdBQUlSLFVBQVlsRCxLQUFLMEIsWUhzTXRCTixJQUFLLFVBQ0xtQyxJQUFLLFdHbE1OLE1BQU92RCxNQUFLMkIsT0hxTVg2QixJQUFLLFNHbE1LN0IsR0FDWCxHQUFJQSxHQUFTM0IsS0FBSzBCLFFBQVMsQ0FDekIxQixLQUFLMkIsTUFBUUEsQ0FDYixJQUFJZ0MsR0FBbUIzRCxLQUFLNkMsaUJBQWlCN0MsS0FBSzJCLE1BQ2xEM0IsTUFBSzhCLFFBQVFELEtBQUssT0FBUThCLEVBRTFCLElBQUlDLEdBQU0sR0FBSW5DLEVBQ2RtQyxHQUFJVixVQUFZbEQsS0FBSzJCLFdIdU1qQmpDLElHdEdWUCxHQUFPRCxRQUFVUSxHSDZHWCxTQUFTUCxFQUFRRCxFQUFTSCxHSWxRaEMsWUp3UUMsU0FBU3FCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRWhILFFBQVNzRCxHQUEyQjVCLEVBQU0zQyxHQUFRLElBQUsyQyxFQUFRLEtBQU0sSUFBSTZCLGdCQUFlLDREQUFnRSxRQUFPeEUsR0FBeUIsZ0JBQVRBLElBQXFDLGtCQUFUQSxHQUE4QjJDLEVBQVAzQyxFQUVsTyxRQUFTeUUsR0FBVUMsRUFBVUMsR0FBYyxHQUEwQixrQkFBZkEsSUFBNEMsT0FBZkEsRUFBdUIsS0FBTSxJQUFJMUQsV0FBVSxpRUFBb0UwRCxHQUFlRCxHQUFTekMsVUFBWUwsT0FBT2dELE9BQU9ELEdBQWNBLEVBQVcxQyxXQUFhNEMsYUFBZXBDLE1BQU9pQyxFQUFVakQsWUFBWSxFQUFPRSxVQUFVLEVBQU1ELGNBQWMsS0FBZWlELElBQVkvQyxPQUFPa0QsZUFBaUJsRCxPQUFPa0QsZUFBZUosRUFBVUMsR0FBY0QsRUFBU0ssVUFBWUosR0FOamUsR0FBSXpELEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sSUFBaUIsTUFBTyxVQUFVUixFQUFhZSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJILEVBQVlpQixVQUFXRixHQUFpQkMsR0FBYWIsRUFBaUJILEVBQWFnQixHQUFxQmhCLE1JclEzaEJnRSxFQUFZdkYsRUFBUSxHQU9wQnlDLEVKOFFnQixTQUFVK0MsR0FHN0IsUUFBUy9DLEtBR1AsTUFGQXBCLEdBQWdCSixLQUFNd0IsR0FFZnFDLEVBQTJCN0QsTUFBT3dCLEVBQWU2QyxXQUFhbkQsT0FBT3NELGVBQWVoRCxJQUFpQmlELE1BQU16RSxLQUFNMEUsWUFlMUgsTUFwQkFYLEdBQVV2QyxFQUFnQitDLEdBUTFCL0QsRUFBYWdCLElBQ1hKLElBQUssZUFNTFcsTUFBTyxTSXpSSW1CLEdBQ1osT0FBTyxNSjZSRDFCLEdJblNtQjhDLEVBVTdCbkYsR0FBT0QsUUFBVXNDLEdKZ1NYLFNBQVNyQyxFQUFRRCxHS2xUdkIsWUw2VEMsU0FBU2tCLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFnQixLQUFNLElBQUlDLFdBQVUscUNBRmhILEdBQUlDLEdBQWUsV0FBYyxRQUFTQyxHQUFpQkMsRUFBUUMsR0FBUyxJQUFLLEdBQUlDLEdBQUksRUFBR0EsRUFBSUQsRUFBTUUsT0FBUUQsSUFBSyxDQUFFLEdBQUlFLEdBQWFILEVBQU1DLEVBQUlFLEdBQVdDLFdBQWFELEVBQVdDLGFBQWMsRUFBT0QsRUFBV0UsY0FBZSxFQUFVLFNBQVdGLEtBQVlBLEVBQVdHLFVBQVcsR0FBTUMsT0FBT0MsZUFBZVQsRUFBUUksRUFBV00sSUFBS04sSUFBaUIsTUFBTyxVQUFVUixFQUFhZSxFQUFZQyxHQUFpSixNQUE5SEQsSUFBWVosRUFBaUJILEVBQVlpQixVQUFXRixHQUFpQkMsR0FBYWIsRUFBaUJILEVBQWFnQixHQUFxQmhCLE1LclQzaEJnRSxFTHlUVyxXS3hUZixRQUFBQSxLQUFlbEUsRUFBQUosS0FBQXNFLEdBUWJ0RSxLQUFLa0QsVUFBWSxFTHVWbEIsTUFuQkExQyxHQUFhOEQsSUFDWGxELElBQUssY0FPTFcsTUFBTyxlQUVQWCxJQUFLLE9BQ0xtQyxJQUFLLFdLdlVOLE1BQU92RCxNQUFLa0QsV0wwVVhNLElBQUssU0t2VUVtQixHQUNSM0UsS0FBS2tELFVBQVl5QixNTDJVWEwsSUtqVVZuRixHQUFPRCxRQUFVb0YsR0x3VVgsU0FBU25GLEVBQVFELEVBQVNILEdNN1doQyxZTm1YQyxTQUFTcUIsR0FBZ0JDLEVBQVVDLEdBQWUsS0FBTUQsWUFBb0JDLElBQWdCLEtBQU0sSUFBSUMsV0FBVSxxQ0FFaEgsUUFBU3NELEdBQTJCNUIsRUFBTTNDLEdBQVEsSUFBSzJDLEVBQVEsS0FBTSxJQUFJNkIsZ0JBQWUsNERBQWdFLFFBQU94RSxHQUF5QixnQkFBVEEsSUFBcUMsa0JBQVRBLEdBQThCMkMsRUFBUDNDLEVBRWxPLFFBQVN5RSxHQUFVQyxFQUFVQyxHQUFjLEdBQTBCLGtCQUFmQSxJQUE0QyxPQUFmQSxFQUF1QixLQUFNLElBQUkxRCxXQUFVLGlFQUFvRTBELEdBQWVELEdBQVN6QyxVQUFZTCxPQUFPZ0QsT0FBT0QsR0FBY0EsRUFBVzFDLFdBQWE0QyxhQUFlcEMsTUFBT2lDLEVBQVVqRCxZQUFZLEVBQU9FLFVBQVUsRUFBTUQsY0FBYyxLQUFlaUQsSUFBWS9DLE9BQU9rRCxlQUFpQmxELE9BQU9rRCxlQUFlSixFQUFVQyxHQUFjRCxFQUFTSyxVQUFZSixHQU5qZSxHQUFJekQsR0FBZSxXQUFjLFFBQVNDLEdBQWlCQyxFQUFRQyxHQUFTLElBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRCxFQUFNRSxPQUFRRCxJQUFLLENBQUUsR0FBSUUsR0FBYUgsRUFBTUMsRUFBSUUsR0FBV0MsV0FBYUQsRUFBV0MsYUFBYyxFQUFPRCxFQUFXRSxjQUFlLEVBQVUsU0FBV0YsS0FBWUEsRUFBV0csVUFBVyxHQUFNQyxPQUFPQyxlQUFlVCxFQUFRSSxFQUFXTSxJQUFLTixJQUFpQixNQUFPLFVBQVVSLEVBQWFlLEVBQVlDLEdBQWlKLE1BQTlIRCxJQUFZWixFQUFpQkgsRUFBWWlCLFVBQVdGLEdBQWlCQyxHQUFhYixFQUFpQkgsRUFBYWdCLEdBQXFCaEIsTU1oWDNoQmdFLEVBQVl2RixFQUFRLEdBT3BCMEMsRU55WGMsU0FBVThDLEdBRzNCLFFBQVM5QyxLQUdQLE1BRkFyQixHQUFnQkosS0FBTXlCLEdBRWZvQyxFQUEyQjdELE1BQU95QixFQUFhNEMsV0FBYW5ELE9BQU9zRCxlQUFlL0MsSUFBZWdELE1BQU16RSxLQUFNMEUsWUFldEgsTUFwQkFYLEdBQVV0QyxFQUFjOEMsR0FReEIvRCxFQUFhaUIsSUFDWEwsSUFBSyxlQU1MVyxNQUFPLFNNcFlJbUIsR0FDWixPQUFPLE1Od1lEekIsR005WWlCNkMsRUFVM0JuRixHQUFPRCxRQUFVdUMiLCJmaWxlIjoiZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBEYXRlUmFuZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0OyhmdW5jdGlvbiAoZmFjdG9yeSkge1xuXHQgIGZhY3RvcnkoRnVzaW9uQ2hhcnRzKTtcblx0fSkoZnVuY3Rpb24gKEZDKSB7XG5cdCAgRkMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsnZGF0ZS1yYW5nZS1jaG9vc2VyJywgZnVuY3Rpb24gKGlkKSB7XG5cdCAgICB2YXIgZ2xvYmFsID0gdGhpcztcblx0ICAgIHZhciBleHRBUEkgPSBnbG9iYWwuZXh0QVBJO1xuXHRcblx0ICAgIC8vIHZhciBvdGhlckFQSSA9IEZDLmdldEV4dENvbXBvbmVudChpZCwgJ2FwaScsICdsZWdhY3lleHRhcGknKTtcblx0ICAgIC8vIHZhciB0b29sQm94QXBpID0gRkMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHRcblx0ICAgIHdpbmRvdy5kciA9IG5ldyBEYXRlUmFuZ2UoKTtcblx0ICAgIGV4dEFQSSh3aW5kb3cuZHIpO1xuXHQgIH1dKTtcblx0fSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBTdGFydERhdGVJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBFbmREYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHRcblx0LyoqXG5cdCAqIENsYXNzIHJlcHJlc2VudGluZyB0aGUgRGF0ZVJhbmdlLlxuXHQgKi9cblx0XG5cdHZhciBEYXRlUmFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgZnVuY3Rpb24gRGF0ZVJhbmdlKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGVSYW5nZSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB0aGlzLnN0YXJ0RHQgPSAwO1xuXHQgICAgdGhpcy5lbmREdCA9IDA7XG5cdCAgICB0aGlzLnN0YXJ0VGV4dCA9IHtcblx0ICAgICAgYXR0cjogZnVuY3Rpb24gYXR0cigpIHt9XG5cdCAgICB9O1xuXHQgICAgdGhpcy5lbmRUZXh0ID0ge1xuXHQgICAgICBhdHRyOiBmdW5jdGlvbiBhdHRyKCkge31cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzLlxuXHQgICAqIEB0eXBlIHtEYXRlUmFuZ2UucmFuZ2V9XG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRGF0ZVJhbmdlLCBbe1xuXHQgICAga2V5OiAnaW5pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgIHZhciBzZWxmID0gdGhpcztcblx0ICAgICAgcmVxdWlyZSgnWC1BeGlzJywgJ2dyYXBoaWNzJywgJ2NoYXJ0JywgZnVuY3Rpb24gKHgsIGdyYXBoaWNzLCBjaGFydCkge1xuXHQgICAgICAgIHNlbGYueCA9IHg7XG5cdCAgICAgICAgc2VsZi5wYXBlciA9IGdyYXBoaWNzO1xuXHQgICAgICAgIHNlbGYuY2hhcnQgPSBjaGFydDtcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGxhY2VJbkNhbnZhcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGxhY2VJbkNhbnZhcygpIHtcblx0ICAgICAgdGhpcy5yYW5nZSA9IHtcblx0ICAgICAgICBzdGFydERhdGU6IDEyLFxuXHQgICAgICAgIGVuZERhdGU6IDIzXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZHJhdycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdygpIHtcblx0ICAgICAgdmFyIHBhcGVyID0gdGhpcy5wYXBlcjtcblx0XG5cdCAgICAgIHZhciBzdGFydExhYmVsID0gcGFwZXIudGV4dCgyMCwgMjIsICdGcm9tOiAnKTtcblx0ICAgICAgc3RhcnRMYWJlbC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG5cdCAgICAgIHN0YXJ0TGFiZWwuYXR0cignZmlsbCcsICcjMDAwJyk7XG5cdCAgICAgIHZhciBzdGFydFJlY3QgPSBwYXBlci5yZWN0KDUwLCAxMCwgOTAsIDI1KTtcblx0ICAgICAgc3RhcnRSZWN0LmF0dHIoJ3N0cm9rZScsICcjMDAwJyk7XG5cdCAgICAgIHRoaXMuc3RhcnRUZXh0ID0gcGFwZXIudGV4dCg5NSwgMjIsIHRoaXMuZ2V0Rm9ybWF0dGVkRGF0ZSh0aGlzLnN0YXJ0RGF0ZSkpO1xuXHQgICAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG5cdCAgICAgIHRoaXMuc3RhcnRUZXh0LmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuXHRcblx0ICAgICAgdmFyIGVuZExhYmVsID0gcGFwZXIudGV4dCgxNzAsIDIyLCAnVG86ICcpO1xuXHQgICAgICBlbmRMYWJlbC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG5cdCAgICAgIGVuZExhYmVsLmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuXHQgICAgICB2YXIgZW5kUmVjdCA9IHBhcGVyLnJlY3QoMTkwLCAxMCwgOTAsIDI1KTtcblx0ICAgICAgZW5kUmVjdC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xuXHQgICAgICB0aGlzLmVuZFRleHQgPSBwYXBlci50ZXh0KDIzNSwgMjIsIHRoaXMuZ2V0Rm9ybWF0dGVkRGF0ZSh0aGlzLmVuZERhdGUpKTtcblx0ICAgICAgdGhpcy5lbmRUZXh0LmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcblx0ICAgICAgdGhpcy5lbmRUZXh0LmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuXHQgICAgfVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2Rpc3Bvc2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc3Bvc2UoKSB7fVxuXHQgICAgLy8gVE9ETzogZGlzcG9zZSBleHRlbnNpb25cblx0XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTd2FwcyB0aGUgc3RhcnQgZGF0ZSBhbmQgdGhlIGVuZCBkYXRlIG9mIHRoZSBkYXRlIHJhbmdlXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3N3YXBEYXRlcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc3dhcERhdGVzKCkge1xuXHQgICAgICB2YXIgdGVtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcblx0ICAgICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZTtcblx0ICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHRlbXA7XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBTeW5jcyB0aGUgZGF0ZXJhbmdlIHNob3duIGJ5IHRoZSBGdXNpb25DaGFydHMgdGltZSBzZXJpZXMgY2hhcnQgYW5kIHRoZSBEYXRlIFJhbmdlIENob29zZXJcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc3luY1JhbmdlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzeW5jUmFuZ2UoKSB7fVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgVU5JWCB0aW1lc3RhbXBcblx0ICAgICAqIEBwYXJhbSAge251bWJlcn0gdGltZXN0YW1wIC0gQSBVTklYIHRpbWVzdGFtcCB0byBiZSBjb252ZXJ0ZWQgdG8gYSBkYXRlIHN0cmluZ1xuXHQgICAgICogQHJldHVybiB7c3RyaW5nfSAtIEEgZGF0ZSBzdHJpbmcgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gdGltZXN0YW1wXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0Rm9ybWF0dGVkRGF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkRGF0ZSh0aW1lc3RhbXApIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuZ2V0Rm9ybWF0dGVkRGF0ZSh0aW1lc3RhbXApO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogUmV0dXJucyBhIFVOSVggdGltZXN0YW1wIGZyb20gRnVzaW9uQ2hhcnRzIHdoZW4gZ2l2ZW4gYSBmb3JtYXR0ZWQgZGF0ZSBzdHJpbmdcblx0ICAgICAqIEBwYXJhbSAge3N0cmluZ30gZGF0ZVN0cmluZyAtIEEgZGF0ZSBzdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGEgVU5JWCB0aW1lc3RhbXBcblx0ICAgICAqIEByZXR1cm4ge251bWJlcn0gQSBVTklYIHRpbWVzdGFtcCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBkYXRlIHN0cmluZ1xuXHQgICAgICovXG5cdFxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2dldFRpbWVzdGFtcCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0VGltZXN0YW1wKGRhdGVTdHJpbmcpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuZ2V0VGltZXN0YW1wKGRhdGVTdHJpbmcpO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0cyB0aGUgY29uZmlndXJhYmxlIG9wdGlvbnMgb2YgdGhlIGV4dGVuc2lvbiAoZS5nLiBjb3NtZXRpY3MpXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRDb25maWcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvbmZpZyhjb25maWdPYmopIHt9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIHRoZSBjb25maWd1cmFibGUgb3B0aW9ucyBvZiB0aGUgZXh0ZW5zaW9uIChlLmcuIGNvc21ldGljcylcblx0ICAgICAqIEByZXR1cm4ge29iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRDb25maWcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbmZpZygpIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBjYWxlbmRhclZpc2libGU6ICdmYWxzZSdcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzdGFydERhdGUnLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnN0YXJ0RHQ7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQoc3RhcnREdCkge1xuXHQgICAgICBpZiAoc3RhcnREdCA8PSB0aGlzLmVuZER0KSB7XG5cdCAgICAgICAgdGhpcy5zdGFydER0ID0gc3RhcnREdDtcblx0ICAgICAgICB2YXIgZm9ybWF0dGVkU3RhcnREYXRlID0gdGhpcy5nZXRGb3JtYXR0ZWREYXRlKHRoaXMuc3RhcnREdCk7XG5cdCAgICAgICAgdGhpcy5zdGFydFRleHQuYXR0cigndGV4dCcsIGZvcm1hdHRlZFN0YXJ0RGF0ZSk7XG5cdFxuXHQgICAgICAgIHZhciBzZGkgPSBuZXcgU3RhcnREYXRlSW5wdXQoKTtcblx0ICAgICAgICBzZGkudGltZXN0YW1wID0gdGhpcy5zdGFydER0O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZW5kRGF0ZScsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZW5kRHQ7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQoZW5kRHQpIHtcblx0ICAgICAgaWYgKGVuZER0ID49IHRoaXMuc3RhcnREdCkge1xuXHQgICAgICAgIHRoaXMuZW5kRHQgPSBlbmREdDtcblx0ICAgICAgICB2YXIgZm9ybWF0dGVkRW5kRGF0ZSA9IHRoaXMuZ2V0Rm9ybWF0dGVkRGF0ZSh0aGlzLmVuZER0KTtcblx0ICAgICAgICB0aGlzLmVuZFRleHQuYXR0cigndGV4dCcsIGZvcm1hdHRlZEVuZERhdGUpO1xuXHRcblx0ICAgICAgICB2YXIgZWRpID0gbmV3IEVuZERhdGVJbnB1dCgpO1xuXHQgICAgICAgIGVkaS50aW1lc3RhbXAgPSB0aGlzLmVuZER0O1xuXHQgICAgICB9XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gRGF0ZVJhbmdlO1xuXHR9KCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IERhdGVSYW5nZTtcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBEYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIEEgY29uY3JldGUgcmVwcmVzZW50YXRpb24gb2YgRGF0ZUlucHV0IGZvciB0aGUgc3RhcnQgZGF0ZS5cblx0ICogQGV4dGVuZHMgRGF0ZUlucHV0XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIFN0YXJ0RGF0ZUlucHV0ID0gZnVuY3Rpb24gKF9EYXRlSW5wdXQpIHtcblx0ICBfaW5oZXJpdHMoU3RhcnREYXRlSW5wdXQsIF9EYXRlSW5wdXQpO1xuXHRcblx0ICBmdW5jdGlvbiBTdGFydERhdGVJbnB1dCgpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFydERhdGVJbnB1dCk7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTdGFydERhdGVJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFN0YXJ0RGF0ZUlucHV0KSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoU3RhcnREYXRlSW5wdXQsIFt7XG5cdCAgICBrZXk6ICd2YWxpZGF0ZURhdGUnLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVmFsaWRhdGUgdGhlIGdpdmVuIHRpbWVzdGFtcFxuXHQgICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZ2l2ZW4gdGltZXN0YW1wIGlzIHZhbGlkIG9yIG5vdFxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHRpbWVzdGFtcCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTdGFydERhdGVJbnB1dDtcblx0fShEYXRlSW5wdXQpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTdGFydERhdGVJbnB1dDtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCAqIENsYXNzIHJlcHJlc2VudGluZyBhIGFic3RyYWN0IERhdGVJbnB1dC5cblx0ICogQGFic3RyYWN0XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgRGF0ZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIERhdGVJbnB1dCgpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXRlSW5wdXQpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHR5cGVkZWYge29iamVjdH0gRGF0ZUlucHV0LmlucHV0XG5cdCAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGltZXN0YW1wIC0gVGhlIGN1cnJlbnQgdGltZSBzaG93biBvbiB0aGUgZGF0ZSBpbnB1dC5cblx0ICAgICAqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB0aGlzLnRpbWVzdGFtcCA9IDA7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXByZXNlbnRzIHRoZSBudW1lcmljIHZhbHVlIG9mIHRoZSBkYXRlXG5cdCAgICogQHR5cGUgbnVtYmVyXG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRGF0ZUlucHV0LCBbe1xuXHQgICAga2V5OiAnZGlzcGxheURhdGUnLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIERpc3BsYXlzIHRoZSBkYXRlIG9uIHRoZSBkYXRlIGlucHV0XG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGxheURhdGUoKSB7fVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RhdGUnLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChtcykge1xuXHQgICAgICB0aGlzLnRpbWVzdGFtcCA9IG1zO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIERhdGVJbnB1dDtcblx0fSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEYXRlSW5wdXQ7XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgRGF0ZUlucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qKlxuXHQgKiBBIGNvbmNyZXRlIHJlcHJlc2VudGF0aW9uIG9mIERhdGVJbnB1dCBmb3IgdGhlIGVuZCBkYXRlLlxuXHQgKiBAZXh0ZW5kcyBEYXRlSW5wdXRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdFxuXHR2YXIgRW5kRGF0ZUlucHV0ID0gZnVuY3Rpb24gKF9EYXRlSW5wdXQpIHtcblx0ICBfaW5oZXJpdHMoRW5kRGF0ZUlucHV0LCBfRGF0ZUlucHV0KTtcblx0XG5cdCAgZnVuY3Rpb24gRW5kRGF0ZUlucHV0KCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVuZERhdGVJbnB1dCk7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChFbmREYXRlSW5wdXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihFbmREYXRlSW5wdXQpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhFbmREYXRlSW5wdXQsIFt7XG5cdCAgICBrZXk6ICd2YWxpZGF0ZURhdGUnLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVmFsaWRhdGUgdGhlIGdpdmVuIHRpbWVzdGFtcFxuXHQgICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZ2l2ZW4gdGltZXN0YW1wIGlzIHZhbGlkIG9yIG5vdFxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHRpbWVzdGFtcCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBFbmREYXRlSW5wdXQ7XG5cdH0oRGF0ZUlucHV0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRW5kRGF0ZUlucHV0O1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBmY3RzLWV4dC1kYXRlcmFuZ2UtZXM1Lm1pbi5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgZjU4N2QzODBjNmFhNWVlMjVhNGZcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5jb25zdCBEYXRlUmFuZ2UgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWRhdGVyYW5nZScpO1xuXG47KGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIGZhY3RvcnkoRnVzaW9uQ2hhcnRzKTtcbn0pKGZ1bmN0aW9uIChGQykge1xuICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydkYXRlLXJhbmdlLWNob29zZXInLCBmdW5jdGlvbiAoaWQpIHtcbiAgICB2YXIgZ2xvYmFsID0gdGhpcztcbiAgICB2YXIgZXh0QVBJID0gZ2xvYmFsLmV4dEFQSTtcblxuICAgIC8vIHZhciBvdGhlckFQSSA9IEZDLmdldEV4dENvbXBvbmVudChpZCwgJ2FwaScsICdsZWdhY3lleHRhcGknKTtcbiAgICAvLyB2YXIgdG9vbEJveEFwaSA9IEZDLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcblxuICAgIHdpbmRvdy5kciA9IG5ldyBEYXRlUmFuZ2UoKTtcbiAgICBleHRBUEkod2luZG93LmRyKTtcbiAgfV0pO1xufSk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9pbmRleC5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBTdGFydERhdGVJbnB1dCA9IHJlcXVpcmUoJy4vZmN0cy1leHQtc3RhcnRkYXRlaW5wdXQnKTtcbnZhciBFbmREYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWVuZGRhdGVpbnB1dCcpO1xuXG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyB0aGUgRGF0ZVJhbmdlLlxuICovXG5jbGFzcyBEYXRlUmFuZ2Uge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLnN0YXJ0RHQgPSAwO1xuICAgIHRoaXMuZW5kRHQgPSAwO1xuICAgIHRoaXMuc3RhcnRUZXh0ID0ge1xuICAgICAgYXR0cjogZnVuY3Rpb24gKCkge31cbiAgICB9O1xuICAgIHRoaXMuZW5kVGV4dCA9IHtcbiAgICAgIGF0dHI6IGZ1bmN0aW9uICgpIHt9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzLlxuICAgKiBAdHlwZSB7RGF0ZVJhbmdlLnJhbmdlfVxuICAgKi9cbiAgZ2V0IHN0YXJ0RGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuc3RhcnREdDtcbiAgfVxuXG4gIHNldCBzdGFydERhdGUgKHN0YXJ0RHQpIHtcbiAgICBpZiAoc3RhcnREdCA8PSB0aGlzLmVuZER0KSB7XG4gICAgICB0aGlzLnN0YXJ0RHQgPSBzdGFydER0O1xuICAgICAgdmFyIGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IHRoaXMuZ2V0Rm9ybWF0dGVkRGF0ZSh0aGlzLnN0YXJ0RHQpO1xuICAgICAgdGhpcy5zdGFydFRleHQuYXR0cigndGV4dCcsIGZvcm1hdHRlZFN0YXJ0RGF0ZSk7XG5cbiAgICAgIHZhciBzZGkgPSBuZXcgU3RhcnREYXRlSW5wdXQoKTtcbiAgICAgIHNkaS50aW1lc3RhbXAgPSB0aGlzLnN0YXJ0RHQ7XG4gICAgfVxuICB9XG5cbiAgZ2V0IGVuZERhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLmVuZER0O1xuICB9XG5cbiAgc2V0IGVuZERhdGUgKGVuZER0KSB7XG4gICAgaWYgKGVuZER0ID49IHRoaXMuc3RhcnREdCkge1xuICAgICAgdGhpcy5lbmREdCA9IGVuZER0O1xuICAgICAgdmFyIGZvcm1hdHRlZEVuZERhdGUgPSB0aGlzLmdldEZvcm1hdHRlZERhdGUodGhpcy5lbmREdCk7XG4gICAgICB0aGlzLmVuZFRleHQuYXR0cigndGV4dCcsIGZvcm1hdHRlZEVuZERhdGUpO1xuXG4gICAgICB2YXIgZWRpID0gbmV3IEVuZERhdGVJbnB1dCgpO1xuICAgICAgZWRpLnRpbWVzdGFtcCA9IHRoaXMuZW5kRHQ7XG4gICAgfVxuICB9XG5cbiAgaW5pdCAocmVxdWlyZSkge1xuICAgIHZhciBzZWxmID0gdGhpcztcbiAgICByZXF1aXJlKCdYLUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCBmdW5jdGlvbiAoeCwgZ3JhcGhpY3MsIGNoYXJ0KSB7XG4gICAgICBzZWxmLnggPSB4O1xuICAgICAgc2VsZi5wYXBlciA9IGdyYXBoaWNzO1xuICAgICAgc2VsZi5jaGFydCA9IGNoYXJ0O1xuICAgIH0pO1xuICB9XG5cbiAgcGxhY2VJbkNhbnZhcyAoKSB7XG4gICAgdGhpcy5yYW5nZSA9IHtcbiAgICAgIHN0YXJ0RGF0ZTogMTIsXG4gICAgICBlbmREYXRlOiAyM1xuICAgIH07XG4gIH1cblxuICBkcmF3ICgpIHtcbiAgICB2YXIgcGFwZXIgPSB0aGlzLnBhcGVyO1xuXG4gICAgdmFyIHN0YXJ0TGFiZWwgPSBwYXBlci50ZXh0KDIwLCAyMiwgJ0Zyb206ICcpO1xuICAgIHN0YXJ0TGFiZWwuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpO1xuICAgIHN0YXJ0TGFiZWwuYXR0cignZmlsbCcsICcjMDAwJyk7XG4gICAgdmFyIHN0YXJ0UmVjdCA9IHBhcGVyLnJlY3QoNTAsIDEwLCA5MCwgMjUpO1xuICAgIHN0YXJ0UmVjdC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIHRoaXMuc3RhcnRUZXh0ID0gcGFwZXIudGV4dCg5NSwgMjIsIHRoaXMuZ2V0Rm9ybWF0dGVkRGF0ZSh0aGlzLnN0YXJ0RGF0ZSkpO1xuICAgIHRoaXMuc3RhcnRUZXh0LmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcbiAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCdmaWxsJywgJyMwMDAnKTtcblxuICAgIHZhciBlbmRMYWJlbCA9IHBhcGVyLnRleHQoMTcwLCAyMiwgJ1RvOiAnKTtcbiAgICBlbmRMYWJlbC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG4gICAgZW5kTGFiZWwuYXR0cignZmlsbCcsICcjMDAwJyk7XG4gICAgdmFyIGVuZFJlY3QgPSBwYXBlci5yZWN0KDE5MCwgMTAsIDkwLCAyNSk7XG4gICAgZW5kUmVjdC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIHRoaXMuZW5kVGV4dCA9IHBhcGVyLnRleHQoMjM1LCAyMiwgdGhpcy5nZXRGb3JtYXR0ZWREYXRlKHRoaXMuZW5kRGF0ZSkpO1xuICAgIHRoaXMuZW5kVGV4dC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG4gICAgdGhpcy5lbmRUZXh0LmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuICB9XG5cbiAgZGlzcG9zZSAoKSB7XG4gICAgLy8gVE9ETzogZGlzcG9zZSBleHRlbnNpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBTd2FwcyB0aGUgc3RhcnQgZGF0ZSBhbmQgdGhlIGVuZCBkYXRlIG9mIHRoZSBkYXRlIHJhbmdlXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzd2FwRGF0ZXMgKCkge1xuICAgIGxldCB0ZW1wID0gdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlO1xuICAgIHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZSA9IHRoaXMuZGF0ZVJhbmdlLmVuZERhdGU7XG4gICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHRlbXA7XG4gIH1cblxuICAvKipcbiAgICogU3luY3MgdGhlIGRhdGVyYW5nZSBzaG93biBieSB0aGUgRnVzaW9uQ2hhcnRzIHRpbWUgc2VyaWVzIGNoYXJ0IGFuZCB0aGUgRGF0ZSBSYW5nZSBDaG9vc2VyXG4gICAqIEBwcml2YXRlXG4gICAqL1xuICBzeW5jUmFuZ2UgKCkge31cblxuICAvKipcbiAgICogUmV0dXJucyBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgVU5JWCB0aW1lc3RhbXBcbiAgICogQHBhcmFtICB7bnVtYmVyfSB0aW1lc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIGNvbnZlcnRlZCB0byBhIGRhdGUgc3RyaW5nXG4gICAqIEByZXR1cm4ge3N0cmluZ30gLSBBIGRhdGUgc3RyaW5nIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcFxuICAgKi9cbiAgZ2V0Rm9ybWF0dGVkRGF0ZSAodGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHRoaXMuY2hhcnQuZ2V0Rm9ybWF0dGVkRGF0ZSh0aW1lc3RhbXApO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgYSBVTklYIHRpbWVzdGFtcCBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgZm9ybWF0dGVkIGRhdGUgc3RyaW5nXG4gICAqIEBwYXJhbSAge3N0cmluZ30gZGF0ZVN0cmluZyAtIEEgZGF0ZSBzdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGEgVU5JWCB0aW1lc3RhbXBcbiAgICogQHJldHVybiB7bnVtYmVyfSBBIFVOSVggdGltZXN0YW1wIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIGRhdGUgc3RyaW5nXG4gICAqL1xuICBnZXRUaW1lc3RhbXAgKGRhdGVTdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5jaGFydC5nZXRUaW1lc3RhbXAoZGF0ZVN0cmluZyk7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY29uZmlndXJhYmxlIG9wdGlvbnMgb2YgdGhlIGV4dGVuc2lvbiAoZS5nLiBjb3NtZXRpY3MpXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdPYmogVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaW91cyBleHRlbnNpb24gb3B0aW9uc1xuICAgKi9cbiAgc2V0Q29uZmlnIChjb25maWdPYmopIHt9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvbmZpZ3VyYWJsZSBvcHRpb25zIG9mIHRoZSBleHRlbnNpb24gKGUuZy4gY29zbWV0aWNzKVxuICAgKiBAcmV0dXJuIHtvYmplY3R9IGNvbmZpZ09iaiBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyB2YXJpb3VzIGV4dGVuc2lvbiBvcHRpb25zXG4gICAqL1xuICBnZXRDb25maWcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjYWxlbmRhclZpc2libGU6ICdmYWxzZSdcbiAgICB9O1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0ZVJhbmdlO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZmN0cy1leHQtZGF0ZXJhbmdlLmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgRGF0ZUlucHV0ID0gcmVxdWlyZSgnLi9mY3RzLWV4dC1kYXRlaW5wdXQnKTtcblxuLyoqXG4gKiBBIGNvbmNyZXRlIHJlcHJlc2VudGF0aW9uIG9mIERhdGVJbnB1dCBmb3IgdGhlIHN0YXJ0IGRhdGUuXG4gKiBAZXh0ZW5kcyBEYXRlSW5wdXRcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIFN0YXJ0RGF0ZUlucHV0IGV4dGVuZHMgRGF0ZUlucHV0IHtcbiAgLyoqXG4gICAqIFZhbGlkYXRlIHRoZSBnaXZlbiB0aW1lc3RhbXBcbiAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZ2l2ZW4gdGltZXN0YW1wIGlzIHZhbGlkIG9yIG5vdFxuICAgKi9cbiAgdmFsaWRhdGVEYXRlICh0aW1lc3RhbXApIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YXJ0RGF0ZUlucHV0O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZmN0cy1leHQtc3RhcnRkYXRlaW5wdXQuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGFic3RyYWN0IERhdGVJbnB1dC5cbiAqIEBhYnN0cmFjdFxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgRGF0ZUlucHV0IHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtvYmplY3R9IERhdGVJbnB1dC5pbnB1dFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lc3RhbXAgLSBUaGUgY3VycmVudCB0aW1lIHNob3duIG9uIHRoZSBkYXRlIGlucHV0LlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50aW1lc3RhbXAgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlcHJlc2VudHMgdGhlIG51bWVyaWMgdmFsdWUgb2YgdGhlIGRhdGVcbiAgICogQHR5cGUgbnVtYmVyXG4gICAqL1xuICBnZXQgZGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xuICB9XG5cbiAgc2V0IGRhdGUgKG1zKSB7XG4gICAgdGhpcy50aW1lc3RhbXAgPSBtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5cyB0aGUgZGF0ZSBvbiB0aGUgZGF0ZSBpbnB1dFxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgZGlzcGxheURhdGUgKCkge31cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBEYXRlSW5wdXQ7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9mY3RzLWV4dC1kYXRlaW5wdXQuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5jb25zdCBEYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWRhdGVpbnB1dCcpO1xuXG4vKipcbiAqIEEgY29uY3JldGUgcmVwcmVzZW50YXRpb24gb2YgRGF0ZUlucHV0IGZvciB0aGUgZW5kIGRhdGUuXG4gKiBAZXh0ZW5kcyBEYXRlSW5wdXRcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEVuZERhdGVJbnB1dCBleHRlbmRzIERhdGVJbnB1dCB7XG4gIC8qKlxuICAgKiBWYWxpZGF0ZSB0aGUgZ2l2ZW4gdGltZXN0YW1wXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGdpdmVuIHRpbWVzdGFtcCBpcyB2YWxpZCBvciBub3RcbiAgICovXG4gIHZhbGlkYXRlRGF0ZSAodGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBFbmREYXRlSW5wdXQ7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9mY3RzLWV4dC1lbmRkYXRlaW5wdXQuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9
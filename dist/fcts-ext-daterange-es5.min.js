!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1),o=n(2),i=n(4),a=n(5),u=new a;u.register("extension",["date-range-chooser",function(t){var e=this,n=e.extAPI;console.log(t),n({init:function(t){t("X-Axis","Y-Axis",function(t,n){e.x=t,e.y=n})},placeInCanvas:function(){var t=new r;t.range={startDate:12,endDate:23};var e=new o;console.log(e.startDate);var n=new i;console.log(n.endDate)},draw:function(){},dispose:function(){}})}])},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){n(this,t),this.dateRange={startDate:0,endDate:0}}return r(t,[{key:"swapDates",value:function(){var t=this.dateRange.startDate;this.dateRange.startDate=this.dateRange.endDate,this.dateRange.endDate=t}},{key:"range",get:function(){return this.dateRange},set:function(t){t.startDate<=t.endDate&&(this.dateRange.startDate=t.startDate,this.dateRange.endDate=t.endDate)}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),c=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.date="01/01/1970",t}return i(e,t),a(e,[{key:"startDate",get:function(){return this.date},set:function(t){this.date=t}}]),e}(u);t.exports=c},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(){n(this,t),this.time=0}return r(t,[{key:"timestamp",get:function(){return this.time},set:function(t){this.time=t}}]),t}();t.exports=o},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),c=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.date="01/01/1970",t}return i(e,t),a(e,[{key:"endDate",get:function(){return this.date},set:function(t){this.date=t}}]),e}(u);t.exports=c},function(t,e){"use strict";var n=function(){};n.prototype.register=function(t,e){var n=e[0],r=e[1];console.log("Currently active extension: "+n),r.bind(this,565)()},n.prototype.getComponent=function(t,e){var n={x:24,y:56,width:100,height:20,index:4};return"api"===t&&"toolbox"===e?n:null},n.prototype.extAPI=function(t){t.init(function(){for(var t=[],e=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)"X-Axis"===arguments[n]?t.push(156772):"Y-Axis"===arguments[n]&&t.push(156765);e.apply(this,t)}),t.placeInCanvas(),t.draw(),t.dispose()},t.exports=n}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGE2ZGU4NmYzNGI0YjZmYTQ1ZTcyIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZXJhbmdlLmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1zdGFydGRhdGVpbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZWlucHV0LmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1lbmRkYXRlaW5wdXQuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2Z1c2lvbmNoYXJ0cy5qcyJdLCJuYW1lcyI6WyJtb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiaW5zdGFsbGVkTW9kdWxlcyIsImV4cG9ydHMiLCJtb2R1bGUiLCJpZCIsImxvYWRlZCIsImNhbGwiLCJtIiwiYyIsInAiLCJEYXRlUmFuZ2UiLCJTdGFydERhdGVJbnB1dCIsIkVuZERhdGVJbnB1dCIsIkZ1c2lvbkNoYXJ0cyIsImZjIiwicmVnaXN0ZXIiLCJnbG9iYWwiLCJ0aGlzIiwiZXh0QVBJIiwiY29uc29sZSIsImxvZyIsImluaXQiLCJyZXF1aXJlIiwieCIsInkiLCJwbGFjZUluQ2FudmFzIiwiZGF0ZVJhbmdlIiwicmFuZ2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwic3REdElucCIsImVuZER0SW5wIiwiZHJhdyIsImRpc3Bvc2UiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsInZhbHVlIiwidGVtcCIsImdldCIsInNldCIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkRhdGVJbnB1dCIsIl9EYXRlSW5wdXQiLCJfdGhpcyIsImdldFByb3RvdHlwZU9mIiwiZGF0ZSIsImRhdGVTdHIiLCJ0aW1lIiwibXMiLCJleHQiLCJhcnIiLCJleHROYW1lIiwiZm4iLCJiaW5kIiwiZ2V0Q29tcG9uZW50IiwiY29tcG9uZW50VHlwZSIsImNvbXBvbmVudE5hbWUiLCJ0b29sQm94Iiwid2lkdGgiLCJoZWlnaHQiLCJpbmRleCIsIm9iaiIsImFyZ3NUb0FwcGx5IiwiY2IiLCJhcmd1bWVudHMiLCJwdXNoIiwiYXBwbHkiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdFNUNoQyxZQUNBLElBQU1XLEdBQVlYLEVBQVEsR0FDcEJZLEVBQWlCWixFQUFRLEdBQ3pCYSxFQUFlYixFQUFRLEdBQ3ZCYyxFQUFlZCxFQUFRLEdBRXpCZSxFQUFLLEdBQUlELEVBRWJD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RUFBR0EsRUFBSWlELFVBQVVoRCxPQUFTLEVBQUdELElBQ25CLFdBQWpCaUQsVUFBVWpELEdBQ1orQyxFQUFZRyxLQUFLLFFBQ1MsV0FBakJELFVBQVVqRCxJQUNuQitDLEVBQVlHLEtBQUssT0FHckJGLEdBQUdHLE1BQU01RSxLQUFNd0UsS0FHakJELEVBQUkvRCxnQkFFSitELEVBQUl4RCxPQUVKd0QsRUFBSXZELFdBR045QixFQUFPRCxRQUFVVyIsImZpbGUiOiJmY3RzLWV4dC1kYXRlcmFuZ2UtZXM1Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIERhdGVSYW5nZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdHZhciBTdGFydERhdGVJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBFbmREYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgRnVzaW9uQ2hhcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdHZhciBmYyA9IG5ldyBGdXNpb25DaGFydHMoKTtcblx0XG5cdGZjLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ2RhdGUtcmFuZ2UtY2hvb3NlcicsIGZ1bmN0aW9uIChpZCkge1xuXHQgIHZhciBnbG9iYWwgPSB0aGlzO1xuXHQgIHZhciBleHRBUEkgPSBnbG9iYWwuZXh0QVBJO1xuXHQgIGNvbnNvbGUubG9nKGlkKTtcblx0XG5cdCAgLy8gdmFyIG90aGVyQVBJID0gZmMuZ2V0RXh0Q29tcG9uZW50KGlkLCAnYXBpJywgJ2xlZ2FjeWV4dGFwaScpO1xuXHQgIC8vIHZhciB0b29sQm94QXBpID0gZmMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHRcblx0ICBleHRBUEkoe1xuXHQgICAgaW5pdDogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgIHJlcXVpcmUoJ1gtQXhpcycsICdZLUF4aXMnLCBmdW5jdGlvbiAoeCwgeSkge1xuXHQgICAgICAgIGdsb2JhbC54ID0geDtcblx0ICAgICAgICBnbG9iYWwueSA9IHk7XG5cdCAgICAgIH0pO1xuXHQgICAgfSxcblx0ICAgIHBsYWNlSW5DYW52YXM6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7XG5cdCAgICAgIC8vIHNwYWNlIG1hbmFnZW1lbnRcblx0ICAgICAgdmFyIGRhdGVSYW5nZSA9IG5ldyBEYXRlUmFuZ2UoKTtcblx0ICAgICAgZGF0ZVJhbmdlLnJhbmdlID0ge1xuXHQgICAgICAgIHN0YXJ0RGF0ZTogMTIsXG5cdCAgICAgICAgZW5kRGF0ZTogMjNcblx0ICAgICAgfTtcblx0ICAgICAgdmFyIHN0RHRJbnAgPSBuZXcgU3RhcnREYXRlSW5wdXQoKTtcblx0ICAgICAgY29uc29sZS5sb2coc3REdElucC5zdGFydERhdGUpO1xuXHQgICAgICB2YXIgZW5kRHRJbnAgPSBuZXcgRW5kRGF0ZUlucHV0KCk7XG5cdCAgICAgIGNvbnNvbGUubG9nKGVuZER0SW5wLmVuZERhdGUpO1xuXHQgICAgfSxcblx0ICAgIGRyYXc6IGZ1bmN0aW9uIGRyYXcoKSB7XG5cdCAgICAgIC8vIGRyYXcgZXh0ZW5zaW9uXG5cdCAgICB9LFxuXHQgICAgZGlzcG9zZTogZnVuY3Rpb24gZGlzcG9zZSgpIHtcblx0ICAgICAgLy8gZGlzcG9zZSBleHRlbnNpb25cblx0ICAgIH1cblx0ICB9KTtcblx0fV0pO1xuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0ICogQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBEYXRlUmFuZ2UuXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgRGF0ZVJhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIERhdGVSYW5nZS5cblx0ICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBEYXRlUmFuZ2UucmFuZ2Vcblx0ICAgKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnREYXRlIC0gVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2UuXG5cdCAgICogQHByb3BlcnR5IHtudW1iZXJ9IGVuZERhdGUgLSBUaGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2UuXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gRGF0ZVJhbmdlKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGVSYW5nZSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB0aGlzLmRhdGVSYW5nZSA9IHtcblx0ICAgICAgc3RhcnREYXRlOiAwLFxuXHQgICAgICBlbmREYXRlOiAwXG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhcnQgYW5kIGVuZCBkYXRlcy5cblx0ICAgKiBAdHlwZSB7RGF0ZVJhbmdlLnJhbmdlfVxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKERhdGVSYW5nZSwgW3tcblx0ICAgIGtleTogJ3N3YXBEYXRlcycsXG5cdFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU3dhcHMgdGhlIHN0YXJ0IGRhdGUgYW5kIHRoZSBlbmQgZGF0ZSBvZiB0aGUgZGF0ZSByYW5nZVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gc3dhcERhdGVzKCkge1xuXHQgICAgICB2YXIgdGVtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcblx0ICAgICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZTtcblx0ICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHRlbXA7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmFuZ2UnLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmRhdGVSYW5nZTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChyYW5nZSkge1xuXHQgICAgICBpZiAocmFuZ2Uuc3RhcnREYXRlIDw9IHJhbmdlLmVuZERhdGUpIHtcblx0ICAgICAgICB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGUgPSByYW5nZS5zdGFydERhdGU7XG5cdCAgICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHJhbmdlLmVuZERhdGU7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBEYXRlUmFuZ2U7XG5cdH0oKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRGF0ZVJhbmdlO1xuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIERhdGVJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKipcblx0ICogQSBjb25jcmV0ZSByZXByZXNlbnRhdGlvbiBvZiBEYXRlSW5wdXQgZm9yIHRoZSBzdGFydCBkYXRlLlxuXHQgKiBAZXh0ZW5kcyBEYXRlSW5wdXRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdFxuXHR2YXIgU3RhcnREYXRlSW5wdXQgPSBmdW5jdGlvbiAoX0RhdGVJbnB1dCkge1xuXHQgIF9pbmhlcml0cyhTdGFydERhdGVJbnB1dCwgX0RhdGVJbnB1dCk7XG5cdFxuXHQgIGZ1bmN0aW9uIFN0YXJ0RGF0ZUlucHV0KCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFN0YXJ0RGF0ZUlucHV0KTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0ICAgIHZhciBfdGhpcyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTdGFydERhdGVJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFN0YXJ0RGF0ZUlucHV0KSkuY2FsbCh0aGlzKSk7XG5cdFxuXHQgICAgX3RoaXMuZGF0ZSA9ICcwMS8wMS8xOTcwJztcblx0ICAgIHJldHVybiBfdGhpcztcblx0ICB9XG5cdFxuXHQgIC8qKlxuXHQgICAqIFRoZSBzdGFydGluZyBkYXRlIG9mIHRoZSBUaW1lU2VyaWVzIGNoYXJ0LlxuXHQgICAqIEB0eXBlIHN0cmluZ1xuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKFN0YXJ0RGF0ZUlucHV0LCBbe1xuXHQgICAga2V5OiAnc3RhcnREYXRlJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5kYXRlO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KGRhdGVTdHIpIHtcblx0ICAgICAgdGhpcy5kYXRlID0gZGF0ZVN0cjtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTdGFydERhdGVJbnB1dDtcblx0fShEYXRlSW5wdXQpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTdGFydERhdGVJbnB1dDtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCAqIENsYXNzIHJlcHJlc2VudGluZyBhIGFic3RyYWN0IERhdGVJbnB1dC5cblx0ICogQGFic3RyYWN0XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgRGF0ZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIERhdGVJbnB1dCgpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXRlSW5wdXQpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHR5cGVkZWYge29iamVjdH0gRGF0ZUlucHV0LmlucHV0XG5cdCAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGltZXN0YW1wIC0gVGhlIGN1cnJlbnQgdGltZSBzaG93biBvbiB0aGUgZGF0ZSBpbnB1dC5cblx0ICAgICAqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB0aGlzLnRpbWUgPSAwO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVwcmVzZW50cyB0aGUgbnVtZXJpYyB2YWx1ZSBvZiB0aGUgZGF0ZVxuXHQgICAqIEB0eXBlIG51bWJlclxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKERhdGVJbnB1dCwgW3tcblx0ICAgIGtleTogJ3RpbWVzdGFtcCcsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudGltZTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChtcykge1xuXHQgICAgICB0aGlzLnRpbWUgPSBtcztcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBEYXRlSW5wdXQ7XG5cdH0oKTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRGF0ZUlucHV0O1xuXG4vKioqLyB9LFxuLyogNCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRmdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblx0XG5cdGZ1bmN0aW9uIF9pbmhlcml0cyhzdWJDbGFzcywgc3VwZXJDbGFzcykgeyBpZiAodHlwZW9mIHN1cGVyQ2xhc3MgIT09IFwiZnVuY3Rpb25cIiAmJiBzdXBlckNsYXNzICE9PSBudWxsKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJTdXBlciBleHByZXNzaW9uIG11c3QgZWl0aGVyIGJlIG51bGwgb3IgYSBmdW5jdGlvbiwgbm90IFwiICsgdHlwZW9mIHN1cGVyQ2xhc3MpOyB9IHN1YkNsYXNzLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoc3VwZXJDbGFzcyAmJiBzdXBlckNsYXNzLnByb3RvdHlwZSwgeyBjb25zdHJ1Y3RvcjogeyB2YWx1ZTogc3ViQ2xhc3MsIGVudW1lcmFibGU6IGZhbHNlLCB3cml0YWJsZTogdHJ1ZSwgY29uZmlndXJhYmxlOiB0cnVlIH0gfSk7IGlmIChzdXBlckNsYXNzKSBPYmplY3Quc2V0UHJvdG90eXBlT2YgPyBPYmplY3Quc2V0UHJvdG90eXBlT2Yoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIDogc3ViQ2xhc3MuX19wcm90b19fID0gc3VwZXJDbGFzczsgfVxuXHRcblx0dmFyIERhdGVJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMyk7XG5cdFxuXHQvKipcblx0ICogQSBjb25jcmV0ZSByZXByZXNlbnRhdGlvbiBvZiBEYXRlSW5wdXQgZm9yIHRoZSBlbmQgZGF0ZS5cblx0ICogQGV4dGVuZHMgRGF0ZUlucHV0XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIEVuZERhdGVJbnB1dCA9IGZ1bmN0aW9uIChfRGF0ZUlucHV0KSB7XG5cdCAgX2luaGVyaXRzKEVuZERhdGVJbnB1dCwgX0RhdGVJbnB1dCk7XG5cdFxuXHQgIGZ1bmN0aW9uIEVuZERhdGVJbnB1dCgpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBFbmREYXRlSW5wdXQpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHQgICAgdmFyIF90aGlzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEVuZERhdGVJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEVuZERhdGVJbnB1dCkpLmNhbGwodGhpcykpO1xuXHRcblx0ICAgIF90aGlzLmRhdGUgPSAnMDEvMDEvMTk3MCc7XG5cdCAgICByZXR1cm4gX3RoaXM7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBUaGUgZW5kaW5nIGRhdGUgb2YgdGhlIFRpbWVTZXJpZXMgY2hhcnQuXG5cdCAgICogQHR5cGUgc3RyaW5nXG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRW5kRGF0ZUlucHV0LCBbe1xuXHQgICAga2V5OiAnZW5kRGF0ZScsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMuZGF0ZTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChkYXRlU3RyKSB7XG5cdCAgICAgIHRoaXMuZGF0ZSA9IGRhdGVTdHI7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gRW5kRGF0ZUlucHV0O1xuXHR9KERhdGVJbnB1dCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IEVuZERhdGVJbnB1dDtcblxuLyoqKi8gfSxcbi8qIDUgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBGdXNpb25DaGFydHMgPSBmdW5jdGlvbiBGdXNpb25DaGFydHMoKSB7fTtcblx0XG5cdEZ1c2lvbkNoYXJ0cy5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbiAoZXh0LCBhcnIpIHtcblx0ICB2YXIgZXh0TmFtZSA9IGFyclswXTtcblx0ICB2YXIgZm4gPSBhcnJbMV07XG5cdCAgY29uc29sZS5sb2coJ0N1cnJlbnRseSBhY3RpdmUgZXh0ZW5zaW9uOiAnICsgZXh0TmFtZSk7XG5cdCAgZm4uYmluZCh0aGlzLCA1NjUpKCk7XG5cdH07XG5cdFxuXHRGdXNpb25DaGFydHMucHJvdG90eXBlLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBjb21wb25lbnROYW1lKSB7XG5cdCAgdmFyIHRvb2xCb3ggPSB7XG5cdCAgICB4OiAyNCxcblx0ICAgIHk6IDU2LFxuXHQgICAgd2lkdGg6IDEwMCxcblx0ICAgIGhlaWdodDogMjAsXG5cdCAgICBpbmRleDogNFxuXHQgIH07XG5cdFxuXHQgIGlmIChjb21wb25lbnRUeXBlID09PSAnYXBpJyAmJiBjb21wb25lbnROYW1lID09PSAndG9vbGJveCcpIHtcblx0ICAgIHJldHVybiB0b29sQm94O1xuXHQgIH1cblx0XG5cdCAgcmV0dXJuIG51bGw7XG5cdH07XG5cdFxuXHRGdXNpb25DaGFydHMucHJvdG90eXBlLmV4dEFQSSA9IGZ1bmN0aW9uIChvYmopIHtcblx0ICBvYmouaW5pdChmdW5jdGlvbiAoKSB7XG5cdCAgICB2YXIgYXJnc1RvQXBwbHkgPSBbXTtcblx0ICAgIHZhciBjYiA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XG5cdFxuXHQgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XG5cdCAgICAgIGlmIChhcmd1bWVudHNbaV0gPT09ICdYLUF4aXMnKSB7XG5cdCAgICAgICAgYXJnc1RvQXBwbHkucHVzaCgxNTY3NzIpO1xuXHQgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSA9PT0gJ1ktQXhpcycpIHtcblx0ICAgICAgICBhcmdzVG9BcHBseS5wdXNoKDE1Njc2NSk7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGNiLmFwcGx5KHRoaXMsIGFyZ3NUb0FwcGx5KTtcblx0ICB9KTtcblx0XG5cdCAgb2JqLnBsYWNlSW5DYW52YXMoKTtcblx0XG5cdCAgb2JqLmRyYXcoKTtcblx0XG5cdCAgb2JqLmRpc3Bvc2UoKTtcblx0fTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRnVzaW9uQ2hhcnRzO1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBmY3RzLWV4dC1kYXRlcmFuZ2UtZXM1Lm1pbi5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgYTZkZTg2ZjM0YjRiNmZhNDVlNzJcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5jb25zdCBEYXRlUmFuZ2UgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWRhdGVyYW5nZScpO1xuY29uc3QgU3RhcnREYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LXN0YXJ0ZGF0ZWlucHV0Jyk7XG5jb25zdCBFbmREYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWVuZGRhdGVpbnB1dCcpO1xuY29uc3QgRnVzaW9uQ2hhcnRzID0gcmVxdWlyZSgnLi4vbGliL2Z1c2lvbmNoYXJ0cycpO1xuXG52YXIgZmMgPSBuZXcgRnVzaW9uQ2hhcnRzKCk7XG5cbmZjLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ2RhdGUtcmFuZ2UtY2hvb3NlcicsIGZ1bmN0aW9uIChpZCkge1xuICB2YXIgZ2xvYmFsID0gdGhpcztcbiAgdmFyIGV4dEFQSSA9IGdsb2JhbC5leHRBUEk7XG4gIGNvbnNvbGUubG9nKGlkKTtcblxuICAvLyB2YXIgb3RoZXJBUEkgPSBmYy5nZXRFeHRDb21wb25lbnQoaWQsICdhcGknLCAnbGVnYWN5ZXh0YXBpJyk7XG4gIC8vIHZhciB0b29sQm94QXBpID0gZmMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXG4gIGV4dEFQSSh7XG4gICAgaW5pdDogZnVuY3Rpb24gKHJlcXVpcmUpIHtcbiAgICAgIHJlcXVpcmUoJ1gtQXhpcycsICdZLUF4aXMnLCBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICBnbG9iYWwueCA9IHg7XG4gICAgICAgIGdsb2JhbC55ID0geTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgcGxhY2VJbkNhbnZhczogZnVuY3Rpb24gKCkge1xuICAgICAgLy8gc3BhY2UgbWFuYWdlbWVudFxuICAgICAgdmFyIGRhdGVSYW5nZSA9IG5ldyBEYXRlUmFuZ2UoKTtcbiAgICAgIGRhdGVSYW5nZS5yYW5nZSA9IHtcbiAgICAgICAgc3RhcnREYXRlOiAxMixcbiAgICAgICAgZW5kRGF0ZTogMjNcbiAgICAgIH07XG4gICAgICB2YXIgc3REdElucCA9IG5ldyBTdGFydERhdGVJbnB1dCgpO1xuICAgICAgY29uc29sZS5sb2coc3REdElucC5zdGFydERhdGUpO1xuICAgICAgdmFyIGVuZER0SW5wID0gbmV3IEVuZERhdGVJbnB1dCgpO1xuICAgICAgY29uc29sZS5sb2coZW5kRHRJbnAuZW5kRGF0ZSk7XG4gICAgfSxcbiAgICBkcmF3OiBmdW5jdGlvbiAoKSB7XG4gICAgICAvLyBkcmF3IGV4dGVuc2lvblxuICAgIH0sXG4gICAgZGlzcG9zZTogZnVuY3Rpb24gKCkge1xuICAgICAgLy8gZGlzcG9zZSBleHRlbnNpb25cbiAgICB9XG4gIH0pO1xufV0pO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvaW5kZXguanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyB0aGUgRGF0ZVJhbmdlLlxuICovXG5jbGFzcyBEYXRlUmFuZ2Uge1xuICAvKipcbiAgICogQ3JlYXRlIGEgRGF0ZVJhbmdlLlxuICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBEYXRlUmFuZ2UucmFuZ2VcbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IHN0YXJ0RGF0ZSAtIFRoZSBzdGFydCBkYXRlIG9mIHRoZSBkYXRlIHJhbmdlLlxuICAgKiBAcHJvcGVydHkge251bWJlcn0gZW5kRGF0ZSAtIFRoZSBlbmQgZGF0ZSBvZiB0aGUgZGF0ZSByYW5nZS5cbiAgICovXG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMuZGF0ZVJhbmdlID0ge1xuICAgICAgc3RhcnREYXRlOiAwLFxuICAgICAgZW5kRGF0ZTogMFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhcnQgYW5kIGVuZCBkYXRlcy5cbiAgICogQHR5cGUge0RhdGVSYW5nZS5yYW5nZX1cbiAgICovXG4gIGdldCByYW5nZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0ZVJhbmdlO1xuICB9XG5cbiAgc2V0IHJhbmdlIChyYW5nZSkge1xuICAgIGlmIChyYW5nZS5zdGFydERhdGUgPD0gcmFuZ2UuZW5kRGF0ZSkge1xuICAgICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gcmFuZ2Uuc3RhcnREYXRlO1xuICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHJhbmdlLmVuZERhdGU7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN3YXBzIHRoZSBzdGFydCBkYXRlIGFuZCB0aGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2VcbiAgICovXG4gIHN3YXBEYXRlcyAoKSB7XG4gICAgbGV0IHRlbXAgPSB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGU7XG4gICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZTtcbiAgICB0aGlzLmRhdGVSYW5nZS5lbmREYXRlID0gdGVtcDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGVSYW5nZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZjdHMtZXh0LWRhdGVyYW5nZS5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IERhdGVJbnB1dCA9IHJlcXVpcmUoJy4vZmN0cy1leHQtZGF0ZWlucHV0Jyk7XG5cbi8qKlxuICogQSBjb25jcmV0ZSByZXByZXNlbnRhdGlvbiBvZiBEYXRlSW5wdXQgZm9yIHRoZSBzdGFydCBkYXRlLlxuICogQGV4dGVuZHMgRGF0ZUlucHV0XG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBTdGFydERhdGVJbnB1dCBleHRlbmRzIERhdGVJbnB1dCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kYXRlID0gJzAxLzAxLzE5NzAnO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBzdGFydGluZyBkYXRlIG9mIHRoZSBUaW1lU2VyaWVzIGNoYXJ0LlxuICAgKiBAdHlwZSBzdHJpbmdcbiAgICovXG4gIGdldCBzdGFydERhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLmRhdGU7XG4gIH1cblxuICBzZXQgc3RhcnREYXRlIChkYXRlU3RyKSB7XG4gICAgdGhpcy5kYXRlID0gZGF0ZVN0cjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IFN0YXJ0RGF0ZUlucHV0O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZmN0cy1leHQtc3RhcnRkYXRlaW5wdXQuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG4vKipcbiAqIENsYXNzIHJlcHJlc2VudGluZyBhIGFic3RyYWN0IERhdGVJbnB1dC5cbiAqIEBhYnN0cmFjdFxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgRGF0ZUlucHV0IHtcbiAgY29uc3RydWN0b3IgKCkge1xuICAgIC8qKlxuICAgICAqIEB0eXBlZGVmIHtvYmplY3R9IERhdGVJbnB1dC5pbnB1dFxuICAgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSB0aW1lc3RhbXAgLSBUaGUgY3VycmVudCB0aW1lIHNob3duIG9uIHRoZSBkYXRlIGlucHV0LlxuICAgICAqL1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy50aW1lID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBudW1lcmljIHZhbHVlIG9mIHRoZSBkYXRlXG4gICAqIEB0eXBlIG51bWJlclxuICAgKi9cbiAgZ2V0IHRpbWVzdGFtcCAoKSB7XG4gICAgcmV0dXJuIHRoaXMudGltZTtcbiAgfVxuXG4gIHNldCB0aW1lc3RhbXAgKG1zKSB7XG4gICAgdGhpcy50aW1lID0gbXM7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBEYXRlSW5wdXQ7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9mY3RzLWV4dC1kYXRlaW5wdXQuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5jb25zdCBEYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWRhdGVpbnB1dCcpO1xuXG4vKipcbiAqIEEgY29uY3JldGUgcmVwcmVzZW50YXRpb24gb2YgRGF0ZUlucHV0IGZvciB0aGUgZW5kIGRhdGUuXG4gKiBAZXh0ZW5kcyBEYXRlSW5wdXRcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEVuZERhdGVJbnB1dCBleHRlbmRzIERhdGVJbnB1dCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICBzdXBlcigpO1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kYXRlID0gJzAxLzAxLzE5NzAnO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoZSBlbmRpbmcgZGF0ZSBvZiB0aGUgVGltZVNlcmllcyBjaGFydC5cbiAgICogQHR5cGUgc3RyaW5nXG4gICAqL1xuICBnZXQgZW5kRGF0ZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0ZTtcbiAgfVxuXG4gIHNldCBlbmREYXRlIChkYXRlU3RyKSB7XG4gICAgdGhpcy5kYXRlID0gZGF0ZVN0cjtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IEVuZERhdGVJbnB1dDtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZjdHMtZXh0LWVuZGRhdGVpbnB1dC5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBGdXNpb25DaGFydHMgPSBmdW5jdGlvbiAoKSB7fTtcblxuRnVzaW9uQ2hhcnRzLnByb3RvdHlwZS5yZWdpc3RlciA9IGZ1bmN0aW9uIChleHQsIGFycikge1xuICB2YXIgZXh0TmFtZSA9IGFyclswXTtcbiAgdmFyIGZuID0gYXJyWzFdO1xuICBjb25zb2xlLmxvZygnQ3VycmVudGx5IGFjdGl2ZSBleHRlbnNpb246ICcgKyBleHROYW1lKTtcbiAgZm4uYmluZCh0aGlzLCA1NjUpKCk7XG59O1xuXG5GdXNpb25DaGFydHMucHJvdG90eXBlLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBjb21wb25lbnROYW1lKSB7XG4gIHZhciB0b29sQm94ID0ge1xuICAgIHg6IDI0LFxuICAgIHk6IDU2LFxuICAgIHdpZHRoOiAxMDAsXG4gICAgaGVpZ2h0OiAyMCxcbiAgICBpbmRleDogNFxuICB9O1xuXG4gIGlmIChjb21wb25lbnRUeXBlID09PSAnYXBpJyAmJiBjb21wb25lbnROYW1lID09PSAndG9vbGJveCcpIHtcbiAgICByZXR1cm4gdG9vbEJveDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuRnVzaW9uQ2hhcnRzLnByb3RvdHlwZS5leHRBUEkgPSBmdW5jdGlvbiAob2JqKSB7XG4gIG9iai5pbml0KGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgYXJnc1RvQXBwbHkgPSBbXTtcbiAgICB2YXIgY2IgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdO1xuXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmd1bWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7XG4gICAgICBpZiAoYXJndW1lbnRzW2ldID09PSAnWC1BeGlzJykge1xuICAgICAgICBhcmdzVG9BcHBseS5wdXNoKDE1Njc3Mik7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSA9PT0gJ1ktQXhpcycpIHtcbiAgICAgICAgYXJnc1RvQXBwbHkucHVzaCgxNTY3NjUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjYi5hcHBseSh0aGlzLCBhcmdzVG9BcHBseSk7XG4gIH0pO1xuXG4gIG9iai5wbGFjZUluQ2FudmFzKCk7XG5cbiAgb2JqLmRyYXcoKTtcblxuICBvYmouZGlzcG9zZSgpO1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBGdXNpb25DaGFydHM7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2xpYi9mdXNpb25jaGFydHMuanNcbiAqKi8iXSwic291cmNlUm9vdCI6IiJ9
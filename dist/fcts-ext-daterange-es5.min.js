!function(t){function e(n){if(a[n])return a[n].exports;var r=a[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=a(2);window.dr=new n,function(a,n){"object"===e(t)&&t.exports?t.exports=a.document?n(a):function(t){if(!t.document)throw new Error("Window with document not present");return n(t,!0)}:a.DateRangeChooser=n(a,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var a=t.FusionCharts;a.register("extension",["private","DateRangeChooser",function(){a.registerComponent("extensions","DateRangeChooser",n({FusionCharts:a}))}])})}).call(e,a(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var n=function(){function t(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,a,n){return a&&t(e.prototype,a),n&&t(e,n),e}}();t.exports=function(t){var e=function(){function e(){a(this,e),this.startDt=0,this.endDt=0,this.startDataset=0,this.endDataset=0,this.toolbox=t.FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.startText={attr:function(){}},this.endText={attr:function(){}}}return n(e,[{key:"dateFormatter",value:function(t,e){t=new Date(t);var a=[t.getUTCDate(),t.getUTCMonth()+1,t.getUTCFullYear()];return a=a.join(e)}},{key:"swapDates",value:function(){var t=this.dateRange.startDate;this.dateRange.startDate=this.dateRange.endDate,this.dateRange.endDate=t}},{key:"syncRange",value:function(){}},{key:"getFormattedDate",value:function(t){return this.chart.getFormattedDate(t)}},{key:"getTimestamp",value:function(t){return this.chart.getTimestamp(t)}},{key:"setConfig",value:function(t){}},{key:"getConfig",value:function(){return{calendarVisible:"false"}}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","chartInstance",function(t,a,n,r,o,i,s,l,h,c,u,d){e.xAxis=t,e.yAxis=a,e.graphics=n,e.chart=r,e.dataset=o,e.plotManager=i,e.markerManager=l,e.canvasConfig=s,e.reactiveModel=h,e.globalReactiveModel=c,e.spaceManagerInstance=u,e.smartLabel=d}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.startDt=e.globalReactiveModel.model["x-axis-visible-range-start"],this.endDt=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"createToolbar",value:function(){var t,e,a,n,r,o,i=this;return i.fromDate={},i.toDate={},r=i.dateFormatter(new Date(this.startDt),"-"),o=i.dateFormatter(new Date(this.endDt),"-"),t=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),n=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),n.setConfig({fill:"#fff",borderThickness:0}),e=new this.toolbox.Label("From:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15","font-family":'"Lucida Grande", sans-serif',fill:"#696969"}}}),a=new this.toolbox.Label("To:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15","font-family":'"Lucida Grande", sans-serif',fill:"#696969"}}}),i.fromDate=new this.toolbox.InputTextBoxSymbol({width:120,height:22},{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{strokeWidth:1,stroke:"#ced5d4",symbolStrokeWidth:0,radius:2,margin:{right:22},btnTextStyle:{"font-family":'"Lucida Grande", sans-serif',fontSize:13},label:r,labelFill:"#696969"}),i.toDate=new this.toolbox.InputTextBoxSymbol({width:120,height:22},{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{strokeWidth:1,stroke:"#ced5d4",symbolStrokeWidth:0,radius:2,btnTextStyle:{"font-family":'"Lucida Grande", sans-serif',fontSize:13},label:o,labelFill:"#696969"}),i.fromDate.attachEventHandlers({click:{fn:i.fromDate.edit},textOnBlur:function(){i.fromDate.blur(),i.startDate=i.fromDate.getText()}}),i.toDate.attachEventHandlers({click:{fn:i.toDate.edit},textOnBlur:function(){i.toDate.blur(),i.endDate=i.toDate.getText()}}),this.SymbolStore.register("textBoxIcon",function(t,e,a,n,r,o,i){var s=t-n/2+o/2,l=t+n/2-o/2,h=e-r/2+i/2,c=e+r/2-i/2;return["M",s,h,"L",l,h,"L",l,c,"L",s,c,"Z"]}),n.addSymbol(e),n.addSymbol(i.fromDate),n.addSymbol(a),n.addSymbol(i.toDate),t.addComponent(n),t}},{key:"getLogicalSpace",value:function(t,e){t/=2;var a,n,r,o=0,i=0;for(n=0,r=this.toolbars.length;n<r;n++)a=this.toolbars[n].getLogicalSpace(t,e),o=Math.max(a.width,o),i+=a.height,this.toolbars[n].width=a.width,this.toolbars[n].height=a.height;return i+=this.padding,{width:o,height:i}}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"ToolBoxExt"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.right},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,a,n,r){var o=this.measurement;return o.x=t,o.y=e,o.width=a,o.height=n,this.parentGroup=r,this}},{key:"draw",value:function(t,e,a,n,r){var o,i,s,l=this.measurement,h=this.toolbars,c=this.globalReactiveModel,u=this;if(t=void 0===t?l.x:t,e=void 0===e?l.y:e,a=void 0===a?l.width:a,n=void 0===n?l.height:n,r=void 0===r?this.parentGroup:r,a&&n)for(i=0,o=h.length;i<o;i++)s=h[i],s.draw(t,e,r);c.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],function(t,e){u.fromDate.blur(u.dateFormatter(new Date(t[1]),"-")),u.toDate.blur(u.dateFormatter(new Date(e[1]),"-"))}),c.onPropsChange(["x-axis-visible-range-start"],function(t){u.fromDate.blur(u.dateFormatter(new Date(t[1]),"-"))}),c.onPropsChange(["x-axis-visible-range-end"],function(t){u.toDate.blur(u.dateFormatter(new Date(t[1]),"-"))})}},{key:"startDate",get:function(){return this.startDt},set:function(t){var e=+new Date(t);e<=this.endDt&&(this.startDt=e,this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startDt)}},{key:"endDate",get:function(){return this.endDt},set:function(t){var e=+new Date(t);e>=this.startDt&&(this.endDt=e,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endDt)}}]),e}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGMzNTQwMGM3ZmUwYTgxN2FhZDA3Iiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1kYXRlcmFuZ2UuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJEYXRlUmFuZ2UiLCJ3aW5kb3ciLCJkciIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwiRGF0ZVJhbmdlQ2hvb3NlciIsInVuZGVmaW5lZCIsIl93aW5kb3ciLCJ3aW5kb3dFeGlzdHMiLCJGQyIsIkZ1c2lvbkNoYXJ0cyIsInJlZ2lzdGVyIiwicmVnaXN0ZXJDb21wb25lbnQiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxkcmVuIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJkZXAiLCJ0aGlzIiwic3RhcnREdCIsImVuZER0Iiwic3RhcnREYXRhc2V0IiwiZW5kRGF0YXNldCIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJzdGFydFRleHQiLCJhdHRyIiwiZW5kVGV4dCIsInZhbHVlIiwiZXBvY2giLCJzZXBhcmF0b3IiLCJEYXRlIiwiZm9ybWF0dGVkRGF0ZSIsImdldFVUQ0RhdGUiLCJnZXRVVENNb250aCIsImdldFVUQ0Z1bGxZZWFyIiwiam9pbiIsInRlbXAiLCJkYXRlUmFuZ2UiLCJzdGFydERhdGUiLCJlbmREYXRlIiwidGltZXN0YW1wIiwiY2hhcnQiLCJnZXRGb3JtYXR0ZWREYXRlIiwiZGF0ZVN0cmluZyIsImdldFRpbWVzdGFtcCIsImNvbmZpZ09iaiIsImNhbGVuZGFyVmlzaWJsZSIsInJlcXVpcmUiLCJ4QXhpcyIsInlBeGlzIiwiZ3JhcGhpY3MiLCJkYXRhc2V0IiwicGxvdE1hbmFnZXIiLCJjYW52YXNDb25maWciLCJtYXJrZXJNYW5hZ2VyIiwicmVhY3RpdmVNb2RlbCIsImdsb2JhbFJlYWN0aXZlTW9kZWwiLCJzcGFjZU1hbmFnZXJJbnN0YW5jZSIsInNtYXJ0TGFiZWwiLCJtb2RlbCIsInRvb2xiYXJzIiwibWVhc3VyZW1lbnQiLCJwdXNoIiwiY3JlYXRlVG9vbGJhciIsInRvb2xiYXIiLCJmcm9tRGF0ZUxhYmVsIiwidG9EYXRlTGFiZWwiLCJncm91cCIsImZyb21Gb3JtYXR0ZWREYXRlIiwidG9Gb3JtYXR0ZWREYXRlIiwic2VsZiIsImZyb21EYXRlIiwidG9EYXRlIiwiZGF0ZUZvcm1hdHRlciIsInBhcGVyIiwiY2hhcnRDb250YWluZXIiLCJjb250YWluZXIiLCJzZXRDb25maWciLCJmaWxsIiwiYm9yZGVyVGhpY2tuZXNzIiwiTGFiZWwiLCJ0ZXh0Iiwic3R5bGUiLCJmb250LXNpemUiLCJmb250LWZhbWlseSIsIklucHV0VGV4dEJveFN5bWJvbCIsIndpZHRoIiwiaGVpZ2h0Iiwic3Ryb2tlV2lkdGgiLCJzdHJva2UiLCJzeW1ib2xTdHJva2VXaWR0aCIsInJhZGl1cyIsIm1hcmdpbiIsInJpZ2h0IiwiYnRuVGV4dFN0eWxlIiwiZm9udFNpemUiLCJsYWJlbCIsImxhYmVsRmlsbCIsImF0dGFjaEV2ZW50SGFuZGxlcnMiLCJjbGljayIsImZuIiwiZWRpdCIsInRleHRPbkJsdXIiLCJibHVyIiwiZ2V0VGV4dCIsIngiLCJ5IiwicmFkIiwidyIsImgiLCJwYWRYIiwicGFkWSIsIngxIiwieDIiLCJ5MSIsInkyIiwiYWRkU3ltYm9sIiwiYWRkQ29tcG9uZW50IiwiYXZhaWxhYmxlV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJsb2dpY2FsU3BhY2UiLCJsbiIsImdldExvZ2ljYWxTcGFjZSIsIk1hdGgiLCJtYXgiLCJwYWRkaW5nIiwiYWRkIiwibmFtZSIsInJlZiIsInByaW9yaXR5IiwibGF5b3V0IiwiaW5saW5lIiwib3JpZW50YXRpb24iLCJ0eXBlIiwiaG9yaXpvbnRhbCIsInBvc2l0aW9uIiwidG9wIiwiYWxpZ25tZW50IiwiZGltZW5zaW9ucyIsInBhcmVudCIsImdldFBhcmVudENvbXBvbmVudEdyb3VwIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJtZXMiLCJwYXJlbnRHcm91cCIsImRyYXciLCJvblByb3BzQ2hhbmdlIiwic3RhcnQiLCJlbmQiLCJnZXQiLCJzZXQiLCJzdGFydFRpbWVzdGFtcCIsImVuZFRpbWVzdGFtcCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFB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ZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihtb2R1bGUpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX3R5cGVvZiA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiB0eXBlb2YgU3ltYm9sLml0ZXJhdG9yID09PSBcInN5bWJvbFwiID8gZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gdHlwZW9mIG9iajsgfSA6IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiAmJiB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgb2JqLmNvbnN0cnVjdG9yID09PSBTeW1ib2wgJiYgb2JqICE9PSBTeW1ib2wucHJvdG90eXBlID8gXCJzeW1ib2xcIiA6IHR5cGVvZiBvYmo7IH07XG5cdFxuXHR2YXIgRGF0ZVJhbmdlID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblx0XG5cdHdpbmRvdy5kciA9IG5ldyBEYXRlUmFuZ2UoKTtcblx0XG5cdDsoZnVuY3Rpb24gKGVudiwgZmFjdG9yeSkge1xuXHQgIGlmICgoIGZhbHNlID8gJ3VuZGVmaW5lZCcgOiBfdHlwZW9mKG1vZHVsZSkpID09PSAnb2JqZWN0JyAmJiBtb2R1bGUuZXhwb3J0cykge1xuXHQgICAgbW9kdWxlLmV4cG9ydHMgPSBlbnYuZG9jdW1lbnQgPyBmYWN0b3J5KGVudikgOiBmdW5jdGlvbiAod2luKSB7XG5cdCAgICAgIGlmICghd2luLmRvY3VtZW50KSB7XG5cdCAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdXaW5kb3cgd2l0aCBkb2N1bWVudCBub3QgcHJlc2VudCcpO1xuXHQgICAgICB9XG5cdCAgICAgIHJldHVybiBmYWN0b3J5KHdpbiwgdHJ1ZSk7XG5cdCAgICB9O1xuXHQgIH0gZWxzZSB7XG5cdCAgICBlbnYuRGF0ZVJhbmdlQ2hvb3NlciA9IGZhY3RvcnkoZW52LCB0cnVlKTtcblx0ICB9XG5cdH0pKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnID8gd2luZG93IDogdW5kZWZpbmVkLCBmdW5jdGlvbiAoX3dpbmRvdywgd2luZG93RXhpc3RzKSB7XG5cdCAgdmFyIEZDID0gX3dpbmRvdy5GdXNpb25DaGFydHM7XG5cdCAgRkMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsncHJpdmF0ZScsICdEYXRlUmFuZ2VDaG9vc2VyJywgZnVuY3Rpb24gKCkge1xuXHQgICAgRkMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnRGF0ZVJhbmdlQ2hvb3NlcicsIERhdGVSYW5nZSh7IEZ1c2lvbkNoYXJ0czogRkMgfSkpO1xuXHQgIH1dKTtcblx0fSk7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpKG1vZHVsZSkpKVxuXG4vKioqLyB9LFxuLyogMSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0bW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihtb2R1bGUpIHtcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdFx0bW9kdWxlLmRlcHJlY2F0ZSA9IGZ1bmN0aW9uKCkge307XG5cdFx0XHRtb2R1bGUucGF0aHMgPSBbXTtcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdFx0bW9kdWxlLmNoaWxkcmVuID0gW107XG5cdFx0XHRtb2R1bGUud2VicGFja1BvbHlmaWxsID0gMTtcblx0XHR9XG5cdFx0cmV0dXJuIG1vZHVsZTtcblx0fVxuXG5cbi8qKiovIH0sXG4vKiAyICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQgKiBDbGFzcyByZXByZXNlbnRpbmcgdGhlIERhdGVSYW5nZS5cblx0ICovXG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRlcCkge1xuXHQgIHZhciBEYXRlUmFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgICBmdW5jdGlvbiBEYXRlUmFuZ2UoKSB7XG5cdCAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXRlUmFuZ2UpO1xuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAqL1xuXHRcblx0ICAgICAgdGhpcy5zdGFydER0ID0gMDtcblx0ICAgICAgdGhpcy5lbmREdCA9IDA7XG5cdCAgICAgIHRoaXMuc3RhcnREYXRhc2V0ID0gMDtcblx0ICAgICAgdGhpcy5lbmREYXRhc2V0ID0gMDtcblx0ICAgICAgdGhpcy50b29sYm94ID0gZGVwLkZ1c2lvbkNoYXJ0cy5nZXRDb21wb25lbnQoJ2FwaScsICd0b29sYm94Jyk7XG5cdCAgICAgIHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIgPSB0aGlzLnRvb2xib3guSG9yaXpvbnRhbFRvb2xiYXI7XG5cdCAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG5cdCAgICAgIHRoaXMuU3ltYm9sU3RvcmUgPSB0aGlzLnRvb2xib3guU3ltYm9sU3RvcmU7XG5cdCAgICAgIHRoaXMuc3RhcnRUZXh0ID0ge1xuXHQgICAgICAgIGF0dHI6IGZ1bmN0aW9uIGF0dHIoKSB7fVxuXHQgICAgICB9O1xuXHQgICAgICB0aGlzLmVuZFRleHQgPSB7XG5cdCAgICAgICAgYXR0cjogZnVuY3Rpb24gYXR0cigpIHt9XG5cdCAgICAgIH07XG5cdCAgICB9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzLlxuXHQgICAgICogQHR5cGUge0RhdGVSYW5nZS5yYW5nZX1cblx0ICAgICAqL1xuXHRcblx0XG5cdCAgICBfY3JlYXRlQ2xhc3MoRGF0ZVJhbmdlLCBbe1xuXHQgICAgICBrZXk6ICdkYXRlRm9ybWF0dGVyJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRhdGVGb3JtYXR0ZXIoZXBvY2gsIHNlcGFyYXRvcikge1xuXHQgICAgICAgIGVwb2NoID0gbmV3IERhdGUoZXBvY2gpO1xuXHQgICAgICAgIHZhciBmb3JtYXR0ZWREYXRlID0gW2Vwb2NoLmdldFVUQ0RhdGUoKSwgZXBvY2guZ2V0VVRDTW9udGgoKSArIDEsIGVwb2NoLmdldFVUQ0Z1bGxZZWFyKCldO1xuXHQgICAgICAgIGZvcm1hdHRlZERhdGUgPSBmb3JtYXR0ZWREYXRlLmpvaW4oc2VwYXJhdG9yKTtcblx0ICAgICAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzd2FwRGF0ZXMnLFxuXHRcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBTd2FwcyB0aGUgc3RhcnQgZGF0ZSBhbmQgdGhlIGVuZCBkYXRlIG9mIHRoZSBkYXRlIHJhbmdlXG5cdCAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAqL1xuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc3dhcERhdGVzKCkge1xuXHQgICAgICAgIHZhciB0ZW1wID0gdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlO1xuXHQgICAgICAgIHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZSA9IHRoaXMuZGF0ZVJhbmdlLmVuZERhdGU7XG5cdCAgICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHRlbXA7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBTeW5jcyB0aGUgZGF0ZXJhbmdlIHNob3duIGJ5IHRoZSBGdXNpb25DaGFydHMgdGltZSBzZXJpZXMgY2hhcnQgYW5kIHRoZSBEYXRlIFJhbmdlIENob29zZXJcblx0ICAgICAgICogQHByaXZhdGVcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzeW5jUmFuZ2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc3luY1JhbmdlKCkge31cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBSZXR1cm5zIGEgZm9ybWF0dGVkIGRhdGUgc3RyaW5nIGZyb20gRnVzaW9uQ2hhcnRzIHdoZW4gZ2l2ZW4gYSBVTklYIHRpbWVzdGFtcFxuXHQgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRpbWVzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgY29udmVydGVkIHRvIGEgZGF0ZSBzdHJpbmdcblx0ICAgICAgICogQHJldHVybiB7c3RyaW5nfSAtIEEgZGF0ZSBzdHJpbmcgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gdGltZXN0YW1wXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2V0Rm9ybWF0dGVkRGF0ZScsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRGb3JtYXR0ZWREYXRlKHRpbWVzdGFtcCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldEZvcm1hdHRlZERhdGUodGltZXN0YW1wKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIFJldHVybnMgYSBVTklYIHRpbWVzdGFtcCBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgZm9ybWF0dGVkIGRhdGUgc3RyaW5nXG5cdCAgICAgICAqIEBwYXJhbSAge3N0cmluZ30gZGF0ZVN0cmluZyAtIEEgZGF0ZSBzdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGEgVU5JWCB0aW1lc3RhbXBcblx0ICAgICAgICogQHJldHVybiB7bnVtYmVyfSBBIFVOSVggdGltZXN0YW1wIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIGRhdGUgc3RyaW5nXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2V0VGltZXN0YW1wJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbWVzdGFtcChkYXRlU3RyaW5nKSB7XG5cdCAgICAgICAgcmV0dXJuIHRoaXMuY2hhcnQuZ2V0VGltZXN0YW1wKGRhdGVTdHJpbmcpO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogU2V0cyB0aGUgY29uZmlndXJhYmxlIG9wdGlvbnMgb2YgdGhlIGV4dGVuc2lvbiAoZS5nLiBjb3NtZXRpY3MpXG5cdCAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdPYmogVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaW91cyBleHRlbnNpb24gb3B0aW9uc1xuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ3NldENvbmZpZycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDb25maWcoY29uZmlnT2JqKSB7fVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEdldHMgdGhlIGNvbmZpZ3VyYWJsZSBvcHRpb25zIG9mIHRoZSBleHRlbnNpb24gKGUuZy4gY29zbWV0aWNzKVxuXHQgICAgICAgKiBAcmV0dXJuIHtvYmplY3R9IGNvbmZpZ09iaiBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyB2YXJpb3VzIGV4dGVuc2lvbiBvcHRpb25zXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZ2V0Q29uZmlnJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbmZpZygpIHtcblx0ICAgICAgICByZXR1cm4ge1xuXHQgICAgICAgICAgY2FsZW5kYXJWaXNpYmxlOiAnZmFsc2UnXG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIEZ1c2lvbmNoYXJ0cyBsaWZlIGN5Y2xlIG1ldGhvZCBmb3IgZXh0ZW5zaW9uXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnaW5pdCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KHJlcXVpcmUpIHtcblx0ICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xuXHQgICAgICAgIHJlcXVpcmUoWyd4QXhpcycsICd5QXhpcycsICdncmFwaGljcycsICdjaGFydCcsICdkYXRhc2V0JywgJ1Bsb3RNYW5hZ2VyJywgJ2NhbnZhc0NvbmZpZycsICdNYXJrZXJNYW5hZ2VyJywgJ3JlYWN0aXZlTW9kZWwnLCAnZ2xvYmFsUmVhY3RpdmVNb2RlbCcsICdzcGFjZU1hbmFnZXJJbnN0YW5jZScsICdzbWFydExhYmVsJywgJ2NoYXJ0SW5zdGFuY2UnLCBmdW5jdGlvbiAoeEF4aXMsIHlBeGlzLCBncmFwaGljcywgY2hhcnQsIGRhdGFzZXQsIHBsb3RNYW5hZ2VyLCBjYW52YXNDb25maWcsIG1hcmtlck1hbmFnZXIsIHJlYWN0aXZlTW9kZWwsIGdsb2JhbFJlYWN0aXZlTW9kZWwsIHNwYWNlTWFuYWdlckluc3RhbmNlLCBzbWFydExhYmVsKSB7XG5cdCAgICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuXHQgICAgICAgICAgaW5zdGFuY2UueUF4aXMgPSB5QXhpcztcblx0ICAgICAgICAgIGluc3RhbmNlLmdyYXBoaWNzID0gZ3JhcGhpY3M7XG5cdCAgICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuXHQgICAgICAgICAgaW5zdGFuY2UuZGF0YXNldCA9IGRhdGFzZXQ7XG5cdCAgICAgICAgICBpbnN0YW5jZS5wbG90TWFuYWdlciA9IHBsb3RNYW5hZ2VyO1xuXHQgICAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG5cdCAgICAgICAgICBpbnN0YW5jZS5jYW52YXNDb25maWcgPSBjYW52YXNDb25maWc7XG5cdCAgICAgICAgICBpbnN0YW5jZS5yZWFjdGl2ZU1vZGVsID0gcmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuXHQgICAgICAgICAgaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2UgPSBzcGFjZU1hbmFnZXJJbnN0YW5jZTtcblx0ICAgICAgICAgIGluc3RhbmNlLnNtYXJ0TGFiZWwgPSBzbWFydExhYmVsO1xuXHQgICAgICAgIH1dKTtcblx0ICAgICAgICB0aGlzLnNwYWNlTWFuYWdlckluc3RhbmNlID0gaW5zdGFuY2Uuc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICB0aGlzLnN0YXJ0RHQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddO1xuXHQgICAgICAgIHRoaXMuZW5kRHQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXTtcblx0ICAgICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1zdGFydCddO1xuXHQgICAgICAgIHRoaXMuZW5kRGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1lbmQnXTtcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzID0gW107XG5cdCAgICAgICAgdGhpcy5tZWFzdXJlbWVudCA9IHt9O1xuXHQgICAgICAgIHRoaXMudG9vbGJhcnMucHVzaCh0aGlzLmNyZWF0ZVRvb2xiYXIoKSk7XG5cdCAgICAgICAgcmV0dXJuIHRoaXM7XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnY3JlYXRlVG9vbGJhcicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBjcmVhdGVUb29sYmFyKCkge1xuXHQgICAgICAgIHZhciB0b29sYmFyLFxuXHQgICAgICAgICAgICBzZWxmID0gdGhpcyxcblx0ICAgICAgICAgICAgZnJvbURhdGVMYWJlbCxcblx0ICAgICAgICAgICAgdG9EYXRlTGFiZWwsXG5cdCAgICAgICAgICAgIGdyb3VwLFxuXHQgICAgICAgICAgICBmcm9tRm9ybWF0dGVkRGF0ZSxcblx0ICAgICAgICAgICAgdG9Gb3JtYXR0ZWREYXRlO1xuXHRcblx0ICAgICAgICBzZWxmLmZyb21EYXRlID0ge307XG5cdCAgICAgICAgc2VsZi50b0RhdGUgPSB7fTtcblx0XG5cdCAgICAgICAgZnJvbUZvcm1hdHRlZERhdGUgPSBzZWxmLmRhdGVGb3JtYXR0ZXIobmV3IERhdGUodGhpcy5zdGFydER0KSwgJy0nKTtcblx0XG5cdCAgICAgICAgdG9Gb3JtYXR0ZWREYXRlID0gc2VsZi5kYXRlRm9ybWF0dGVyKG5ldyBEYXRlKHRoaXMuZW5kRHQpLCAnLScpO1xuXHQgICAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHRvb2xiYXIuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBncm91cCA9IG5ldyB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXAoe1xuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBncm91cC5zZXRDb25maWcoe1xuXHQgICAgICAgICAgZmlsbDogJyNmZmYnLFxuXHQgICAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGZyb21EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdGcm9tOicsIHtcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGV4dDoge1xuXHQgICAgICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgICAgICdmb250LXNpemUnOiAnMTUnLFxuXHQgICAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG5cdCAgICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OSdcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0b0RhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1RvOicsIHtcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgdGV4dDoge1xuXHQgICAgICAgICAgICBzdHlsZToge1xuXHQgICAgICAgICAgICAgICdmb250LXNpemUnOiAnMTUnLFxuXHQgICAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG5cdCAgICAgICAgICAgICAgJ2ZpbGwnOiAnIzY5Njk2OSdcblx0ICAgICAgICAgICAgfVxuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBzZWxmLmZyb21EYXRlID0gbmV3IHRoaXMudG9vbGJveC5JbnB1dFRleHRCb3hTeW1ib2woe1xuXHQgICAgICAgICAgd2lkdGg6IDEyMCxcblx0ICAgICAgICAgIGhlaWdodDogMjJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcblx0ICAgICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuXHQgICAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuXHQgICAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgc3Ryb2tlV2lkdGg6IDEsXG5cdCAgICAgICAgICBzdHJva2U6ICcjY2VkNWQ0Jyxcblx0ICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAwLFxuXHQgICAgICAgICAgcmFkaXVzOiAyLFxuXHQgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgIHJpZ2h0OiAyMlxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuXHQgICAgICAgICAgICBmb250U2l6ZTogMTNcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYWJlbDogZnJvbUZvcm1hdHRlZERhdGUsXG5cdCAgICAgICAgICBsYWJlbEZpbGw6ICcjNjk2OTY5J1xuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICAvLyBzZWxmLmZyb21EYXRlLnNldFN0YXRlQ29uZmlnKHtcblx0ICAgICAgICAvLyAgIHByZXNzZWQ6IHtcblx0ICAgICAgICAvLyAgICAgY29uZmlnOiB7XG5cdCAgICAgICAgLy8gICAgICAgcHJlc3NlZDoge1xuXHQgICAgICAgIC8vICAgICAgICAgZmlsbDogJyNmZjAwMDAnLFxuXHQgICAgICAgIC8vICAgICAgICAgJ3N0cm9rZS13aWR0aCc6IDEsXG5cdCAgICAgICAgLy8gICAgICAgICBzdHJva2U6ICcjMDBmZjAwJyxcblx0ICAgICAgICAvLyAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG5cdCAgICAgICAgLy8gICAgICAgfVxuXHQgICAgICAgIC8vICAgICB9LFxuXHQgICAgICAgIC8vICAgICBmaWxsOiBbJyMwMDAwMDAnLCAnIzAwMDAwMCcsICcjMDAwMDAwJywgJyMwMDAwMDAnLCB0cnVlXSxcblx0ICAgICAgICAvLyAgICAgJ3N0cm9rZSc6ICcjMDAwMDAwJ1xuXHQgICAgICAgIC8vICAgfVxuXHQgICAgICAgIC8vIH0pO1xuXHRcblx0ICAgICAgICBzZWxmLnRvRGF0ZSA9IG5ldyB0aGlzLnRvb2xib3guSW5wdXRUZXh0Qm94U3ltYm9sKHtcblx0ICAgICAgICAgIHdpZHRoOiAxMjAsXG5cdCAgICAgICAgICBoZWlnaHQ6IDIyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLFxuXHQgICAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogMCxcblx0ICAgICAgICAgIHJhZGl1czogMixcblx0ICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuXHQgICAgICAgICAgICBmb250U2l6ZTogMTNcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYWJlbDogdG9Gb3JtYXR0ZWREYXRlLFxuXHQgICAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OSdcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgc2VsZi5mcm9tRGF0ZS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcblx0ICAgICAgICAgIGNsaWNrOiB7XG5cdCAgICAgICAgICAgIGZuOiBzZWxmLmZyb21EYXRlLmVkaXRcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICB0ZXh0T25CbHVyOiBmdW5jdGlvbiB0ZXh0T25CbHVyKCkge1xuXHQgICAgICAgICAgICBzZWxmLmZyb21EYXRlLmJsdXIoKTtcblx0ICAgICAgICAgICAgc2VsZi5zdGFydERhdGUgPSBzZWxmLmZyb21EYXRlLmdldFRleHQoKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgc2VsZi50b0RhdGUuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICBjbGljazoge1xuXHQgICAgICAgICAgICBmbjogc2VsZi50b0RhdGUuZWRpdFxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHRleHRPbkJsdXI6IGZ1bmN0aW9uIHRleHRPbkJsdXIoKSB7XG5cdCAgICAgICAgICAgIHNlbGYudG9EYXRlLmJsdXIoKTtcblx0ICAgICAgICAgICAgc2VsZi5lbmREYXRlID0gc2VsZi50b0RhdGUuZ2V0VGV4dCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0aGlzLlN5bWJvbFN0b3JlLnJlZ2lzdGVyKCd0ZXh0Qm94SWNvbicsIGZ1bmN0aW9uICh4LCB5LCByYWQsIHcsIGgsIHBhZFgsIHBhZFkpIHtcblx0ICAgICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuXHQgICAgICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG5cdCAgICAgICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcblx0ICAgICAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXHRcblx0ICAgICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGdyb3VwLmFkZFN5bWJvbChmcm9tRGF0ZUxhYmVsKTtcblx0ICAgICAgICBncm91cC5hZGRTeW1ib2woc2VsZi5mcm9tRGF0ZSk7XG5cdCAgICAgICAgZ3JvdXAuYWRkU3ltYm9sKHRvRGF0ZUxhYmVsKTtcblx0ICAgICAgICBncm91cC5hZGRTeW1ib2woc2VsZi50b0RhdGUpO1xuXHQgICAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcblx0ICAgICAgICByZXR1cm4gdG9vbGJhcjtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZXRMb2dpY2FsU3BhY2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcblx0ICAgICAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuXHQgICAgICAgIHZhciBsb2dpY2FsU3BhY2UsXG5cdCAgICAgICAgICAgIHdpZHRoID0gMCxcblx0ICAgICAgICAgICAgaGVpZ2h0ID0gMCxcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgbG47XG5cdFxuXHQgICAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcblx0ICAgICAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG5cdCAgICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG5cdCAgICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdwbGFjZUluQ2FudmFzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7XG5cdCAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgICBfc2VsZi5wYWRkaW5nID0gNTtcblx0ICAgICAgICBfc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcblx0ICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnVG9vbEJveEV4dCc7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYob2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBzZWxmOiBmdW5jdGlvbiBzZWxmKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3NlbGY7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uIHByaW9yaXR5KCkge1xuXHQgICAgICAgICAgICByZXR1cm4gMjtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgb3JpZW50YXRpb246IFt7XG5cdCAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBwb3NpdGlvbjogW3tcblx0ICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG5cdCAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG5cdCAgICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnJpZ2h0O1xuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG5cdCAgICAgICAgICAgICAgICAgIHJldHVybiBfc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG5cdCAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH1dKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzZXREcmF3aW5nQ29uZmlndXJhdGlvbicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREcmF3aW5nQ29uZmlndXJhdGlvbih4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuXHQgICAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgICAgIG1lcy54ID0geDtcblx0ICAgICAgICBtZXMueSA9IHk7XG5cdCAgICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICAgICAgbWVzLmhlaWdodCA9IGhlaWdodDtcblx0XG5cdCAgICAgICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkcmF3Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuXHQgICAgICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG5cdCAgICAgICAgICAgIGxuLFxuXHQgICAgICAgICAgICBpLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBtb2RlbCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCxcblx0ICAgICAgICAgICAgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuXHQgICAgICAgIHkgPSB5ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC55IDogeTtcblx0ICAgICAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuXHQgICAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuXHQgICAgICAgIGdyb3VwID0gZ3JvdXAgPT09IHVuZGVmaW5lZCA/IHRoaXMucGFyZW50R3JvdXAgOiBncm91cDtcblx0ICAgICAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG5cdCAgICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcblx0ICAgICAgICAgICAgdG9vbGJhciA9IHRvb2xiYXJzW2ldO1xuXHQgICAgICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSwgZ3JvdXApO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH1cblx0XG5cdCAgICAgICAgbW9kZWwub25Qcm9wc0NoYW5nZShbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0JywgJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLCBmdW5jdGlvbiAoc3RhcnQsIGVuZCkge1xuXHQgICAgICAgICAgLy8gc2VsZi5mcm9tRGF0ZS5ibHVyKG5ldyBEYXRlKHN0YXJ0WzFdKS50b0xvY2FsZURhdGVTdHJpbmcoKSk7XG5cdCAgICAgICAgICAvLyBzZWxmLnRvRGF0ZS5ibHVyKG5ldyBEYXRlKGVuZFsxXSkudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xuXHQgICAgICAgICAgc2VsZi5mcm9tRGF0ZS5ibHVyKHNlbGYuZGF0ZUZvcm1hdHRlcihuZXcgRGF0ZShzdGFydFsxXSksICctJykpO1xuXHQgICAgICAgICAgc2VsZi50b0RhdGUuYmx1cihzZWxmLmRhdGVGb3JtYXR0ZXIobmV3IERhdGUoZW5kWzFdKSwgJy0nKSk7XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIG1vZGVsLm9uUHJvcHNDaGFuZ2UoWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddLCBmdW5jdGlvbiAoc3RhcnQpIHtcblx0ICAgICAgICAgIHNlbGYuZnJvbURhdGUuYmx1cihzZWxmLmRhdGVGb3JtYXR0ZXIobmV3IERhdGUoc3RhcnRbMV0pLCAnLScpKTtcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgbW9kZWwub25Qcm9wc0NoYW5nZShbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLWVuZCddLCBmdW5jdGlvbiAoZW5kKSB7XG5cdCAgICAgICAgICBzZWxmLnRvRGF0ZS5ibHVyKHNlbGYuZGF0ZUZvcm1hdHRlcihuZXcgRGF0ZShlbmRbMV0pLCAnLScpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzdGFydERhdGUnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5zdGFydER0O1xuXHQgICAgICB9LFxuXHQgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChzdGFydER0KSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0VGltZXN0YW1wID0gK25ldyBEYXRlKHN0YXJ0RHQpO1xuXHQgICAgICAgIGlmIChzdGFydFRpbWVzdGFtcCA8PSB0aGlzLmVuZER0KSB7XG5cdCAgICAgICAgICB0aGlzLnN0YXJ0RHQgPSBzdGFydFRpbWVzdGFtcDtcblx0ICAgICAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnREdDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZW5kRGF0ZScsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmVuZER0O1xuXHQgICAgICB9LFxuXHQgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChlbmREdCkge1xuXHQgICAgICAgIHZhciBlbmRUaW1lc3RhbXAgPSArbmV3IERhdGUoZW5kRHQpO1xuXHQgICAgICAgIGlmIChlbmRUaW1lc3RhbXAgPj0gdGhpcy5zdGFydER0KSB7XG5cdCAgICAgICAgICB0aGlzLmVuZER0ID0gZW5kVGltZXN0YW1wO1xuXHQgICAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kRHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIERhdGVSYW5nZTtcblx0ICB9KCk7XG5cdFxuXHQgIHJldHVybiBEYXRlUmFuZ2U7XG5cdH07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBmY3RzLWV4dC1kYXRlcmFuZ2UtZXM1Lm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIGMzNTQwMGM3ZmUwYTgxN2FhZDA3IiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgRGF0ZVJhbmdlID0gcmVxdWlyZSgnLi9mY3RzLWV4dC1kYXRlcmFuZ2UnKTtcblxud2luZG93LmRyID0gbmV3IERhdGVSYW5nZSgpO1xuXG47KGZ1bmN0aW9uIChlbnYsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBlbnYuZG9jdW1lbnRcbiAgICAgICA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcbiAgICAgICAgIGlmICghd2luLmRvY3VtZW50KSB7XG4gICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2luZG93IHdpdGggZG9jdW1lbnQgbm90IHByZXNlbnQnKTtcbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBmYWN0b3J5KHdpbiwgdHJ1ZSk7XG4gICAgICAgfTtcbiAgfSBlbHNlIHtcbiAgICBlbnYuRGF0ZVJhbmdlQ2hvb3NlciA9IGZhY3RvcnkoZW52LCB0cnVlKTtcbiAgfVxufSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoX3dpbmRvdywgd2luZG93RXhpc3RzKSB7XG4gIHZhciBGQyA9IF93aW5kb3cuRnVzaW9uQ2hhcnRzO1xuICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ0RhdGVSYW5nZUNob29zZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgRkMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnRGF0ZVJhbmdlQ2hvb3NlcicsIERhdGVSYW5nZSh7RnVzaW9uQ2hhcnRzOiBGQ30pKTtcbiAgfV0pO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgdGhlIERhdGVSYW5nZS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcbiAgY2xhc3MgRGF0ZVJhbmdlIHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKi9cblxuICAgICAgdGhpcy5zdGFydER0ID0gMDtcbiAgICAgIHRoaXMuZW5kRHQgPSAwO1xuICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gMDtcbiAgICAgIHRoaXMudG9vbGJveCA9IGRlcC5GdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuICAgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcbiAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG4gICAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuICAgICAgdGhpcy5zdGFydFRleHQgPSB7XG4gICAgICAgIGF0dHI6IGZ1bmN0aW9uICgpIHt9XG4gICAgICB9O1xuICAgICAgdGhpcy5lbmRUZXh0ID0ge1xuICAgICAgICBhdHRyOiBmdW5jdGlvbiAoKSB7fVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzLlxuICAgICAqIEB0eXBlIHtEYXRlUmFuZ2UucmFuZ2V9XG4gICAgICovXG4gICAgZ2V0IHN0YXJ0RGF0ZSAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGFydER0O1xuICAgIH1cblxuICAgIHNldCBzdGFydERhdGUgKHN0YXJ0RHQpIHtcbiAgICAgIGxldCBzdGFydFRpbWVzdGFtcCA9ICtuZXcgRGF0ZShzdGFydER0KTtcbiAgICAgIGlmIChzdGFydFRpbWVzdGFtcCA8PSB0aGlzLmVuZER0KSB7XG4gICAgICAgIHRoaXMuc3RhcnREdCA9IHN0YXJ0VGltZXN0YW1wO1xuICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gPSB0aGlzLnN0YXJ0RHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZGF0ZUZvcm1hdHRlciAoZXBvY2gsIHNlcGFyYXRvcikge1xuICAgICAgZXBvY2ggPSBuZXcgRGF0ZShlcG9jaCk7XG4gICAgICB2YXIgZm9ybWF0dGVkRGF0ZSA9IFtlcG9jaC5nZXRVVENEYXRlKCksIChlcG9jaC5nZXRVVENNb250aCgpICsgMSksIGVwb2NoLmdldFVUQ0Z1bGxZZWFyKCldO1xuICAgICAgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdHRlZERhdGUuam9pbihzZXBhcmF0b3IpO1xuICAgICAgcmV0dXJuIGZvcm1hdHRlZERhdGU7XG4gICAgfVxuXG4gICAgZ2V0IGVuZERhdGUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZW5kRHQ7XG4gICAgfVxuXG4gICAgc2V0IGVuZERhdGUgKGVuZER0KSB7XG4gICAgICBsZXQgZW5kVGltZXN0YW1wID0gK25ldyBEYXRlKGVuZER0KTtcbiAgICAgIGlmIChlbmRUaW1lc3RhbXAgPj0gdGhpcy5zdGFydER0KSB7XG4gICAgICAgIHRoaXMuZW5kRHQgPSBlbmRUaW1lc3RhbXA7XG4gICAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10gPSB0aGlzLmVuZER0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN3YXBzIHRoZSBzdGFydCBkYXRlIGFuZCB0aGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2VcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN3YXBEYXRlcyAoKSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcbiAgICAgIHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZSA9IHRoaXMuZGF0ZVJhbmdlLmVuZERhdGU7XG4gICAgICB0aGlzLmRhdGVSYW5nZS5lbmREYXRlID0gdGVtcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTeW5jcyB0aGUgZGF0ZXJhbmdlIHNob3duIGJ5IHRoZSBGdXNpb25DaGFydHMgdGltZSBzZXJpZXMgY2hhcnQgYW5kIHRoZSBEYXRlIFJhbmdlIENob29zZXJcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN5bmNSYW5nZSAoKSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgVU5JWCB0aW1lc3RhbXBcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRpbWVzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgY29udmVydGVkIHRvIGEgZGF0ZSBzdHJpbmdcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gQSBkYXRlIHN0cmluZyB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiB0aW1lc3RhbXBcbiAgICAgKi9cbiAgICBnZXRGb3JtYXR0ZWREYXRlICh0aW1lc3RhbXApIHtcbiAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldEZvcm1hdHRlZERhdGUodGltZXN0YW1wKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgVU5JWCB0aW1lc3RhbXAgZnJvbSBGdXNpb25DaGFydHMgd2hlbiBnaXZlbiBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZ1xuICAgICAqIEBwYXJhbSAge3N0cmluZ30gZGF0ZVN0cmluZyAtIEEgZGF0ZSBzdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGEgVU5JWCB0aW1lc3RhbXBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEEgVU5JWCB0aW1lc3RhbXAgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gZGF0ZSBzdHJpbmdcbiAgICAgKi9cbiAgICBnZXRUaW1lc3RhbXAgKGRhdGVTdHJpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldFRpbWVzdGFtcChkYXRlU3RyaW5nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb25maWd1cmFibGUgb3B0aW9ucyBvZiB0aGUgZXh0ZW5zaW9uIChlLmcuIGNvc21ldGljcylcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcbiAgICAgKi9cbiAgICBzZXRDb25maWcgKGNvbmZpZ09iaikge31cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNvbmZpZ3VyYWJsZSBvcHRpb25zIG9mIHRoZSBleHRlbnNpb24gKGUuZy4gY29zbWV0aWNzKVxuICAgICAqIEByZXR1cm4ge29iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcbiAgICAgKi9cbiAgICBnZXRDb25maWcgKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2FsZW5kYXJWaXNpYmxlOiAnZmFsc2UnXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1c2lvbmNoYXJ0cyBsaWZlIGN5Y2xlIG1ldGhvZCBmb3IgZXh0ZW5zaW9uXG4gICAgICovXG4gICAgaW5pdCAocmVxdWlyZSkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHJlcXVpcmUoW1xuICAgICAgICAneEF4aXMnLFxuICAgICAgICAneUF4aXMnLFxuICAgICAgICAnZ3JhcGhpY3MnLFxuICAgICAgICAnY2hhcnQnLFxuICAgICAgICAnZGF0YXNldCcsXG4gICAgICAgICdQbG90TWFuYWdlcicsXG4gICAgICAgICdjYW52YXNDb25maWcnLFxuICAgICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAgICdyZWFjdGl2ZU1vZGVsJyxcbiAgICAgICAgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLFxuICAgICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgICAnc21hcnRMYWJlbCcsXG4gICAgICAgICdjaGFydEluc3RhbmNlJyxcbiAgICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgICB4QXhpcyxcbiAgICAgICAgICAgICAgeUF4aXMsXG4gICAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgICBjaGFydCxcbiAgICAgICAgICAgICAgZGF0YXNldCxcbiAgICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICAgIGNhbnZhc0NvbmZpZyxcbiAgICAgICAgICAgICAgbWFya2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgZ2xvYmFsUmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgc3BhY2VNYW5hZ2VySW5zdGFuY2UsXG4gICAgICAgICAgICAgIHNtYXJ0TGFiZWwpIHtcbiAgICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcbiAgICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcbiAgICAgIHRoaXMuc3RhcnREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgICB0aGlzLmVuZER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1zdGFydCddO1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuICAgICAgdGhpcy5tZWFzdXJlbWVudCA9IHt9O1xuICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBjcmVhdGVUb29sYmFyICgpIHtcbiAgICAgIHZhciB0b29sYmFyLFxuICAgICAgICBzZWxmID0gdGhpcyxcbiAgICAgICAgZnJvbURhdGVMYWJlbCxcbiAgICAgICAgdG9EYXRlTGFiZWwsXG4gICAgICAgIGdyb3VwLFxuICAgICAgICBmcm9tRm9ybWF0dGVkRGF0ZSxcbiAgICAgICAgdG9Gb3JtYXR0ZWREYXRlO1xuXG4gICAgICBzZWxmLmZyb21EYXRlID0ge307XG4gICAgICBzZWxmLnRvRGF0ZSA9IHt9O1xuXG4gICAgICBmcm9tRm9ybWF0dGVkRGF0ZSA9IHNlbGYuZGF0ZUZvcm1hdHRlcihuZXcgRGF0ZSh0aGlzLnN0YXJ0RHQpLCAnLScpO1xuXG4gICAgICB0b0Zvcm1hdHRlZERhdGUgPSBzZWxmLmRhdGVGb3JtYXR0ZXIobmV3IERhdGUodGhpcy5lbmREdCksICctJyk7XG4gICAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9KTtcblxuICAgICAgdG9vbGJhci5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG5cbiAgICAgIGdyb3VwID0gbmV3IHRoaXMudG9vbGJveC5Db21wb25lbnRHcm91cCh7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuXG4gICAgICBncm91cC5zZXRDb25maWcoe1xuICAgICAgICBmaWxsOiAnI2ZmZicsXG4gICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuICAgICAgfSk7XG5cbiAgICAgIGZyb21EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdGcm9tOicsIHtcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICdmb250LXNpemUnOiAnMTUnLFxuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICAgICdmaWxsJzogJyM2OTY5NjknXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdG9EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdUbzonLCB7XG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXJcbiAgICAgIH0sIHtcbiAgICAgICAgdGV4dDoge1xuICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAnZm9udC1zaXplJzogJzE1JyxcbiAgICAgICAgICAgICdmb250LWZhbWlseSc6ICdcIkx1Y2lkYSBHcmFuZGVcIiwgc2Fucy1zZXJpZicsXG4gICAgICAgICAgICAnZmlsbCc6ICcjNjk2OTY5J1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHNlbGYuZnJvbURhdGUgPSBuZXcgdGhpcy50b29sYm94LklucHV0VGV4dEJveFN5bWJvbCh7XG4gICAgICAgIHdpZHRoOiAxMjAsXG4gICAgICAgIGhlaWdodDogMjJcbiAgICAgIH0sIHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSwge1xuICAgICAgICBzdHJva2VXaWR0aDogMSxcbiAgICAgICAgc3Ryb2tlOiAnI2NlZDVkNCcsXG4gICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAwLFxuICAgICAgICByYWRpdXM6IDIsXG4gICAgICAgIG1hcmdpbjoge1xuICAgICAgICAgIHJpZ2h0OiAyMlxuICAgICAgICB9LFxuICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICAnZm9udC1mYW1pbHknOiAnXCJMdWNpZGEgR3JhbmRlXCIsIHNhbnMtc2VyaWYnLFxuICAgICAgICAgIGZvbnRTaXplOiAxM1xuICAgICAgICB9LFxuICAgICAgICBsYWJlbDogZnJvbUZvcm1hdHRlZERhdGUsXG4gICAgICAgIGxhYmVsRmlsbDogJyM2OTY5NjknXG4gICAgICB9KTtcblxuICAgICAgLy8gc2VsZi5mcm9tRGF0ZS5zZXRTdGF0ZUNvbmZpZyh7XG4gICAgICAvLyAgIHByZXNzZWQ6IHtcbiAgICAgIC8vICAgICBjb25maWc6IHtcbiAgICAgIC8vICAgICAgIHByZXNzZWQ6IHtcbiAgICAgIC8vICAgICAgICAgZmlsbDogJyNmZjAwMDAnLFxuICAgICAgLy8gICAgICAgICAnc3Ryb2tlLXdpZHRoJzogMSxcbiAgICAgIC8vICAgICAgICAgc3Ryb2tlOiAnIzAwZmYwMCcsXG4gICAgICAvLyAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInXG4gICAgICAvLyAgICAgICB9XG4gICAgICAvLyAgICAgfSxcbiAgICAgIC8vICAgICBmaWxsOiBbJyMwMDAwMDAnLCAnIzAwMDAwMCcsICcjMDAwMDAwJywgJyMwMDAwMDAnLCB0cnVlXSxcbiAgICAgIC8vICAgICAnc3Ryb2tlJzogJyMwMDAwMDAnXG4gICAgICAvLyAgIH1cbiAgICAgIC8vIH0pO1xuXG4gICAgICBzZWxmLnRvRGF0ZSA9IG5ldyB0aGlzLnRvb2xib3guSW5wdXRUZXh0Qm94U3ltYm9sKHtcbiAgICAgICAgd2lkdGg6IDEyMCxcbiAgICAgICAgaGVpZ2h0OiAyMlxuICAgICAgfSwge1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9LCB7XG4gICAgICAgIHN0cm9rZVdpZHRoOiAxLFxuICAgICAgICBzdHJva2U6ICcjY2VkNWQ0JyxcbiAgICAgICAgc3ltYm9sU3Ryb2tlV2lkdGg6IDAsXG4gICAgICAgIHJhZGl1czogMixcbiAgICAgICAgYnRuVGV4dFN0eWxlOiB7XG4gICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ1wiTHVjaWRhIEdyYW5kZVwiLCBzYW5zLXNlcmlmJyxcbiAgICAgICAgICBmb250U2l6ZTogMTNcbiAgICAgICAgfSxcbiAgICAgICAgbGFiZWw6IHRvRm9ybWF0dGVkRGF0ZSxcbiAgICAgICAgbGFiZWxGaWxsOiAnIzY5Njk2OSdcbiAgICAgIH0pO1xuXG4gICAgICBzZWxmLmZyb21EYXRlLmF0dGFjaEV2ZW50SGFuZGxlcnMoe1xuICAgICAgICBjbGljazoge1xuICAgICAgICAgIGZuOiBzZWxmLmZyb21EYXRlLmVkaXRcbiAgICAgICAgfSxcbiAgICAgICAgdGV4dE9uQmx1cjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHNlbGYuZnJvbURhdGUuYmx1cigpO1xuICAgICAgICAgIHNlbGYuc3RhcnREYXRlID0gc2VsZi5mcm9tRGF0ZS5nZXRUZXh0KCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzZWxmLnRvRGF0ZS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgY2xpY2s6IHtcbiAgICAgICAgICBmbjogc2VsZi50b0RhdGUuZWRpdFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0T25CbHVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi50b0RhdGUuYmx1cigpO1xuICAgICAgICAgIHNlbGYuZW5kRGF0ZSA9IHNlbGYudG9EYXRlLmdldFRleHQoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuU3ltYm9sU3RvcmUucmVnaXN0ZXIoJ3RleHRCb3hJY29uJywgZnVuY3Rpb24gKHgsIHksIHJhZCwgdywgaCwgcGFkWCwgcGFkWSkge1xuICAgICAgICB2YXIgeDEgPSB4IC0gdyAvIDIgKyBwYWRYIC8gMixcbiAgICAgICAgICB4MiA9IHggKyB3IC8gMiAtIHBhZFggLyAyLFxuICAgICAgICAgIHkxID0geSAtIGggLyAyICsgcGFkWSAvIDIsXG4gICAgICAgICAgeTIgPSB5ICsgaCAvIDIgLSBwYWRZIC8gMjtcblxuICAgICAgICByZXR1cm4gWydNJywgeDEsIHkxLCAnTCcsIHgyLCB5MSwgJ0wnLCB4MiwgeTIsICdMJywgeDEsIHkyLCAnWiddO1xuICAgICAgfSk7XG5cbiAgICAgIGdyb3VwLmFkZFN5bWJvbChmcm9tRGF0ZUxhYmVsKTtcbiAgICAgIGdyb3VwLmFkZFN5bWJvbChzZWxmLmZyb21EYXRlKTtcbiAgICAgIGdyb3VwLmFkZFN5bWJvbCh0b0RhdGVMYWJlbCk7XG4gICAgICBncm91cC5hZGRTeW1ib2woc2VsZi50b0RhdGUpO1xuICAgICAgdG9vbGJhci5hZGRDb21wb25lbnQoZ3JvdXApO1xuICAgICAgcmV0dXJuIHRvb2xiYXI7XG4gICAgfTtcblxuICAgIGdldExvZ2ljYWxTcGFjZSAoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCkge1xuICAgICAgYXZhaWxhYmxlV2lkdGggLz0gMjtcbiAgICAgIHZhciBsb2dpY2FsU3BhY2UsXG4gICAgICAgIHdpZHRoID0gMCxcbiAgICAgICAgaGVpZ2h0ID0gMCxcbiAgICAgICAgaSxcbiAgICAgICAgbG47XG5cbiAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG4gICAgICAgIGxvZ2ljYWxTcGFjZSA9IHRoaXMudG9vbGJhcnNbaV0uZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpO1xuICAgICAgICB3aWR0aCA9IE1hdGgubWF4KGxvZ2ljYWxTcGFjZS53aWR0aCwgd2lkdGgpO1xuICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcbiAgICAgICAgdGhpcy50b29sYmFyc1tpXS53aWR0aCA9IGxvZ2ljYWxTcGFjZS53aWR0aDtcbiAgICAgICAgdGhpcy50b29sYmFyc1tpXS5oZWlnaHQgPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgfVxuICAgICAgaGVpZ2h0ICs9IHRoaXMucGFkZGluZztcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgaGVpZ2h0OiBoZWlnaHRcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHBsYWNlSW5DYW52YXMgKCkge1xuICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgc2VsZi5wYWRkaW5nID0gNTtcbiAgICAgIHNlbGYuc3BhY2VNYW5hZ2VySW5zdGFuY2UuYWRkKFt7XG4gICAgICAgIG5hbWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gJ1Rvb2xCb3hFeHQnO1xuICAgICAgICB9LFxuICAgICAgICByZWY6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqWycwJ107XG4gICAgICAgIH0sXG4gICAgICAgIHNlbGY6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gc2VsZjtcbiAgICAgICAgfSxcbiAgICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gMjtcbiAgICAgICAgfSxcbiAgICAgICAgbGF5b3V0OiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG4gICAgICAgIH0sXG4gICAgICAgIG9yaWVudGF0aW9uOiBbe1xuICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgIHJldHVybiBvYmouaG9yaXpvbnRhbDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHBvc2l0aW9uOiBbe1xuICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICByZXR1cm4gb2JqLnRvcDtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG4gICAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnJpZ2h0O1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICBkaW1lbnNpb25zOiBbZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbGYuZ2V0TG9naWNhbFNwYWNlKHBhcmVudC5nZXRXaWR0aCgpLCBwYXJlbnQuZ2V0SGVpZ2h0KCkpO1xuICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgfV1cbiAgICAgICAgICB9XVxuICAgICAgICB9XVxuICAgICAgfV0pO1xuICAgIH07XG5cbiAgICBzZXREcmF3aW5nQ29uZmlndXJhdGlvbiAoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcbiAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuICAgICAgbWVzLnggPSB4O1xuICAgICAgbWVzLnkgPSB5O1xuICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG4gICAgICBtZXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgICB0aGlzLnBhcmVudEdyb3VwID0gZ3JvdXA7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBkcmF3ICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgICAgdmFyIG1lYXN1cmVtZW50ID0gdGhpcy5tZWFzdXJlbWVudCxcbiAgICAgICAgdG9vbGJhcnMgPSB0aGlzLnRvb2xiYXJzLFxuICAgICAgICBsbixcbiAgICAgICAgaSxcbiAgICAgICAgdG9vbGJhcixcbiAgICAgICAgbW9kZWwgPSB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwsXG4gICAgICAgIHNlbGYgPSB0aGlzO1xuICAgICAgeCA9IHggPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnggOiB4O1xuICAgICAgeSA9IHkgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LnkgOiB5O1xuICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcbiAgICAgIGhlaWdodCA9IGhlaWdodCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQuaGVpZ2h0IDogaGVpZ2h0O1xuICAgICAgZ3JvdXAgPSBncm91cCA9PT0gdW5kZWZpbmVkID8gdGhpcy5wYXJlbnRHcm91cCA6IGdyb3VwO1xuICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuICAgICAgICBmb3IgKGkgPSAwLCBsbiA9IHRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgICB0b29sYmFyID0gdG9vbGJhcnNbaV07XG4gICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBtb2RlbC5vblByb3BzQ2hhbmdlKFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnLCAneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10sIGZ1bmN0aW9uIChzdGFydCwgZW5kKSB7XG4gICAgICAgIC8vIHNlbGYuZnJvbURhdGUuYmx1cihuZXcgRGF0ZShzdGFydFsxXSkudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xuICAgICAgICAvLyBzZWxmLnRvRGF0ZS5ibHVyKG5ldyBEYXRlKGVuZFsxXSkudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xuICAgICAgICBzZWxmLmZyb21EYXRlLmJsdXIoc2VsZi5kYXRlRm9ybWF0dGVyKG5ldyBEYXRlKHN0YXJ0WzFdKSwgJy0nKSk7XG4gICAgICAgIHNlbGYudG9EYXRlLmJsdXIoc2VsZi5kYXRlRm9ybWF0dGVyKG5ldyBEYXRlKGVuZFsxXSksICctJykpO1xuICAgICAgfSk7XG5cbiAgICAgIG1vZGVsLm9uUHJvcHNDaGFuZ2UoWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCddLCBmdW5jdGlvbiAoc3RhcnQpIHtcbiAgICAgICAgc2VsZi5mcm9tRGF0ZS5ibHVyKHNlbGYuZGF0ZUZvcm1hdHRlcihuZXcgRGF0ZShzdGFydFsxXSksICctJykpO1xuICAgICAgfSk7XG5cbiAgICAgIG1vZGVsLm9uUHJvcHNDaGFuZ2UoWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSwgZnVuY3Rpb24gKGVuZCkge1xuICAgICAgICBzZWxmLnRvRGF0ZS5ibHVyKHNlbGYuZGF0ZUZvcm1hdHRlcihuZXcgRGF0ZShlbmRbMV0pLCAnLScpKTtcbiAgICAgIH0pO1xuICAgIH07XG4gIH1cbiAgcmV0dXJuIERhdGVSYW5nZTtcbn07XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvZmN0cy1leHQtZGF0ZXJhbmdlLmpzIl0sInNvdXJjZVJvb3QiOiIifQ==
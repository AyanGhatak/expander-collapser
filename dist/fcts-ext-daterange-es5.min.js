!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1);FusionCharts.register("extension",["date-range-chooser",function(t){var e=this,n=e.extAPI;window.dr=new r,n(window.dr)}])},function(t,e,n){(function(e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),i=n(2),o=n(4),s=function(){function t(){r(this,t),this.dateRange={startDate:0,endDate:0},this.startText={attr:function(){}},this.endText={attr:function(){}}}return a(t,[{key:"init",value:function(t){t("X-Axis","Y-Axis","graphics",function(t,n,r){e.x=t,e.y=n,e.paper=r})}},{key:"placeInCanvas",value:function(){this.range={startDate:12,endDate:23}}},{key:"draw",value:function(){var t=e.paper,n=this.range,r=t.text(20,22,"From: ");r.attr("font-family","sans-serif"),r.attr("fill","#000");var a=t.rect(50,10,60,25);a.attr("stroke","#000"),this.startText=t.text(63,22,n.startDate),this.startText.attr("font-family","sans-serif"),this.startText.attr("fill","#000");var i=t.text(170,22,"To: ");i.attr("font-family","sans-serif"),i.attr("fill","#000");var o=t.rect(190,10,60,25);o.attr("stroke","#000"),this.endText=t.text(203,22,n.endDate),this.endText.attr("font-family","sans-serif"),this.endText.attr("fill","#000")}},{key:"dispose",value:function(){}},{key:"swapDates",value:function(){var t=this.dateRange.startDate;this.dateRange.startDate=this.dateRange.endDate,this.dateRange.endDate=t}},{key:"syncRange",value:function(){}},{key:"getFormattedDate",value:function(t){}},{key:"getTimestamp",value:function(t){}},{key:"setConfig",value:function(t){}},{key:"getConfig",value:function(){}},{key:"range",get:function(){return this.dateRange},set:function(t){if(t.startDate<=t.endDate){this.dateRange.startDate=t.startDate,this.dateRange.endDate=t.endDate;var e=new i;e.timestamp=this.dateRange.startDate,this.startText.attr("text",e.timestamp);var n=new o;n.timestamp=this.dateRange.endDate,this.endText.attr("text",n.timestamp)}}}]),t}();t.exports=s}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=function(t){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),o(e,[{key:"validateDate",value:function(){}}]),e}(s);t.exports=u},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){n(this,t),this.timestamp=0}return r(t,[{key:"displayDate",value:function(){}},{key:"date",get:function(){return this.timestamp},set:function(t){this.timestamp=t}}]),t}();t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=function(t){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return i(e,t),o(e,[{key:"validateDate",value:function(){}}]),e}(s);t.exports=u}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDk4YWI0Y2JlODk0YzI5YzViZDNlIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZXJhbmdlLmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1zdGFydGRhdGVpbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZWlucHV0LmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1lbmRkYXRlaW5wdXQuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiRGF0ZVJhbmdlIiwiRnVzaW9uQ2hhcnRzIiwicmVnaXN0ZXIiLCJnbG9iYWwiLCJ0aGlzIiwiZXh0QVBJIiwid2luZG93IiwiZHIiLCJfY2xhc3NDYWxsQ2hlY2siLCJpbnN0YW5jZSIsIkNvbnN0cnVjdG9yIiwiVHlwZUVycm9yIiwiX2NyZWF0ZUNsYXNzIiwiZGVmaW5lUHJvcGVydGllcyIsInRhcmdldCIsInByb3BzIiwiaSIsImxlbmd0aCIsImRlc2NyaXB0b3IiLCJlbnVtZXJhYmxlIiwiY29uZmlndXJhYmxlIiwid3JpdGFibGUiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImtleSIsInByb3RvUHJvcHMiLCJzdGF0aWNQcm9wcyIsInByb3RvdHlwZSIsIlN0YXJ0RGF0ZUlucHV0IiwiRW5kRGF0ZUlucHV0IiwiZGF0ZVJhbmdlIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInN0YXJ0VGV4dCIsImF0dHIiLCJlbmRUZXh0IiwidmFsdWUiLCJyZXF1aXJlIiwieCIsInkiLCJncmFwaGljcyIsInBhcGVyIiwicmFuZ2UiLCJzdGFydExhYmVsIiwidGV4dCIsInN0YXJ0UmVjdCIsInJlY3QiLCJlbmRMYWJlbCIsImVuZFJlY3QiLCJ0ZW1wIiwidGltZXN0YW1wIiwiZGF0ZVN0cmluZyIsImNvbmZpZ09iaiIsImdldCIsInNldCIsInNkaSIsImVkaSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkRhdGVJbnB1dCIsIl9EYXRlSW5wdXQiLCJnZXRQcm90b3R5cGVPZiIsImFwcGx5IiwiYXJndW1lbnRzIiwibXMiXSwibWFwcGluZ3MiOiJDQUFTLFNBQVVBLEdDSW5CLFFBQUFDLEdBQUFDLEdBR0EsR0FBQUMsRUFBQUQsR0FDQSxNQUFBQyxHQUFBRCxHQUFBRSxPQUdBLElBQUFDLEdBQUFGLEVBQUFELElBQ0FFLFdBQ0FFLEdBQUFKLEVBQ0FLLFFBQUEsRUFVQSxPQU5BUCxHQUFBRSxHQUFBTSxLQUFBSCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBSCxHQUdBSSxFQUFBRSxRQUFBLEVBR0FGLEVBQUFELFFBdkJBLEdBQUFELEtBcUNBLE9BVEFGLEdBQUFRLEVBQUFULEVBR0FDLEVBQUFTLEVBQUFQLEVBR0FGLEVBQUFVLEVBQUEsR0FHQVYsRUFBQSxLRE1NLFNBQVNJLEVBQVFELEVBQVNILEdFNUNoQyxZQUNBLElBQU1XLEdBQVlYLEVBQVEsRUFJMUJZLGNBQWFDLFNBQVMsYUFBYyxxQkFBc0IsU0FBVVIsR0FDbEUsR0FBSVMsR0FBU0MsS0FDVEMsRUFBU0YsRUFBT0UsTUFLcEJDLFFBQU9DLEdBQUssR0FBSVAsR0FDaEJLLEVBQU9DLE9BQU9DLFFGb0RWLFNBQVNkLEVBQVFELEVBQVNILElHakVoQyxTQUFBYyxHQUFBLFlIdUVDLFNBQVNLLEdBQWdCQyxFQUFVQyxHQUFlLEtBQU1ELFlBQW9CQyxJQUFn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SCxFQUFhZ0IsR0FBcUJoQixNTTFUM2hCeUQsRUFBWTlFLEVBQVEsR0FPcEJ3QyxFTm1VYyxTQUFVdUMsR0FHM0IsUUFBU3ZDLEtBR1AsTUFGQXJCLEdBQWdCSixLQUFNeUIsR0FFZjRCLEVBQTJCckQsTUFBT3lCLEVBQWFxQyxXQUFhNUMsT0FBTytDLGVBQWV4QyxJQUFleUMsTUFBTWxFLEtBQU1tRSxZQVF0SCxNQWJBWCxHQUFVL0IsRUFBY3VDLEdBUXhCeEQsRUFBYWlCLElBQ1hMLElBQUssZUFDTFksTUFBTyxnQkFHRlAsR01qVmlCc0MsRUFJM0IxRSxHQUFPRCxRQUFVcUMiLCJmaWxlIjoiZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKioqKioqLyAoZnVuY3Rpb24obW9kdWxlcykgeyAvLyB3ZWJwYWNrQm9vdHN0cmFwXG4vKioqKioqLyBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4vKioqKioqLyBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4vKioqKioqLyBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4vKioqKioqLyBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbi8qKioqKiovIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4vKioqKioqLyBcdFx0XHRleHBvcnRzOiB7fSxcbi8qKioqKiovIFx0XHRcdGlkOiBtb2R1bGVJZCxcbi8qKioqKiovIFx0XHRcdGxvYWRlZDogZmFsc2Vcbi8qKioqKiovIFx0XHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbi8qKioqKiovIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuLyoqKioqKi8gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuLyoqKioqKi8gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbi8qKioqKiovIFx0fVxuLyoqKioqKi9cbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLyoqKioqKi8gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbi8qKioqKiovIH0pXG4vKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqL1xuLyoqKioqKi8gKFtcbi8qIDAgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBEYXRlUmFuZ2UgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuXHRcblx0Ly8gdmFyIGZjID0gbmV3IEZ1c2lvbkNoYXJ0cygpO1xuXHRcblx0RnVzaW9uQ2hhcnRzLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ2RhdGUtcmFuZ2UtY2hvb3NlcicsIGZ1bmN0aW9uIChpZCkge1xuXHQgIHZhciBnbG9iYWwgPSB0aGlzO1xuXHQgIHZhciBleHRBUEkgPSBnbG9iYWwuZXh0QVBJO1xuXHRcblx0ICAvLyB2YXIgb3RoZXJBUEkgPSBGdXNpb25DaGFydHMuZ2V0RXh0Q29tcG9uZW50KGlkLCAnYXBpJywgJ2xlZ2FjeWV4dGFwaScpO1xuXHQgIC8vIHZhciB0b29sQm94QXBpID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcblx0XG5cdCAgd2luZG93LmRyID0gbmV3IERhdGVSYW5nZSgpO1xuXHQgIGV4dEFQSSh3aW5kb3cuZHIpO1xuXHR9XSk7XG5cbi8qKiovIH0sXG4vKiAxICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24oZ2xvYmFsKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgU3RhcnREYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDIpO1xuXHR2YXIgRW5kRGF0ZUlucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXyg0KTtcblx0LyoqXG5cdCAqIENsYXNzIHJlcHJlc2VudGluZyB0aGUgRGF0ZVJhbmdlLlxuXHQgKi9cblx0XG5cdHZhciBEYXRlUmFuZ2UgPSBmdW5jdGlvbiAoKSB7XG5cdCAgLyoqXG5cdCAgICogQ3JlYXRlIGEgRGF0ZVJhbmdlLlxuXHQgICAqIEB0eXBlZGVmIHtvYmplY3R9IERhdGVSYW5nZS5yYW5nZVxuXHQgICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzdGFydERhdGUgLSBUaGUgc3RhcnQgZGF0ZSBvZiB0aGUgZGF0ZSByYW5nZS5cblx0ICAgKiBAcHJvcGVydHkge251bWJlcn0gZW5kRGF0ZSAtIFRoZSBlbmQgZGF0ZSBvZiB0aGUgZGF0ZSByYW5nZS5cblx0ICAgKi9cblx0ICBmdW5jdGlvbiBEYXRlUmFuZ2UoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0ZVJhbmdlKTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0ICAgIHRoaXMuZGF0ZVJhbmdlID0ge1xuXHQgICAgICBzdGFydERhdGU6IDAsXG5cdCAgICAgIGVuZERhdGU6IDBcblx0ICAgIH07XG5cdCAgICB0aGlzLnN0YXJ0VGV4dCA9IHtcblx0ICAgICAgYXR0cjogZnVuY3Rpb24gYXR0cigpIHt9XG5cdCAgICB9O1xuXHQgICAgdGhpcy5lbmRUZXh0ID0ge1xuXHQgICAgICBhdHRyOiBmdW5jdGlvbiBhdHRyKCkge31cblx0ICAgIH07XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzLlxuXHQgICAqIEB0eXBlIHtEYXRlUmFuZ2UucmFuZ2V9XG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRGF0ZVJhbmdlLCBbe1xuXHQgICAga2V5OiAnaW5pdCcsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgIHJlcXVpcmUoJ1gtQXhpcycsICdZLUF4aXMnLCAnZ3JhcGhpY3MnLCBmdW5jdGlvbiAoeCwgeSwgZ3JhcGhpY3MpIHtcblx0ICAgICAgICBnbG9iYWwueCA9IHg7XG5cdCAgICAgICAgZ2xvYmFsLnkgPSB5O1xuXHQgICAgICAgIGdsb2JhbC5wYXBlciA9IGdyYXBoaWNzO1xuXHQgICAgICB9KTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdwbGFjZUluQ2FudmFzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBwbGFjZUluQ2FudmFzKCkge1xuXHQgICAgICB0aGlzLnJhbmdlID0ge1xuXHQgICAgICAgIHN0YXJ0RGF0ZTogMTIsXG5cdCAgICAgICAgZW5kRGF0ZTogMjNcblx0ICAgICAgfTtcblx0ICAgIH1cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdkcmF3Jyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkcmF3KCkge1xuXHQgICAgICB2YXIgcGFwZXIgPSBnbG9iYWwucGFwZXI7XG5cdCAgICAgIHZhciByYW5nZSA9IHRoaXMucmFuZ2U7XG5cdFxuXHQgICAgICB2YXIgc3RhcnRMYWJlbCA9IHBhcGVyLnRleHQoMjAsIDIyLCAnRnJvbTogJyk7XG5cdCAgICAgIHN0YXJ0TGFiZWwuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpO1xuXHQgICAgICBzdGFydExhYmVsLmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuXHQgICAgICB2YXIgc3RhcnRSZWN0ID0gcGFwZXIucmVjdCg1MCwgMTAsIDYwLCAyNSk7XG5cdCAgICAgIHN0YXJ0UmVjdC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xuXHQgICAgICB0aGlzLnN0YXJ0VGV4dCA9IHBhcGVyLnRleHQoNjMsIDIyLCByYW5nZS5zdGFydERhdGUpO1xuXHQgICAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG5cdCAgICAgIHRoaXMuc3RhcnRUZXh0LmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuXHRcblx0ICAgICAgdmFyIGVuZExhYmVsID0gcGFwZXIudGV4dCgxNzAsIDIyLCAnVG86ICcpO1xuXHQgICAgICBlbmRMYWJlbC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG5cdCAgICAgIGVuZExhYmVsLmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuXHQgICAgICB2YXIgZW5kUmVjdCA9IHBhcGVyLnJlY3QoMTkwLCAxMCwgNjAsIDI1KTtcblx0ICAgICAgZW5kUmVjdC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xuXHQgICAgICB0aGlzLmVuZFRleHQgPSBwYXBlci50ZXh0KDIwMywgMjIsIHJhbmdlLmVuZERhdGUpO1xuXHQgICAgICB0aGlzLmVuZFRleHQuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpO1xuXHQgICAgICB0aGlzLmVuZFRleHQuYXR0cignZmlsbCcsICcjMDAwJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZGlzcG9zZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHt9XG5cdCAgICAvLyBUT0RPOiBkaXNwb3NlIGV4dGVuc2lvblxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN3YXBzIHRoZSBzdGFydCBkYXRlIGFuZCB0aGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2Vcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzd2FwRGF0ZXMnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHN3YXBEYXRlcygpIHtcblx0ICAgICAgdmFyIHRlbXAgPSB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGU7XG5cdCAgICAgIHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZSA9IHRoaXMuZGF0ZVJhbmdlLmVuZERhdGU7XG5cdCAgICAgIHRoaXMuZGF0ZVJhbmdlLmVuZERhdGUgPSB0ZW1wO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzeW5jUmFuZ2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHN5bmNSYW5nZSgpIHt9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0Rm9ybWF0dGVkRGF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkRGF0ZSh0aW1lc3RhbXApIHt9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0VGltZXN0YW1wJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lc3RhbXAoZGF0ZVN0cmluZykge31cblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRDb25maWcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvbmZpZyhjb25maWdPYmopIHt9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0Q29uZmlnJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb25maWcoKSB7fVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ3JhbmdlJyxcblx0ICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICByZXR1cm4gdGhpcy5kYXRlUmFuZ2U7XG5cdCAgICB9LFxuXHQgICAgc2V0OiBmdW5jdGlvbiBzZXQocmFuZ2UpIHtcblx0ICAgICAgaWYgKHJhbmdlLnN0YXJ0RGF0ZSA8PSByYW5nZS5lbmREYXRlKSB7XG5cdCAgICAgICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gcmFuZ2Uuc3RhcnREYXRlO1xuXHQgICAgICAgIHRoaXMuZGF0ZVJhbmdlLmVuZERhdGUgPSByYW5nZS5lbmREYXRlO1xuXHRcblx0ICAgICAgICB2YXIgc2RpID0gbmV3IFN0YXJ0RGF0ZUlucHV0KCk7XG5cdCAgICAgICAgc2RpLnRpbWVzdGFtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcblx0ICAgICAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCd0ZXh0Jywgc2RpLnRpbWVzdGFtcCk7XG5cdFxuXHQgICAgICAgIHZhciBlZGkgPSBuZXcgRW5kRGF0ZUlucHV0KCk7XG5cdCAgICAgICAgZWRpLnRpbWVzdGFtcCA9IHRoaXMuZGF0ZVJhbmdlLmVuZERhdGU7XG5cdCAgICAgICAgdGhpcy5lbmRUZXh0LmF0dHIoJ3RleHQnLCBlZGkudGltZXN0YW1wKTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIERhdGVSYW5nZTtcblx0fSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEYXRlUmFuZ2U7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBEYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIEEgY29uY3JldGUgcmVwcmVzZW50YXRpb24gb2YgRGF0ZUlucHV0IGZvciB0aGUgc3RhcnQgZGF0ZS5cblx0ICogQGV4dGVuZHMgRGF0ZUlucHV0XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIFN0YXJ0RGF0ZUlucHV0ID0gZnVuY3Rpb24gKF9EYXRlSW5wdXQpIHtcblx0ICBfaW5oZXJpdHMoU3RhcnREYXRlSW5wdXQsIF9EYXRlSW5wdXQpO1xuXHRcblx0ICBmdW5jdGlvbiBTdGFydERhdGVJbnB1dCgpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFydERhdGVJbnB1dCk7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTdGFydERhdGVJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFN0YXJ0RGF0ZUlucHV0KSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoU3RhcnREYXRlSW5wdXQsIFt7XG5cdCAgICBrZXk6ICd2YWxpZGF0ZURhdGUnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHZhbGlkYXRlRGF0ZSgpIHt9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gU3RhcnREYXRlSW5wdXQ7XG5cdH0oRGF0ZUlucHV0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gU3RhcnREYXRlSW5wdXQ7XG5cbi8qKiovIH0sXG4vKiAzICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMpIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdC8qKlxuXHQgKiBDbGFzcyByZXByZXNlbnRpbmcgYSBhYnN0cmFjdCBEYXRlSW5wdXQuXG5cdCAqIEBhYnN0cmFjdFxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0dmFyIERhdGVJbnB1dCA9IGZ1bmN0aW9uICgpIHtcblx0ICBmdW5jdGlvbiBEYXRlSW5wdXQoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0ZUlucHV0KTtcblx0XG5cdCAgICAvKipcblx0ICAgICAqIEB0eXBlZGVmIHtvYmplY3R9IERhdGVJbnB1dC5pbnB1dFxuXHQgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHRpbWVzdGFtcCAtIFRoZSBjdXJyZW50IHRpbWUgc2hvd24gb24gdGhlIGRhdGUgaW5wdXQuXG5cdCAgICAgKi9cblx0ICAgIC8qKlxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHQgICAgdGhpcy50aW1lc3RhbXAgPSAwO1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogUmVwcmVzZW50cyB0aGUgbnVtZXJpYyB2YWx1ZSBvZiB0aGUgZGF0ZVxuXHQgICAqIEB0eXBlIG51bWJlclxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKERhdGVJbnB1dCwgW3tcblx0ICAgIGtleTogJ2Rpc3BsYXlEYXRlJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBkaXNwbGF5RGF0ZSgpIHt9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZGF0ZScsXG5cdCAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wO1xuXHQgICAgfSxcblx0ICAgIHNldDogZnVuY3Rpb24gc2V0KG1zKSB7XG5cdCAgICAgIHRoaXMudGltZXN0YW1wID0gbXM7XG5cdCAgICB9XG5cdCAgfV0pO1xuXHRcblx0ICByZXR1cm4gRGF0ZUlucHV0O1xuXHR9KCk7XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IERhdGVJbnB1dDtcblxuLyoqKi8gfSxcbi8qIDQgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBEYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIEEgY29uY3JldGUgcmVwcmVzZW50YXRpb24gb2YgRGF0ZUlucHV0IGZvciB0aGUgZW5kIGRhdGUuXG5cdCAqIEBleHRlbmRzIERhdGVJbnB1dFxuXHQgKiBAcHJpdmF0ZVxuXHQgKi9cblx0XG5cdHZhciBFbmREYXRlSW5wdXQgPSBmdW5jdGlvbiAoX0RhdGVJbnB1dCkge1xuXHQgIF9pbmhlcml0cyhFbmREYXRlSW5wdXQsIF9EYXRlSW5wdXQpO1xuXHRcblx0ICBmdW5jdGlvbiBFbmREYXRlSW5wdXQoKSB7XG5cdCAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRW5kRGF0ZUlucHV0KTtcblx0XG5cdCAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEVuZERhdGVJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEVuZERhdGVJbnB1dCkpLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykpO1xuXHQgIH1cblx0XG5cdCAgX2NyZWF0ZUNsYXNzKEVuZERhdGVJbnB1dCwgW3tcblx0ICAgIGtleTogJ3ZhbGlkYXRlRGF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVEYXRlKCkge31cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBFbmREYXRlSW5wdXQ7XG5cdH0oRGF0ZUlucHV0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRW5kRGF0ZUlucHV0O1xuXG4vKioqLyB9XG4vKioqKioqLyBdKTtcblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiBmY3RzLWV4dC1kYXRlcmFuZ2UtZXM1Lm1pbi5qc1xuICoqLyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogd2VicGFjay9ib290c3RyYXAgOThhYjRjYmU4OTRjMjljNWJkM2VcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5jb25zdCBEYXRlUmFuZ2UgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWRhdGVyYW5nZScpO1xuXG4vLyB2YXIgZmMgPSBuZXcgRnVzaW9uQ2hhcnRzKCk7XG5cbkZ1c2lvbkNoYXJ0cy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydkYXRlLXJhbmdlLWNob29zZXInLCBmdW5jdGlvbiAoaWQpIHtcbiAgdmFyIGdsb2JhbCA9IHRoaXM7XG4gIHZhciBleHRBUEkgPSBnbG9iYWwuZXh0QVBJO1xuXG4gIC8vIHZhciBvdGhlckFQSSA9IEZ1c2lvbkNoYXJ0cy5nZXRFeHRDb21wb25lbnQoaWQsICdhcGknLCAnbGVnYWN5ZXh0YXBpJyk7XG4gIC8vIHZhciB0b29sQm94QXBpID0gRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCgnYXBpJywgJ3Rvb2xib3gnKTtcblxuICB3aW5kb3cuZHIgPSBuZXcgRGF0ZVJhbmdlKCk7XG4gIGV4dEFQSSh3aW5kb3cuZHIpO1xufV0pO1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvaW5kZXguanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG52YXIgU3RhcnREYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LXN0YXJ0ZGF0ZWlucHV0Jyk7XG52YXIgRW5kRGF0ZUlucHV0ID0gcmVxdWlyZSgnLi9mY3RzLWV4dC1lbmRkYXRlaW5wdXQnKTtcbi8qKlxuICogQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBEYXRlUmFuZ2UuXG4gKi9cbmNsYXNzIERhdGVSYW5nZSB7XG4gIC8qKlxuICAgKiBDcmVhdGUgYSBEYXRlUmFuZ2UuXG4gICAqIEB0eXBlZGVmIHtvYmplY3R9IERhdGVSYW5nZS5yYW5nZVxuICAgKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnREYXRlIC0gVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2UuXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBlbmREYXRlIC0gVGhlIGVuZCBkYXRlIG9mIHRoZSBkYXRlIHJhbmdlLlxuICAgKi9cbiAgY29uc3RydWN0b3IgKCkge1xuICAgIC8qKlxuICAgICAqIEBwcml2YXRlXG4gICAgICovXG4gICAgdGhpcy5kYXRlUmFuZ2UgPSB7XG4gICAgICBzdGFydERhdGU6IDAsXG4gICAgICBlbmREYXRlOiAwXG4gICAgfTtcbiAgICB0aGlzLnN0YXJ0VGV4dCA9IHtcbiAgICAgIGF0dHI6IGZ1bmN0aW9uICgpIHt9XG4gICAgfTtcbiAgICB0aGlzLmVuZFRleHQgPSB7XG4gICAgICBhdHRyOiBmdW5jdGlvbiAoKSB7fVxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhcnQgYW5kIGVuZCBkYXRlcy5cbiAgICogQHR5cGUge0RhdGVSYW5nZS5yYW5nZX1cbiAgICovXG4gIGdldCByYW5nZSAoKSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0ZVJhbmdlO1xuICB9XG5cbiAgc2V0IHJhbmdlIChyYW5nZSkge1xuICAgIGlmIChyYW5nZS5zdGFydERhdGUgPD0gcmFuZ2UuZW5kRGF0ZSkge1xuICAgICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gcmFuZ2Uuc3RhcnREYXRlO1xuICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHJhbmdlLmVuZERhdGU7XG5cbiAgICAgIHZhciBzZGkgPSBuZXcgU3RhcnREYXRlSW5wdXQoKTtcbiAgICAgIHNkaS50aW1lc3RhbXAgPSB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGU7XG4gICAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCd0ZXh0Jywgc2RpLnRpbWVzdGFtcCk7XG5cbiAgICAgIHZhciBlZGkgPSBuZXcgRW5kRGF0ZUlucHV0KCk7XG4gICAgICBlZGkudGltZXN0YW1wID0gdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZTtcbiAgICAgIHRoaXMuZW5kVGV4dC5hdHRyKCd0ZXh0JywgZWRpLnRpbWVzdGFtcCk7XG4gICAgfVxuICB9XG5cbiAgaW5pdCAocmVxdWlyZSkge1xuICAgIHJlcXVpcmUoJ1gtQXhpcycsICdZLUF4aXMnLCAnZ3JhcGhpY3MnLCBmdW5jdGlvbiAoeCwgeSwgZ3JhcGhpY3MpIHtcbiAgICAgIGdsb2JhbC54ID0geDtcbiAgICAgIGdsb2JhbC55ID0geTtcbiAgICAgIGdsb2JhbC5wYXBlciA9IGdyYXBoaWNzO1xuICAgIH0pO1xuICB9XG5cbiAgcGxhY2VJbkNhbnZhcyAoKSB7XG4gICAgdGhpcy5yYW5nZSA9IHtcbiAgICAgIHN0YXJ0RGF0ZTogMTIsXG4gICAgICBlbmREYXRlOiAyM1xuICAgIH07XG4gIH1cblxuICBkcmF3ICgpIHtcbiAgICB2YXIgcGFwZXIgPSBnbG9iYWwucGFwZXI7XG4gICAgdmFyIHJhbmdlID0gdGhpcy5yYW5nZTtcblxuICAgIHZhciBzdGFydExhYmVsID0gcGFwZXIudGV4dCgyMCwgMjIsICdGcm9tOiAnKTtcbiAgICBzdGFydExhYmVsLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcbiAgICBzdGFydExhYmVsLmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuICAgIHZhciBzdGFydFJlY3QgPSBwYXBlci5yZWN0KDUwLCAxMCwgNjAsIDI1KTtcbiAgICBzdGFydFJlY3QuYXR0cignc3Ryb2tlJywgJyMwMDAnKTtcbiAgICB0aGlzLnN0YXJ0VGV4dCA9IHBhcGVyLnRleHQoNjMsIDIyLCByYW5nZS5zdGFydERhdGUpO1xuICAgIHRoaXMuc3RhcnRUZXh0LmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcbiAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCdmaWxsJywgJyMwMDAnKTtcblxuICAgIHZhciBlbmRMYWJlbCA9IHBhcGVyLnRleHQoMTcwLCAyMiwgJ1RvOiAnKTtcbiAgICBlbmRMYWJlbC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG4gICAgZW5kTGFiZWwuYXR0cignZmlsbCcsICcjMDAwJyk7XG4gICAgdmFyIGVuZFJlY3QgPSBwYXBlci5yZWN0KDE5MCwgMTAsIDYwLCAyNSk7XG4gICAgZW5kUmVjdC5hdHRyKCdzdHJva2UnLCAnIzAwMCcpO1xuICAgIHRoaXMuZW5kVGV4dCA9IHBhcGVyLnRleHQoMjAzLCAyMiwgcmFuZ2UuZW5kRGF0ZSk7XG4gICAgdGhpcy5lbmRUZXh0LmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcbiAgICB0aGlzLmVuZFRleHQuYXR0cignZmlsbCcsICcjMDAwJyk7XG4gIH1cblxuICBkaXNwb3NlICgpIHtcbiAgICAvLyBUT0RPOiBkaXNwb3NlIGV4dGVuc2lvblxuICB9XG5cbiAgLyoqXG4gICAqIFN3YXBzIHRoZSBzdGFydCBkYXRlIGFuZCB0aGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2VcbiAgICovXG4gIHN3YXBEYXRlcyAoKSB7XG4gICAgbGV0IHRlbXAgPSB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGU7XG4gICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZTtcbiAgICB0aGlzLmRhdGVSYW5nZS5lbmREYXRlID0gdGVtcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcHJpdmF0ZVxuICAgKi9cbiAgc3luY1JhbmdlICgpIHt9XG5cbiAgZ2V0Rm9ybWF0dGVkRGF0ZSAodGltZXN0YW1wKSB7fVxuXG4gIGdldFRpbWVzdGFtcCAoZGF0ZVN0cmluZykge31cblxuICBzZXRDb25maWcgKGNvbmZpZ09iaikge31cblxuICBnZXRDb25maWcgKCkge31cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBEYXRlUmFuZ2U7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9mY3RzLWV4dC1kYXRlcmFuZ2UuanNcbiAqKi8iLCIndXNlIHN0cmljdCc7XG5jb25zdCBEYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWRhdGVpbnB1dCcpO1xuXG4vKipcbiAqIEEgY29uY3JldGUgcmVwcmVzZW50YXRpb24gb2YgRGF0ZUlucHV0IGZvciB0aGUgc3RhcnQgZGF0ZS5cbiAqIEBleHRlbmRzIERhdGVJbnB1dFxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgU3RhcnREYXRlSW5wdXQgZXh0ZW5kcyBEYXRlSW5wdXQge1xuICB2YWxpZGF0ZURhdGUgKCkge31cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdGFydERhdGVJbnB1dDtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZjdHMtZXh0LXN0YXJ0ZGF0ZWlucHV0LmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBhYnN0cmFjdCBEYXRlSW5wdXQuXG4gKiBAYWJzdHJhY3RcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIERhdGVJbnB1dCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBEYXRlSW5wdXQuaW5wdXRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGltZXN0YW1wIC0gVGhlIGN1cnJlbnQgdGltZSBzaG93biBvbiB0aGUgZGF0ZSBpbnB1dC5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudGltZXN0YW1wID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBudW1lcmljIHZhbHVlIG9mIHRoZSBkYXRlXG4gICAqIEB0eXBlIG51bWJlclxuICAgKi9cbiAgZ2V0IGRhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgfVxuXG4gIHNldCBkYXRlIChtcykge1xuICAgIHRoaXMudGltZXN0YW1wID0gbXM7XG4gIH1cblxuICBkaXNwbGF5RGF0ZSAoKSB7fVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGVJbnB1dDtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZjdHMtZXh0LWRhdGVpbnB1dC5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IERhdGVJbnB1dCA9IHJlcXVpcmUoJy4vZmN0cy1leHQtZGF0ZWlucHV0Jyk7XG5cbi8qKlxuICogQSBjb25jcmV0ZSByZXByZXNlbnRhdGlvbiBvZiBEYXRlSW5wdXQgZm9yIHRoZSBlbmQgZGF0ZS5cbiAqIEBleHRlbmRzIERhdGVJbnB1dFxuICogQHByaXZhdGVcbiAqL1xuY2xhc3MgRW5kRGF0ZUlucHV0IGV4dGVuZHMgRGF0ZUlucHV0IHtcbiAgdmFsaWRhdGVEYXRlICgpIHt9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRW5kRGF0ZUlucHV0O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZmN0cy1leHQtZW5kZGF0ZWlucHV0LmpzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==
!function(t){function e(o){if(a[o])return a[o].exports;var n=a[o]={exports:{},id:o,loaded:!1};return t[o].call(n.exports,n,n.exports,e),n.loaded=!0,n.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){(function(t){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=a(2);window.dr=new o,function(a,o){"object"===e(t)&&t.exports?t.exports=a.document?o(a):function(t){if(!t.document)throw new Error("Window with document not present");return o(t,!0)}:a.DateRangeChooser=o(a,!0)}("undefined"!=typeof window?window:void 0,function(t,e){var a=t.FusionCharts;a.register("extension",["private","DateRangeChooser",function(){a.registerComponent("extensions","DateRangeChooser",o({FusionCharts:a}))}])})}).call(e,a(1)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e){"use strict";function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var a=0;a<e.length;a++){var o=e[a];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,a,o){return a&&t(e.prototype,a),o&&t(e,o),e}}();t.exports=function(t){var e=function(){function e(){a(this,e),this.startDt=0,this.endDt=0,this.startDataset=0,this.endDataset=0,this.toolbox=t.FusionCharts.getComponent("api","toolbox"),this.HorizontalToolbar=this.toolbox.HorizontalToolbar,this.ComponentGroup=this.toolbox.ComponentGroup,this.SymbolStore=this.toolbox.SymbolStore,this.startText={attr:function(){}},this.endText={attr:function(){}}}return o(e,[{key:"swapDates",value:function(){var t=this.dateRange.startDate;this.dateRange.startDate=this.dateRange.endDate,this.dateRange.endDate=t}},{key:"syncRange",value:function(){}},{key:"getFormattedDate",value:function(t){return this.chart.getFormattedDate(t)}},{key:"getTimestamp",value:function(t){return this.chart.getTimestamp(t)}},{key:"setConfig",value:function(t){}},{key:"getConfig",value:function(){return{calendarVisible:"false"}}},{key:"init",value:function(t){var e=this;return t(["xAxis","yAxis","graphics","chart","dataset","PlotManager","canvasConfig","MarkerManager","reactiveModel","globalReactiveModel","spaceManagerInstance","smartLabel","chartInstance",function(t,a,o,n,r,i,s,l,h,c,u,f){e.xAxis=t,e.yAxis=a,e.graphics=o,e.chart=n,e.dataset=r,e.plotManager=i,e.markerManager=l,e.canvasConfig=s,e.reactiveModel=h,e.globalReactiveModel=c,e.spaceManagerInstance=u,e.smartLabel=f}]),this.spaceManagerInstance=e.spaceManagerInstance,this.globalReactiveModel=e.globalReactiveModel,this.startDt=e.globalReactiveModel.model["x-axis-visible-range-start"],this.endDt=e.globalReactiveModel.model["x-axis-visible-range-end"],this.startDataset=e.globalReactiveModel.model["x-axis-absolute-range-start"],this.endDataset=e.globalReactiveModel.model["x-axis-absolute-range-end"],this.toolbars=[],this.measurement={},this.toolbars.push(this.createToolbar()),this}},{key:"createToolbar",value:function(){var t,e,a,o,n,r,i=this;return i.fromDate={},i.toDate={},n=new Date(this.startDt).toLocaleDateString(),r=new Date(this.endDt).toLocaleDateString(),t=new this.HorizontalToolbar({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),t.setConfig({fill:"#fff",borderThickness:0}),o=new this.toolbox.ComponentGroup({paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container}),o.setConfig({fill:"#fff",borderThickness:0}),e=new this.toolbox.Label("From:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15","font-family":"MyriadPro"}}}),i.fromDate=new this.toolbox.InputTextBoxSymbol({width:80,height:22},{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{strokeWidth:1,stroke:"rgba(102,102,102,0.5)",symbolStrokeWidth:0,margin:{right:22},btnTextStyle:{fontSize:14},label:n}),a=new this.toolbox.Label("To:",{smartLabel:this.smartLabel,paper:this.graphics.paper},{text:{style:{"font-size":"15","font-family":"MyriadPro"}}}),i.toDate=new this.toolbox.InputTextBoxSymbol({width:80,height:22},{paper:this.graphics.paper,chart:this.chart,smartLabel:this.smartLabel,chartContainer:this.graphics.container},{strokeWidth:1,stroke:"rgba(102,102,102,0.5)",symbolStrokeWidth:0,btnTextStyle:{fontSize:14},label:r}),i.fromDate.attachEventHandlers({click:{fn:i.fromDate.edit},textOnBlur:function(){i.fromDate.blur(),i.startDate=i.fromDate.getText(),console.log(i.fromDate.getText())}}),i.toDate.attachEventHandlers({click:{fn:i.toDate.edit},textOnBlur:function(){i.toDate.blur(),console.log(i.toDate.getText()),i.endDate=i.toDate.getText()}}),this.SymbolStore.register("textBoxIcon",function(t,e,a,o,n,r,i){var s=t-o/2+r/2,l=t+o/2-r/2,h=e-n/2+i/2,c=e+n/2-i/2;return["M",s,h,"L",l,h,"L",l,c,"L",s,c,"Z"]}),o.addSymbol(e),o.addSymbol(i.fromDate),o.addSymbol(a),o.addSymbol(i.toDate),t.addComponent(o),t}},{key:"getLogicalSpace",value:function(t,e){t/=2;var a,o,n,r=0,i=0;for(o=0,n=this.toolbars.length;o<n;o++)a=this.toolbars[o].getLogicalSpace(t,e),r=Math.max(a.width,r),i+=a.height,this.toolbars[o].width=a.width,this.toolbars[o].height=a.height;return i+=this.padding,{width:r,height:i}}},{key:"placeInCanvas",value:function(){var t=this;t.padding=5,t.spaceManagerInstance.add([{name:function(){return"ToolBoxExt"},ref:function(t){return t[0]},self:function(){return t},priority:function(){return 2},layout:function(t){return t.inline},orientation:[{type:function(t){return t.horizontal},position:[{type:function(t){return t.top},alignment:[{type:function(t){return t.right},dimensions:[function(){var e=this.getParentComponentGroup();return t.getLogicalSpace(e.getWidth(),e.getHeight())}]}]}]}]}])}},{key:"setDrawingConfiguration",value:function(t,e,a,o,n){var r=this.measurement;return r.x=t,r.y=e,r.width=a,r.height=o,this.parentGroup=n,this}},{key:"draw",value:function(t,e,a,o,n){var r,i,s,l=this.measurement,h=this.toolbars,c=this.globalReactiveModel,u=this;if(console.log(c),t=void 0===t?l.x:t,e=void 0===e?l.y:e,a=void 0===a?l.width:a,o=void 0===o?l.height:o,n=void 0===n?this.parentGroup:n,a&&o)for(i=0,r=h.length;i<r;i++)s=h[i],s.draw(t,e,n);c.onPropsChange(["x-axis-visible-range-start","x-axis-visible-range-end"],function(t,e){u.fromDate.blur(new Date(t[1]).toLocaleDateString()),u.toDate.blur(new Date(e[1]).toLocaleDateString())})}},{key:"startDate",get:function(){return this.startDt},set:function(t){var e=+new Date(t);e<=this.endDt&&(this.startDt=e,this.globalReactiveModel.model["x-axis-visible-range-start"]=this.startDt)}},{key:"endDate",get:function(){return this.endDt},set:function(t){var e=+new Date(t);e>=this.startDt&&(this.endDt=e,this.globalReactiveModel.model["x-axis-visible-range-end"]=this.endDt)}}]),e}();return e}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIDRlZDRiOTI5NTM5MDNkYjE1YTQ1Iiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1kYXRlcmFuZ2UuanMiXSwibmFtZXMiOlsibW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImluc3RhbGxlZE1vZHVsZXMiLCJleHBvcnRzIiwibW9kdWxlIiwiaWQiLCJsb2FkZWQiLCJjYWxsIiwibSIsImMiLCJwIiwiX3R5cGVvZiIsIlN5bWJvbCIsIml0ZXJhdG9yIiwib2JqIiwiY29uc3RydWN0b3IiLCJwcm90b3R5cGUiLCJEYXRlUmFuZ2UiLCJ3aW5kb3ciLCJkciIsImVudiIsImZhY3RvcnkiLCJkb2N1bWVudCIsIndpbiIsIkVycm9yIiwiRGF0ZVJhbmdlQ2hvb3NlciIsInVuZGVmaW5lZCIsIl93aW5kb3ciLCJ3aW5kb3dFeGlzdHMiLCJGQyIsIkZ1c2lvbkNoYXJ0cyIsInJlZ2lzdGVyIiwicmVnaXN0ZXJDb21wb25lbnQiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxkcmVuIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJkZXAiLCJ0aGlzIiwic3RhcnREdCIsImVuZER0Iiwic3RhcnREYXRhc2V0IiwiZW5kRGF0YXNldCIsInRvb2xib3giLCJnZXRDb21wb25lbnQiLCJIb3Jpem9udGFsVG9vbGJhciIsIkNvbXBvbmVudEdyb3VwIiwiU3ltYm9sU3RvcmUiLCJzdGFydFRleHQiLCJhdHRyIiwiZW5kVGV4dCIsInZhbHVlIiwidGVtcCIsImRhdGVSYW5nZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJ0aW1lc3RhbXAiLCJjaGFydCIsImdldEZvcm1hdHRlZERhdGUiLCJkYXRlU3RyaW5nIiwiZ2V0VGltZXN0YW1wIiwiY29uZmlnT2JqIiwiY2FsZW5kYXJWaXNpYmxlIiwicmVxdWlyZSIsInhBeGlzIiwieUF4aXMiLCJncmFwaGljcyIsImRhdGFzZXQiLCJwbG90TWFuYWdlciIsImNhbnZhc0NvbmZpZyIsIm1hcmtlck1hbmFnZXIiLCJyZWFjdGl2ZU1vZGVsIiwiZ2xvYmFsUmVhY3RpdmVNb2RlbCIsInNwYWNlTWFuYWdlckluc3RhbmNlIiwic21hcnRMYWJlbCIsIm1vZGVsIiwidG9vbGJhcnMiLCJtZWFzdXJlbWVudCIsInB1c2giLCJjcmVhdGVUb29sYmFyIiwidG9vbGJhciIsImZyb21EYXRlTGFiZWwiLCJ0b0RhdGVMYWJlbCIsImdyb3VwIiwiZnJvbUZvcm1hdHRlZERhdGUiLCJ0b0Zvcm1hdHRlZERhdGUiLCJzZWxmIiwiZnJvbURhdGUiLCJ0b0RhdGUiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwicGFwZXIiLCJjaGFydENvbnRhaW5lciIsImNvbnRhaW5lciIsInNldENvbmZpZyIsImZpbGwiLCJib3JkZXJUaGlja25lc3MiLCJMYWJlbCIsInRleHQiLCJzdHlsZSIsImZvbnQtc2l6ZSIsImZvbnQtZmFtaWx5IiwiSW5wdXRUZXh0Qm94U3ltYm9sIiwid2lkdGgiLCJoZWlnaHQiLCJzdHJva2VXaWR0aCIsInN0cm9rZSIsInN5bWJvbFN0cm9rZVdpZHRoIiwibWFyZ2luIiwicmlnaHQiLCJidG5UZXh0U3R5bGUiLCJmb250U2l6ZSIsImxhYmVsIiwiYXR0YWNoRXZlbnRIYW5kbGVycyIsImNsaWNrIiwiZm4iLCJlZGl0IiwidGV4dE9uQmx1ciIsImJsdXIiLCJnZXRUZXh0IiwiY29uc29sZSIsImxvZyIsIngiLCJ5IiwicmFkIiwidyIsImgiLCJwYWRYIiwicGFkWSIsIngxIiwieDIiLCJ5MSIsInkyIiwiYWRkU3ltYm9sIiwiYWRkQ29tcG9uZW50IiwiYXZhaWxhYmxlV2lkdGgiLCJhdmFpbGFibGVIZWlnaHQiLCJsb2dpY2FsU3BhY2UiLCJsbiIsImdldExvZ2ljYWxTcGFjZSIsIk1hdGgiLCJtYXgiLCJwYWRkaW5nIiwiYWRkIiwibmFtZSIsInJlZiIsInByaW9yaXR5IiwibGF5b3V0IiwiaW5saW5lIiwib3JpZW50YXRpb24iLCJ0eXBlIiwiaG9yaXpvbnRhbCIsInBvc2l0aW9uIiwidG9wIiwiYWxpZ25tZW50IiwiZGltZW5zaW9ucyIsInBhcmVudCIsImdldFBhcmVudENvbXBvbmVudEdyb3VwIiwiZ2V0V2lkdGgiLCJnZXRIZWlnaHQiLCJtZXMiLCJwYXJlbnRHcm91cCIsImRyYXciLCJvblByb3BzQ2hhbmdlIiwic3RhcnQiLCJlbmQiLCJnZXQiLCJzZXQiLCJzdGFydFRpbWVzdGFtcCIsImVuZFRpbWVzdGFtcCJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsR0NJbkIsUUFBQUMsR0FBQUMsR0FHQSxHQUFBQyxFQUFBRCxHQUNBLE1BQUFDLEdBQUFELEdBQUFFLE9BR0EsSUFBQUMsR0FBQUYsRUFBQUQsSUFDQUUsV0FDQUUsR0FBQUosRUFDQUssUUFBQSxFQVVBLE9BTkFQLEdBQUFFLEdBQUFNLEtBQUFILEVBQUFELFFBQUFDLElBQUFELFFBQUFILEdBR0FJLEVBQUFFLFFBQUEsRUFHQUYsRUFBQUQsUUF2QkEsR0FBQUQsS0FxQ0EsT0FUQUYsR0FBQVEsRUFBQVQsRUFHQUMsRUFBQVMsRUFBQVAsRUFHQUYsRUFBQVUsRUFBQSxHQUdBVixFQUFBLEtETU0sU0FBU0ksRUFBUUQsRUFBU0gsSUU1Q2hDLFNBQUFJLEdBQUEsWUZnREMsSUFBSU8sR0FB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TUFBSzRFLEVBQUksSUFBSTNFLDJCQWpaVnhELElBQUEsWUFBQW9JLElBQUEsV0E0QjFCLE1BQU9oSSxNQUFLQyxTQTVCY2dJLElBQUEsU0ErQmJoSSxHQUNiLEdBQUlpSSxJQUFrQixHQUFJL0UsTUFBS2xELEVBQzNCaUksSUFBa0JsSSxLQUFLRSxRQUN6QkYsS0FBS0MsUUFBVWlJLEVBQ2ZsSSxLQUFLa0Msb0JBQW9CRyxNQUFNLDhCQUFnQ3JDLEtBQUtDLFlBbkM1Q0wsSUFBQSxVQUFBb0ksSUFBQSxXQXdDMUIsTUFBT2hJLE1BQUtFLE9BeENjK0gsSUFBQSxTQTJDZi9ILEdBQ1gsR0FBSWlJLElBQWdCLEdBQUloRixNQUFLakQsRUFDekJpSSxJQUFnQm5JLEtBQUtDLFVBQ3ZCRCxLQUFLRSxNQUFRaUksRUFDYm5JLEtBQUtrQyxvQkFBb0JHLE1BQU0sNEJBQThCckMsS0FBS0UsV0EvQzFDMUMsSUFxWjlCLE9BQU9BIiwiZmlsZSI6ImZjdHMtZXh0LWRhdGVyYW5nZS1lczUubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqKioqKi8gKGZ1bmN0aW9uKG1vZHVsZXMpIHsgLy8gd2VicGFja0Jvb3RzdHJhcFxuLyoqKioqKi8gXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuLyoqKioqKi8gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuLyoqKioqKi8gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0ZXhwb3J0czoge30sXG4vKioqKioqLyBcdFx0XHRpZDogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubG9hZGVkID0gdHJ1ZTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbi8qKioqKiovIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4vKioqKioqLyBcdH1cbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi8oZnVuY3Rpb24obW9kdWxlKSB7J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIF90eXBlb2YgPSB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIFN5bWJvbC5pdGVyYXRvciA9PT0gXCJzeW1ib2xcIiA/IGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIHR5cGVvZiBvYmo7IH0gOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogJiYgdHlwZW9mIFN5bWJvbCA9PT0gXCJmdW5jdGlvblwiICYmIG9iai5jb25zdHJ1Y3RvciA9PT0gU3ltYm9sICYmIG9iaiAhPT0gU3ltYm9sLnByb3RvdHlwZSA/IFwic3ltYm9sXCIgOiB0eXBlb2Ygb2JqOyB9O1xuXHRcblx0dmFyIERhdGVSYW5nZSA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdFxuXHR3aW5kb3cuZHIgPSBuZXcgRGF0ZVJhbmdlKCk7XG5cdFxuXHQ7KGZ1bmN0aW9uIChlbnYsIGZhY3RvcnkpIHtcblx0ICBpZiAoKCBmYWxzZSA/ICd1bmRlZmluZWQnIDogX3R5cGVvZihtb2R1bGUpKSA9PT0gJ29iamVjdCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0ICAgIG1vZHVsZS5leHBvcnRzID0gZW52LmRvY3VtZW50ID8gZmFjdG9yeShlbnYpIDogZnVuY3Rpb24gKHdpbikge1xuXHQgICAgICBpZiAoIXdpbi5kb2N1bWVudCkge1xuXHQgICAgICAgIHRocm93IG5ldyBFcnJvcignV2luZG93IHdpdGggZG9jdW1lbnQgbm90IHByZXNlbnQnKTtcblx0ICAgICAgfVxuXHQgICAgICByZXR1cm4gZmFjdG9yeSh3aW4sIHRydWUpO1xuXHQgICAgfTtcblx0ICB9IGVsc2Uge1xuXHQgICAgZW52LkRhdGVSYW5nZUNob29zZXIgPSBmYWN0b3J5KGVudiwgdHJ1ZSk7XG5cdCAgfVxuXHR9KSh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHVuZGVmaW5lZCwgZnVuY3Rpb24gKF93aW5kb3csIHdpbmRvd0V4aXN0cykge1xuXHQgIHZhciBGQyA9IF93aW5kb3cuRnVzaW9uQ2hhcnRzO1xuXHQgIEZDLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ3ByaXZhdGUnLCAnRGF0ZVJhbmdlQ2hvb3NlcicsIGZ1bmN0aW9uICgpIHtcblx0ICAgIEZDLnJlZ2lzdGVyQ29tcG9uZW50KCdleHRlbnNpb25zJywgJ0RhdGVSYW5nZUNob29zZXInLCBEYXRlUmFuZ2UoeyBGdXNpb25DaGFydHM6IEZDIH0pKTtcblx0ICB9XSk7XG5cdH0pO1xuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXygxKShtb2R1bGUpKSlcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XG5cdFx0aWYoIW1vZHVsZS53ZWJwYWNrUG9seWZpbGwpIHtcblx0XHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdFx0bW9kdWxlLnBhdGhzID0gW107XG5cdFx0XHQvLyBtb2R1bGUucGFyZW50ID0gdW5kZWZpbmVkIGJ5IGRlZmF1bHRcblx0XHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XG5cdFx0fVxuXHRcdHJldHVybiBtb2R1bGU7XG5cdH1cblxuXG4vKioqLyB9LFxuLyogMiAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHQvKipcblx0ICogQ2xhc3MgcmVwcmVzZW50aW5nIHRoZSBEYXRlUmFuZ2UuXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHRtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcblx0ICB2YXIgRGF0ZVJhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgICAgZnVuY3Rpb24gRGF0ZVJhbmdlKCkge1xuXHQgICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0ZVJhbmdlKTtcblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgKi9cblx0XG5cdCAgICAgIHRoaXMuc3RhcnREdCA9IDA7XG5cdCAgICAgIHRoaXMuZW5kRHQgPSAwO1xuXHQgICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IDA7XG5cdCAgICAgIHRoaXMuZW5kRGF0YXNldCA9IDA7XG5cdCAgICAgIHRoaXMudG9vbGJveCA9IGRlcC5GdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHQgICAgICB0aGlzLkhvcml6b250YWxUb29sYmFyID0gdGhpcy50b29sYm94Lkhvcml6b250YWxUb29sYmFyO1xuXHQgICAgICB0aGlzLkNvbXBvbmVudEdyb3VwID0gdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwO1xuXHQgICAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuXHQgICAgICB0aGlzLnN0YXJ0VGV4dCA9IHtcblx0ICAgICAgICBhdHRyOiBmdW5jdGlvbiBhdHRyKCkge31cblx0ICAgICAgfTtcblx0ICAgICAgdGhpcy5lbmRUZXh0ID0ge1xuXHQgICAgICAgIGF0dHI6IGZ1bmN0aW9uIGF0dHIoKSB7fVxuXHQgICAgICB9O1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhcnQgYW5kIGVuZCBkYXRlcy5cblx0ICAgICAqIEB0eXBlIHtEYXRlUmFuZ2UucmFuZ2V9XG5cdCAgICAgKi9cblx0XG5cdFxuXHQgICAgX2NyZWF0ZUNsYXNzKERhdGVSYW5nZSwgW3tcblx0ICAgICAga2V5OiAnc3dhcERhdGVzJyxcblx0XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogU3dhcHMgdGhlIHN0YXJ0IGRhdGUgYW5kIHRoZSBlbmQgZGF0ZSBvZiB0aGUgZGF0ZSByYW5nZVxuXHQgICAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICAgKi9cblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN3YXBEYXRlcygpIHtcblx0ICAgICAgICB2YXIgdGVtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcblx0ICAgICAgICB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGUgPSB0aGlzLmRhdGVSYW5nZS5lbmREYXRlO1xuXHQgICAgICAgIHRoaXMuZGF0ZVJhbmdlLmVuZERhdGUgPSB0ZW1wO1xuXHQgICAgICB9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogU3luY3MgdGhlIGRhdGVyYW5nZSBzaG93biBieSB0aGUgRnVzaW9uQ2hhcnRzIHRpbWUgc2VyaWVzIGNoYXJ0IGFuZCB0aGUgRGF0ZSBSYW5nZSBDaG9vc2VyXG5cdCAgICAgICAqIEBwcml2YXRlXG5cdCAgICAgICAqL1xuXHRcblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnc3luY1JhbmdlJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN5bmNSYW5nZSgpIHt9XG5cdFxuXHQgICAgICAvKipcblx0ICAgICAgICogUmV0dXJucyBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgVU5JWCB0aW1lc3RhbXBcblx0ICAgICAgICogQHBhcmFtICB7bnVtYmVyfSB0aW1lc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIGNvbnZlcnRlZCB0byBhIGRhdGUgc3RyaW5nXG5cdCAgICAgICAqIEByZXR1cm4ge3N0cmluZ30gLSBBIGRhdGUgc3RyaW5nIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcFxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldEZvcm1hdHRlZERhdGUnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkRGF0ZSh0aW1lc3RhbXApIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5jaGFydC5nZXRGb3JtYXR0ZWREYXRlKHRpbWVzdGFtcCk7XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBSZXR1cm5zIGEgVU5JWCB0aW1lc3RhbXAgZnJvbSBGdXNpb25DaGFydHMgd2hlbiBnaXZlbiBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZ1xuXHQgICAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGRhdGVTdHJpbmcgLSBBIGRhdGUgc3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byBhIFVOSVggdGltZXN0YW1wXG5cdCAgICAgICAqIEByZXR1cm4ge251bWJlcn0gQSBVTklYIHRpbWVzdGFtcCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBkYXRlIHN0cmluZ1xuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldFRpbWVzdGFtcCcsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRUaW1lc3RhbXAoZGF0ZVN0cmluZykge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldFRpbWVzdGFtcChkYXRlU3RyaW5nKTtcblx0ICAgICAgfVxuXHRcblx0ICAgICAgLyoqXG5cdCAgICAgICAqIFNldHMgdGhlIGNvbmZpZ3VyYWJsZSBvcHRpb25zIG9mIHRoZSBleHRlbnNpb24gKGUuZy4gY29zbWV0aWNzKVxuXHQgICAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcblx0ICAgICAgICovXG5cdFxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzZXRDb25maWcnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0Q29uZmlnKGNvbmZpZ09iaikge31cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBHZXRzIHRoZSBjb25maWd1cmFibGUgb3B0aW9ucyBvZiB0aGUgZXh0ZW5zaW9uIChlLmcuIGNvc21ldGljcylcblx0ICAgICAgICogQHJldHVybiB7b2JqZWN0fSBjb25maWdPYmogVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaW91cyBleHRlbnNpb24gb3B0aW9uc1xuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2dldENvbmZpZycsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRDb25maWcoKSB7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIGNhbGVuZGFyVmlzaWJsZTogJ2ZhbHNlJ1xuXHQgICAgICAgIH07XG5cdCAgICAgIH1cblx0XG5cdCAgICAgIC8qKlxuXHQgICAgICAgKiBGdXNpb25jaGFydHMgbGlmZSBjeWNsZSBtZXRob2QgZm9yIGV4dGVuc2lvblxuXHQgICAgICAgKi9cblx0XG5cdCAgICB9LCB7XG5cdCAgICAgIGtleTogJ2luaXQnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChyZXF1aXJlKSB7XG5cdCAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcblx0ICAgICAgICByZXF1aXJlKFsneEF4aXMnLCAneUF4aXMnLCAnZ3JhcGhpY3MnLCAnY2hhcnQnLCAnZGF0YXNldCcsICdQbG90TWFuYWdlcicsICdjYW52YXNDb25maWcnLCAnTWFya2VyTWFuYWdlcicsICdyZWFjdGl2ZU1vZGVsJywgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLCAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLCAnc21hcnRMYWJlbCcsICdjaGFydEluc3RhbmNlJywgZnVuY3Rpb24gKHhBeGlzLCB5QXhpcywgZ3JhcGhpY3MsIGNoYXJ0LCBkYXRhc2V0LCBwbG90TWFuYWdlciwgY2FudmFzQ29uZmlnLCBtYXJrZXJNYW5hZ2VyLCByZWFjdGl2ZU1vZGVsLCBnbG9iYWxSZWFjdGl2ZU1vZGVsLCBzcGFjZU1hbmFnZXJJbnN0YW5jZSwgc21hcnRMYWJlbCkge1xuXHQgICAgICAgICAgaW5zdGFuY2UueEF4aXMgPSB4QXhpcztcblx0ICAgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG5cdCAgICAgICAgICBpbnN0YW5jZS5ncmFwaGljcyA9IGdyYXBoaWNzO1xuXHQgICAgICAgICAgaW5zdGFuY2UuY2hhcnQgPSBjaGFydDtcblx0ICAgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuXHQgICAgICAgICAgaW5zdGFuY2UucGxvdE1hbmFnZXIgPSBwbG90TWFuYWdlcjtcblx0ICAgICAgICAgIGluc3RhbmNlLm1hcmtlck1hbmFnZXIgPSBtYXJrZXJNYW5hZ2VyO1xuXHQgICAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuXHQgICAgICAgICAgaW5zdGFuY2UucmVhY3RpdmVNb2RlbCA9IHJlYWN0aXZlTW9kZWw7XG5cdCAgICAgICAgICBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gZ2xvYmFsUmVhY3RpdmVNb2RlbDtcblx0ICAgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG5cdCAgICAgICAgICBpbnN0YW5jZS5zbWFydExhYmVsID0gc21hcnRMYWJlbDtcblx0ICAgICAgICB9XSk7XG5cdCAgICAgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuXHQgICAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWw7XG5cdCAgICAgICAgdGhpcy5zdGFydER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgICAgICB0aGlzLmVuZER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2Utc3RhcnQnXTtcblx0ICAgICAgICB0aGlzLmVuZERhdGFzZXQgPSBpbnN0YW5jZS5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtYWJzb2x1dGUtcmFuZ2UtZW5kJ107XG5cdCAgICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuXHQgICAgICAgIHRoaXMubWVhc3VyZW1lbnQgPSB7fTtcblx0ICAgICAgICB0aGlzLnRvb2xiYXJzLnB1c2godGhpcy5jcmVhdGVUb29sYmFyKCkpO1xuXHQgICAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcblx0ICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGVTdGFydCwgdGhpcy5kYXRlRW5kKTtcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdjcmVhdGVUb29sYmFyJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNyZWF0ZVRvb2xiYXIoKSB7XG5cdCAgICAgICAgdmFyIHRvb2xiYXIsXG5cdCAgICAgICAgICAgIHNlbGYgPSB0aGlzLFxuXHQgICAgICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuXHQgICAgICAgICAgICB0b0RhdGVMYWJlbCxcblx0ICAgICAgICAgICAgZ3JvdXAsXG5cdCAgICAgICAgICAgIGZyb21Gb3JtYXR0ZWREYXRlLFxuXHQgICAgICAgICAgICB0b0Zvcm1hdHRlZERhdGU7XG5cdFxuXHQgICAgICAgIHNlbGYuZnJvbURhdGUgPSB7fTtcblx0ICAgICAgICBzZWxmLnRvRGF0ZSA9IHt9O1xuXHRcblx0ICAgICAgICBmcm9tRm9ybWF0dGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMuc3RhcnREdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG5cdFxuXHQgICAgICAgIHRvRm9ybWF0dGVkRGF0ZSA9IG5ldyBEYXRlKHRoaXMuZW5kRHQpLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuXHRcblx0ICAgICAgICB0b29sYmFyID0gbmV3IHRoaXMuSG9yaXpvbnRhbFRvb2xiYXIoe1xuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0b29sYmFyLnNldENvbmZpZyh7XG5cdCAgICAgICAgICBmaWxsOiAnI2ZmZicsXG5cdCAgICAgICAgICBib3JkZXJUaGlja25lc3M6IDBcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgZ3JvdXAuc2V0Q29uZmlnKHtcblx0ICAgICAgICAgIGZpbGw6ICcjZmZmJyxcblx0ICAgICAgICAgIGJvcmRlclRoaWNrbmVzczogMFxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICBmcm9tRGF0ZUxhYmVsID0gbmV3IHRoaXMudG9vbGJveC5MYWJlbCgnRnJvbTonLCB7XG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIHRleHQ6IHtcblx0ICAgICAgICAgICAgc3R5bGU6IHtcblx0ICAgICAgICAgICAgICAnZm9udC1zaXplJzogJzE1Jyxcblx0ICAgICAgICAgICAgICAnZm9udC1mYW1pbHknOiAnTXlyaWFkUHJvJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHNlbGYuZnJvbURhdGUgPSBuZXcgdGhpcy50b29sYm94LklucHV0VGV4dEJveFN5bWJvbCh7XG5cdCAgICAgICAgICB3aWR0aDogODAsXG5cdCAgICAgICAgICBoZWlnaHQ6IDIyXG5cdCAgICAgICAgfSwge1xuXHQgICAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG5cdCAgICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcblx0ICAgICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcblx0ICAgICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIHN0cm9rZVdpZHRoOiAxLFxuXHQgICAgICAgICAgc3Ryb2tlOiAncmdiYSgxMDIsMTAyLDEwMiwwLjUpJyxcblx0ICAgICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAwLFxuXHQgICAgICAgICAgbWFyZ2luOiB7XG5cdCAgICAgICAgICAgIHJpZ2h0OiAyMlxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICBmb250U2l6ZTogMTRcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYWJlbDogZnJvbUZvcm1hdHRlZERhdGVcblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgdG9EYXRlTGFiZWwgPSBuZXcgdGhpcy50b29sYm94LkxhYmVsKCdUbzonLCB7XG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIHRleHQ6IHtcblx0ICAgICAgICAgICAgc3R5bGU6IHtcblx0ICAgICAgICAgICAgICAnZm9udC1zaXplJzogJzE1Jyxcblx0ICAgICAgICAgICAgICAnZm9udC1mYW1pbHknOiAnTXlyaWFkUHJvJ1xuXHQgICAgICAgICAgICB9XG5cdCAgICAgICAgICB9XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHNlbGYudG9EYXRlID0gbmV3IHRoaXMudG9vbGJveC5JbnB1dFRleHRCb3hTeW1ib2woe1xuXHQgICAgICAgICAgd2lkdGg6IDgwLFxuXHQgICAgICAgICAgaGVpZ2h0OiAyMlxuXHQgICAgICAgIH0sIHtcblx0ICAgICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuXHQgICAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG5cdCAgICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG5cdCAgICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcblx0ICAgICAgICB9LCB7XG5cdCAgICAgICAgICBzdHJva2VXaWR0aDogMSxcblx0ICAgICAgICAgIHN0cm9rZTogJ3JnYmEoMTAyLDEwMiwxMDIsMC41KScsXG5cdCAgICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogMCxcblx0ICAgICAgICAgIGJ0blRleHRTdHlsZToge1xuXHQgICAgICAgICAgICBmb250U2l6ZTogMTRcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYWJlbDogdG9Gb3JtYXR0ZWREYXRlXG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIHNlbGYuZnJvbURhdGUuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICBjbGljazoge1xuXHQgICAgICAgICAgICBmbjogc2VsZi5mcm9tRGF0ZS5lZGl0XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgdGV4dE9uQmx1cjogZnVuY3Rpb24gdGV4dE9uQmx1cigpIHtcblx0ICAgICAgICAgICAgc2VsZi5mcm9tRGF0ZS5ibHVyKCk7XG5cdCAgICAgICAgICAgIHNlbGYuc3RhcnREYXRlID0gc2VsZi5mcm9tRGF0ZS5nZXRUZXh0KCk7XG5cdCAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYuZnJvbURhdGUuZ2V0VGV4dCgpKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9KTtcblx0XG5cdCAgICAgICAgc2VsZi50b0RhdGUuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG5cdCAgICAgICAgICBjbGljazoge1xuXHQgICAgICAgICAgICBmbjogc2VsZi50b0RhdGUuZWRpdFxuXHQgICAgICAgICAgfSxcblx0ICAgICAgICAgIHRleHRPbkJsdXI6IGZ1bmN0aW9uIHRleHRPbkJsdXIoKSB7XG5cdCAgICAgICAgICAgIHNlbGYudG9EYXRlLmJsdXIoKTtcblx0ICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZi50b0RhdGUuZ2V0VGV4dCgpKTtcblx0ICAgICAgICAgICAgc2VsZi5lbmREYXRlID0gc2VsZi50b0RhdGUuZ2V0VGV4dCgpO1xuXHQgICAgICAgICAgfVxuXHQgICAgICAgIH0pO1xuXHRcblx0ICAgICAgICB0aGlzLlN5bWJvbFN0b3JlLnJlZ2lzdGVyKCd0ZXh0Qm94SWNvbicsIGZ1bmN0aW9uICh4LCB5LCByYWQsIHcsIGgsIHBhZFgsIHBhZFkpIHtcblx0ICAgICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuXHQgICAgICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG5cdCAgICAgICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcblx0ICAgICAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXHRcblx0ICAgICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG5cdCAgICAgICAgfSk7XG5cdFxuXHQgICAgICAgIGdyb3VwLmFkZFN5bWJvbChmcm9tRGF0ZUxhYmVsKTtcblx0ICAgICAgICBncm91cC5hZGRTeW1ib2woc2VsZi5mcm9tRGF0ZSk7XG5cdCAgICAgICAgZ3JvdXAuYWRkU3ltYm9sKHRvRGF0ZUxhYmVsKTtcblx0ICAgICAgICBncm91cC5hZGRTeW1ib2woc2VsZi50b0RhdGUpO1xuXHQgICAgICAgIHRvb2xiYXIuYWRkQ29tcG9uZW50KGdyb3VwKTtcblx0ICAgICAgICByZXR1cm4gdG9vbGJhcjtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdnZXRMb2dpY2FsU3BhY2UnLFxuXHQgICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0TG9naWNhbFNwYWNlKGF2YWlsYWJsZVdpZHRoLCBhdmFpbGFibGVIZWlnaHQpIHtcblx0ICAgICAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuXHQgICAgICAgIHZhciBsb2dpY2FsU3BhY2UsXG5cdCAgICAgICAgICAgIHdpZHRoID0gMCxcblx0ICAgICAgICAgICAgaGVpZ2h0ID0gMCxcblx0ICAgICAgICAgICAgaSxcblx0ICAgICAgICAgICAgbG47XG5cdFxuXHQgICAgICAgIGZvciAoaSA9IDAsIGxuID0gdGhpcy50b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICBsb2dpY2FsU3BhY2UgPSB0aGlzLnRvb2xiYXJzW2ldLmdldExvZ2ljYWxTcGFjZShhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KTtcblx0ICAgICAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG5cdCAgICAgICAgICBoZWlnaHQgKz0gbG9naWNhbFNwYWNlLmhlaWdodDtcblx0ICAgICAgICAgIHRoaXMudG9vbGJhcnNbaV0ud2lkdGggPSBsb2dpY2FsU3BhY2Uud2lkdGg7XG5cdCAgICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICAgIGhlaWdodCArPSB0aGlzLnBhZGRpbmc7XG5cdCAgICAgICAgcmV0dXJuIHtcblx0ICAgICAgICAgIHdpZHRoOiB3aWR0aCxcblx0ICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG5cdCAgICAgICAgfTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdwbGFjZUluQ2FudmFzJyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIHBsYWNlSW5DYW52YXMoKSB7XG5cdCAgICAgICAgdmFyIF9zZWxmID0gdGhpcztcblx0ICAgICAgICBfc2VsZi5wYWRkaW5nID0gNTtcblx0ICAgICAgICBfc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcblx0ICAgICAgICAgIG5hbWU6IGZ1bmN0aW9uIG5hbWUoKSB7XG5cdCAgICAgICAgICAgIHJldHVybiAnVG9vbEJveEV4dCc7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgcmVmOiBmdW5jdGlvbiByZWYob2JqKSB7XG5cdCAgICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBzZWxmOiBmdW5jdGlvbiBzZWxmKCkge1xuXHQgICAgICAgICAgICByZXR1cm4gX3NlbGY7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgcHJpb3JpdHk6IGZ1bmN0aW9uIHByaW9yaXR5KCkge1xuXHQgICAgICAgICAgICByZXR1cm4gMjtcblx0ICAgICAgICAgIH0sXG5cdCAgICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dChvYmopIHtcblx0ICAgICAgICAgICAgcmV0dXJuIG9iai5pbmxpbmU7XG5cdCAgICAgICAgICB9LFxuXHQgICAgICAgICAgb3JpZW50YXRpb246IFt7XG5cdCAgICAgICAgICAgIHR5cGU6IGZ1bmN0aW9uIHR5cGUob2JqKSB7XG5cdCAgICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuXHQgICAgICAgICAgICB9LFxuXHQgICAgICAgICAgICBwb3NpdGlvbjogW3tcblx0ICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgcmV0dXJuIG9iai50b3A7XG5cdCAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICBhbGlnbm1lbnQ6IFt7XG5cdCAgICAgICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiB0eXBlKG9iaikge1xuXHQgICAgICAgICAgICAgICAgICByZXR1cm4gb2JqLnJpZ2h0O1xuXHQgICAgICAgICAgICAgICAgfSxcblx0ICAgICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG5cdCAgICAgICAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLmdldFBhcmVudENvbXBvbmVudEdyb3VwKCk7XG5cdCAgICAgICAgICAgICAgICAgIHJldHVybiBfc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG5cdCAgICAgICAgICAgICAgICB9XVxuXHQgICAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICAgIH1dXG5cdCAgICAgICAgICB9XVxuXHQgICAgICAgIH1dKTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzZXREcmF3aW5nQ29uZmlndXJhdGlvbicsXG5cdCAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXREcmF3aW5nQ29uZmlndXJhdGlvbih4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuXHQgICAgICAgIHZhciBtZXMgPSB0aGlzLm1lYXN1cmVtZW50O1xuXHQgICAgICAgIG1lcy54ID0geDtcblx0ICAgICAgICBtZXMueSA9IHk7XG5cdCAgICAgICAgbWVzLndpZHRoID0gd2lkdGg7XG5cdCAgICAgICAgbWVzLmhlaWdodCA9IGhlaWdodDtcblx0XG5cdCAgICAgICAgdGhpcy5wYXJlbnRHcm91cCA9IGdyb3VwO1xuXHRcblx0ICAgICAgICByZXR1cm4gdGhpcztcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdkcmF3Jyxcblx0ICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoeCwgeSwgd2lkdGgsIGhlaWdodCwgZ3JvdXApIHtcblx0ICAgICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuXHQgICAgICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG5cdCAgICAgICAgICAgIGxuLFxuXHQgICAgICAgICAgICBpLFxuXHQgICAgICAgICAgICB0b29sYmFyLFxuXHQgICAgICAgICAgICBtb2RlbCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCxcblx0ICAgICAgICAgICAgc2VsZiA9IHRoaXM7XG5cdCAgICAgICAgY29uc29sZS5sb2cobW9kZWwpO1xuXHQgICAgICAgIHggPSB4ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC54IDogeDtcblx0ICAgICAgICB5ID0geSA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueSA6IHk7XG5cdCAgICAgICAgd2lkdGggPSB3aWR0aCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQud2lkdGggOiB3aWR0aDtcblx0ICAgICAgICBoZWlnaHQgPSBoZWlnaHQgPT09IHVuZGVmaW5lZCA/IG1lYXN1cmVtZW50LmhlaWdodCA6IGhlaWdodDtcblx0ICAgICAgICBncm91cCA9IGdyb3VwID09PSB1bmRlZmluZWQgPyB0aGlzLnBhcmVudEdyb3VwIDogZ3JvdXA7XG5cdCAgICAgICAgaWYgKHdpZHRoICYmIGhlaWdodCkge1xuXHQgICAgICAgICAgZm9yIChpID0gMCwgbG4gPSB0b29sYmFycy5sZW5ndGg7IGkgPCBsbjsgaSsrKSB7XG5cdCAgICAgICAgICAgIHRvb2xiYXIgPSB0b29sYmFyc1tpXTtcblx0ICAgICAgICAgICAgdG9vbGJhci5kcmF3KHgsIHksIGdyb3VwKTtcblx0ICAgICAgICAgIH1cblx0ICAgICAgICB9XG5cdFxuXHQgICAgICAgIG1vZGVsLm9uUHJvcHNDaGFuZ2UoWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCcsICd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSwgZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcblx0ICAgICAgICAgIHNlbGYuZnJvbURhdGUuYmx1cihuZXcgRGF0ZShzdGFydFsxXSkudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xuXHQgICAgICAgICAgc2VsZi50b0RhdGUuYmx1cihuZXcgRGF0ZShlbmRbMV0pLnRvTG9jYWxlRGF0ZVN0cmluZygpKTtcblx0ICAgICAgICB9KTtcblx0ICAgICAgfVxuXHQgICAgfSwge1xuXHQgICAgICBrZXk6ICdzdGFydERhdGUnLFxuXHQgICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHtcblx0ICAgICAgICByZXR1cm4gdGhpcy5zdGFydER0O1xuXHQgICAgICB9LFxuXHQgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChzdGFydER0KSB7XG5cdCAgICAgICAgdmFyIHN0YXJ0VGltZXN0YW1wID0gK25ldyBEYXRlKHN0YXJ0RHQpO1xuXHQgICAgICAgIGlmIChzdGFydFRpbWVzdGFtcCA8PSB0aGlzLmVuZER0KSB7XG5cdCAgICAgICAgICB0aGlzLnN0YXJ0RHQgPSBzdGFydFRpbWVzdGFtcDtcblx0ICAgICAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2Utc3RhcnQnXSA9IHRoaXMuc3RhcnREdDtcblx0ICAgICAgICB9XG5cdCAgICAgIH1cblx0ICAgIH0sIHtcblx0ICAgICAga2V5OiAnZW5kRGF0ZScsXG5cdCAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuXHQgICAgICAgIHJldHVybiB0aGlzLmVuZER0O1xuXHQgICAgICB9LFxuXHQgICAgICBzZXQ6IGZ1bmN0aW9uIHNldChlbmREdCkge1xuXHQgICAgICAgIHZhciBlbmRUaW1lc3RhbXAgPSArbmV3IERhdGUoZW5kRHQpO1xuXHQgICAgICAgIGlmIChlbmRUaW1lc3RhbXAgPj0gdGhpcy5zdGFydER0KSB7XG5cdCAgICAgICAgICB0aGlzLmVuZER0ID0gZW5kVGltZXN0YW1wO1xuXHQgICAgICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsLm1vZGVsWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSA9IHRoaXMuZW5kRHQ7XG5cdCAgICAgICAgfVxuXHQgICAgICB9XG5cdCAgICB9XSk7XG5cdFxuXHQgICAgcmV0dXJuIERhdGVSYW5nZTtcblx0ICB9KCk7XG5cdFxuXHQgIHJldHVybiBEYXRlUmFuZ2U7XG5cdH07XG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyBmY3RzLWV4dC1kYXRlcmFuZ2UtZXM1Lm1pbi5qcyIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKVxuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuXG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRleHBvcnRzOiB7fSxcbiBcdFx0XHRpZDogbW9kdWxlSWQsXG4gXHRcdFx0bG9hZGVkOiBmYWxzZVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sb2FkZWQgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIHdlYnBhY2svYm9vdHN0cmFwIDRlZDRiOTI5NTM5MDNkYjE1YTQ1IiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgRGF0ZVJhbmdlID0gcmVxdWlyZSgnLi9mY3RzLWV4dC1kYXRlcmFuZ2UnKTtcblxud2luZG93LmRyID0gbmV3IERhdGVSYW5nZSgpO1xuXG47KGZ1bmN0aW9uIChlbnYsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgPT09ICdvYmplY3QnICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBlbnYuZG9jdW1lbnRcbiAgICAgICA/IGZhY3RvcnkoZW52KSA6IGZ1bmN0aW9uICh3aW4pIHtcbiAgICAgICAgIGlmICghd2luLmRvY3VtZW50KSB7XG4gICAgICAgICAgIHRocm93IG5ldyBFcnJvcignV2luZG93IHdpdGggZG9jdW1lbnQgbm90IHByZXNlbnQnKTtcbiAgICAgICAgIH1cbiAgICAgICAgIHJldHVybiBmYWN0b3J5KHdpbiwgdHJ1ZSk7XG4gICAgICAgfTtcbiAgfSBlbHNlIHtcbiAgICBlbnYuRGF0ZVJhbmdlQ2hvb3NlciA9IGZhY3RvcnkoZW52LCB0cnVlKTtcbiAgfVxufSkodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiAoX3dpbmRvdywgd2luZG93RXhpc3RzKSB7XG4gIHZhciBGQyA9IF93aW5kb3cuRnVzaW9uQ2hhcnRzO1xuICBGQy5yZWdpc3RlcignZXh0ZW5zaW9uJywgWydwcml2YXRlJywgJ0RhdGVSYW5nZUNob29zZXInLCBmdW5jdGlvbiAoKSB7XG4gICAgRkMucmVnaXN0ZXJDb21wb25lbnQoJ2V4dGVuc2lvbnMnLCAnRGF0ZVJhbmdlQ2hvb3NlcicsIERhdGVSYW5nZSh7RnVzaW9uQ2hhcnRzOiBGQ30pKTtcbiAgfV0pO1xufSk7XG5cblxuXG4vLyBXRUJQQUNLIEZPT1RFUiAvL1xuLy8gLi9zcmMvaW5kZXguanMiLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuXHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xuXHRcdG1vZHVsZS5kZXByZWNhdGUgPSBmdW5jdGlvbigpIHt9O1xuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xuXHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxuXHRcdG1vZHVsZS5jaGlsZHJlbiA9IFtdO1xuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xuXHR9XG5cdHJldHVybiBtb2R1bGU7XG59XG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAod2VicGFjaykvYnVpbGRpbi9tb2R1bGUuanNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgdGhlIERhdGVSYW5nZS5cbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChkZXApIHtcbiAgY2xhc3MgRGF0ZVJhbmdlIHtcbiAgICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgICAvKipcbiAgICAgICAqIEBwcml2YXRlXG4gICAgICAgKi9cblxuICAgICAgdGhpcy5zdGFydER0ID0gMDtcbiAgICAgIHRoaXMuZW5kRHQgPSAwO1xuICAgICAgdGhpcy5zdGFydERhdGFzZXQgPSAwO1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gMDtcbiAgICAgIHRoaXMudG9vbGJveCA9IGRlcC5GdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuICAgICAgdGhpcy5Ib3Jpem9udGFsVG9vbGJhciA9IHRoaXMudG9vbGJveC5Ib3Jpem9udGFsVG9vbGJhcjtcbiAgICAgIHRoaXMuQ29tcG9uZW50R3JvdXAgPSB0aGlzLnRvb2xib3guQ29tcG9uZW50R3JvdXA7XG4gICAgICB0aGlzLlN5bWJvbFN0b3JlID0gdGhpcy50b29sYm94LlN5bWJvbFN0b3JlO1xuICAgICAgdGhpcy5zdGFydFRleHQgPSB7XG4gICAgICAgIGF0dHI6IGZ1bmN0aW9uICgpIHt9XG4gICAgICB9O1xuICAgICAgdGhpcy5lbmRUZXh0ID0ge1xuICAgICAgICBhdHRyOiBmdW5jdGlvbiAoKSB7fVxuICAgICAgfTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzLlxuICAgICAqIEB0eXBlIHtEYXRlUmFuZ2UucmFuZ2V9XG4gICAgICovXG4gICAgZ2V0IHN0YXJ0RGF0ZSAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5zdGFydER0O1xuICAgIH1cblxuICAgIHNldCBzdGFydERhdGUgKHN0YXJ0RHQpIHtcbiAgICAgIGxldCBzdGFydFRpbWVzdGFtcCA9ICtuZXcgRGF0ZShzdGFydER0KTtcbiAgICAgIGlmIChzdGFydFRpbWVzdGFtcCA8PSB0aGlzLmVuZER0KSB7XG4gICAgICAgIHRoaXMuc3RhcnREdCA9IHN0YXJ0VGltZXN0YW1wO1xuICAgICAgICB0aGlzLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J10gPSB0aGlzLnN0YXJ0RHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZ2V0IGVuZERhdGUgKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZW5kRHQ7XG4gICAgfVxuXG4gICAgc2V0IGVuZERhdGUgKGVuZER0KSB7XG4gICAgICBsZXQgZW5kVGltZXN0YW1wID0gK25ldyBEYXRlKGVuZER0KTtcbiAgICAgIGlmIChlbmRUaW1lc3RhbXAgPj0gdGhpcy5zdGFydER0KSB7XG4gICAgICAgIHRoaXMuZW5kRHQgPSBlbmRUaW1lc3RhbXA7XG4gICAgICAgIHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ10gPSB0aGlzLmVuZER0O1xuICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFN3YXBzIHRoZSBzdGFydCBkYXRlIGFuZCB0aGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2VcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN3YXBEYXRlcyAoKSB7XG4gICAgICBsZXQgdGVtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcbiAgICAgIHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZSA9IHRoaXMuZGF0ZVJhbmdlLmVuZERhdGU7XG4gICAgICB0aGlzLmRhdGVSYW5nZS5lbmREYXRlID0gdGVtcDtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTeW5jcyB0aGUgZGF0ZXJhbmdlIHNob3duIGJ5IHRoZSBGdXNpb25DaGFydHMgdGltZSBzZXJpZXMgY2hhcnQgYW5kIHRoZSBEYXRlIFJhbmdlIENob29zZXJcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHN5bmNSYW5nZSAoKSB7fVxuXG4gICAgLyoqXG4gICAgICogUmV0dXJucyBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZyBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgVU5JWCB0aW1lc3RhbXBcbiAgICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRpbWVzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgY29udmVydGVkIHRvIGEgZGF0ZSBzdHJpbmdcbiAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IC0gQSBkYXRlIHN0cmluZyB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiB0aW1lc3RhbXBcbiAgICAgKi9cbiAgICBnZXRGb3JtYXR0ZWREYXRlICh0aW1lc3RhbXApIHtcbiAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldEZvcm1hdHRlZERhdGUodGltZXN0YW1wKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXR1cm5zIGEgVU5JWCB0aW1lc3RhbXAgZnJvbSBGdXNpb25DaGFydHMgd2hlbiBnaXZlbiBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZ1xuICAgICAqIEBwYXJhbSAge3N0cmluZ30gZGF0ZVN0cmluZyAtIEEgZGF0ZSBzdHJpbmcgdG8gYmUgY29udmVydGVkIHRvIGEgVU5JWCB0aW1lc3RhbXBcbiAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEEgVU5JWCB0aW1lc3RhbXAgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gZGF0ZSBzdHJpbmdcbiAgICAgKi9cbiAgICBnZXRUaW1lc3RhbXAgKGRhdGVTdHJpbmcpIHtcbiAgICAgIHJldHVybiB0aGlzLmNoYXJ0LmdldFRpbWVzdGFtcChkYXRlU3RyaW5nKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBTZXRzIHRoZSBjb25maWd1cmFibGUgb3B0aW9ucyBvZiB0aGUgZXh0ZW5zaW9uIChlLmcuIGNvc21ldGljcylcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcbiAgICAgKi9cbiAgICBzZXRDb25maWcgKGNvbmZpZ09iaikge31cblxuICAgIC8qKlxuICAgICAqIEdldHMgdGhlIGNvbmZpZ3VyYWJsZSBvcHRpb25zIG9mIHRoZSBleHRlbnNpb24gKGUuZy4gY29zbWV0aWNzKVxuICAgICAqIEByZXR1cm4ge29iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcbiAgICAgKi9cbiAgICBnZXRDb25maWcgKCkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgY2FsZW5kYXJWaXNpYmxlOiAnZmFsc2UnXG4gICAgICB9O1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEZ1c2lvbmNoYXJ0cyBsaWZlIGN5Y2xlIG1ldGhvZCBmb3IgZXh0ZW5zaW9uXG4gICAgICovXG4gICAgaW5pdCAocmVxdWlyZSkge1xuICAgICAgdmFyIGluc3RhbmNlID0gdGhpcztcbiAgICAgIHJlcXVpcmUoW1xuICAgICAgICAneEF4aXMnLFxuICAgICAgICAneUF4aXMnLFxuICAgICAgICAnZ3JhcGhpY3MnLFxuICAgICAgICAnY2hhcnQnLFxuICAgICAgICAnZGF0YXNldCcsXG4gICAgICAgICdQbG90TWFuYWdlcicsXG4gICAgICAgICdjYW52YXNDb25maWcnLFxuICAgICAgICAnTWFya2VyTWFuYWdlcicsXG4gICAgICAgICdyZWFjdGl2ZU1vZGVsJyxcbiAgICAgICAgJ2dsb2JhbFJlYWN0aXZlTW9kZWwnLFxuICAgICAgICAnc3BhY2VNYW5hZ2VySW5zdGFuY2UnLFxuICAgICAgICAnc21hcnRMYWJlbCcsXG4gICAgICAgICdjaGFydEluc3RhbmNlJyxcbiAgICAgICAgZnVuY3Rpb24gKFxuICAgICAgICAgICAgICB4QXhpcyxcbiAgICAgICAgICAgICAgeUF4aXMsXG4gICAgICAgICAgICAgIGdyYXBoaWNzLFxuICAgICAgICAgICAgICBjaGFydCxcbiAgICAgICAgICAgICAgZGF0YXNldCxcbiAgICAgICAgICAgICAgcGxvdE1hbmFnZXIsXG4gICAgICAgICAgICAgIGNhbnZhc0NvbmZpZyxcbiAgICAgICAgICAgICAgbWFya2VyTWFuYWdlcixcbiAgICAgICAgICAgICAgcmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgZ2xvYmFsUmVhY3RpdmVNb2RlbCxcbiAgICAgICAgICAgICAgc3BhY2VNYW5hZ2VySW5zdGFuY2UsXG4gICAgICAgICAgICAgIHNtYXJ0TGFiZWwpIHtcbiAgICAgICAgICBpbnN0YW5jZS54QXhpcyA9IHhBeGlzO1xuICAgICAgICAgIGluc3RhbmNlLnlBeGlzID0geUF4aXM7XG4gICAgICAgICAgaW5zdGFuY2UuZ3JhcGhpY3MgPSBncmFwaGljcztcbiAgICAgICAgICBpbnN0YW5jZS5jaGFydCA9IGNoYXJ0O1xuICAgICAgICAgIGluc3RhbmNlLmRhdGFzZXQgPSBkYXRhc2V0O1xuICAgICAgICAgIGluc3RhbmNlLnBsb3RNYW5hZ2VyID0gcGxvdE1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UubWFya2VyTWFuYWdlciA9IG1hcmtlck1hbmFnZXI7XG4gICAgICAgICAgaW5zdGFuY2UuY2FudmFzQ29uZmlnID0gY2FudmFzQ29uZmlnO1xuICAgICAgICAgIGluc3RhbmNlLnJlYWN0aXZlTW9kZWwgPSByZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwgPSBnbG9iYWxSZWFjdGl2ZU1vZGVsO1xuICAgICAgICAgIGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlID0gc3BhY2VNYW5hZ2VySW5zdGFuY2U7XG4gICAgICAgICAgaW5zdGFuY2Uuc21hcnRMYWJlbCA9IHNtYXJ0TGFiZWw7XG4gICAgICAgIH1cbiAgICAgIF0pO1xuICAgICAgdGhpcy5zcGFjZU1hbmFnZXJJbnN0YW5jZSA9IGluc3RhbmNlLnNwYWNlTWFuYWdlckluc3RhbmNlO1xuICAgICAgdGhpcy5nbG9iYWxSZWFjdGl2ZU1vZGVsID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbDtcbiAgICAgIHRoaXMuc3RhcnREdCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy12aXNpYmxlLXJhbmdlLXN0YXJ0J107XG4gICAgICB0aGlzLmVuZER0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLXZpc2libGUtcmFuZ2UtZW5kJ107XG4gICAgICB0aGlzLnN0YXJ0RGF0YXNldCA9IGluc3RhbmNlLmdsb2JhbFJlYWN0aXZlTW9kZWwubW9kZWxbJ3gtYXhpcy1hYnNvbHV0ZS1yYW5nZS1zdGFydCddO1xuICAgICAgdGhpcy5lbmREYXRhc2V0ID0gaW5zdGFuY2UuZ2xvYmFsUmVhY3RpdmVNb2RlbC5tb2RlbFsneC1heGlzLWFic29sdXRlLXJhbmdlLWVuZCddO1xuICAgICAgdGhpcy50b29sYmFycyA9IFtdO1xuICAgICAgdGhpcy5tZWFzdXJlbWVudCA9IHt9O1xuICAgICAgdGhpcy50b29sYmFycy5wdXNoKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuY3JlYXRlVG9vbGJhcigpKTtcbiAgICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZGF0ZVN0YXJ0LCB0aGlzLmRhdGVFbmQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGNyZWF0ZVRvb2xiYXIgKCkge1xuICAgICAgdmFyIHRvb2xiYXIsXG4gICAgICAgIHNlbGYgPSB0aGlzLFxuICAgICAgICBmcm9tRGF0ZUxhYmVsLFxuICAgICAgICB0b0RhdGVMYWJlbCxcbiAgICAgICAgZ3JvdXAsXG4gICAgICAgIGZyb21Gb3JtYXR0ZWREYXRlLFxuICAgICAgICB0b0Zvcm1hdHRlZERhdGU7XG5cbiAgICAgIHNlbGYuZnJvbURhdGUgPSB7fTtcbiAgICAgIHNlbGYudG9EYXRlID0ge307XG5cbiAgICAgIGZyb21Gb3JtYXR0ZWREYXRlID0gbmV3IERhdGUodGhpcy5zdGFydER0KS50b0xvY2FsZURhdGVTdHJpbmcoKTtcblxuICAgICAgdG9Gb3JtYXR0ZWREYXRlID0gbmV3IERhdGUodGhpcy5lbmREdCkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG5cbiAgICAgIHRvb2xiYXIgPSBuZXcgdGhpcy5Ib3Jpem9udGFsVG9vbGJhcih7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0pO1xuXG4gICAgICB0b29sYmFyLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcblxuICAgICAgZ3JvdXAgPSBuZXcgdGhpcy50b29sYm94LkNvbXBvbmVudEdyb3VwKHtcbiAgICAgICAgcGFwZXI6IHRoaXMuZ3JhcGhpY3MucGFwZXIsXG4gICAgICAgIGNoYXJ0OiB0aGlzLmNoYXJ0LFxuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIGNoYXJ0Q29udGFpbmVyOiB0aGlzLmdyYXBoaWNzLmNvbnRhaW5lclxuICAgICAgfSk7XG5cbiAgICAgIGdyb3VwLnNldENvbmZpZyh7XG4gICAgICAgIGZpbGw6ICcjZmZmJyxcbiAgICAgICAgYm9yZGVyVGhpY2tuZXNzOiAwXG4gICAgICB9KTtcblxuICAgICAgZnJvbURhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ0Zyb206Jywge1xuICAgICAgICBzbWFydExhYmVsOiB0aGlzLnNtYXJ0TGFiZWwsXG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyXG4gICAgICB9LCB7XG4gICAgICAgIHRleHQ6IHtcbiAgICAgICAgICBzdHlsZToge1xuICAgICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxNScsXG4gICAgICAgICAgICAnZm9udC1mYW1pbHknOiAnTXlyaWFkUHJvJ1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHNlbGYuZnJvbURhdGUgPSBuZXcgdGhpcy50b29sYm94LklucHV0VGV4dEJveFN5bWJvbCh7XG4gICAgICAgIHdpZHRoOiA4MCxcbiAgICAgICAgaGVpZ2h0OiAyMlxuICAgICAgfSwge1xuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlcixcbiAgICAgICAgY2hhcnQ6IHRoaXMuY2hhcnQsXG4gICAgICAgIHNtYXJ0TGFiZWw6IHRoaXMuc21hcnRMYWJlbCxcbiAgICAgICAgY2hhcnRDb250YWluZXI6IHRoaXMuZ3JhcGhpY3MuY29udGFpbmVyXG4gICAgICB9LCB7XG4gICAgICAgIHN0cm9rZVdpZHRoOiAxLFxuICAgICAgICBzdHJva2U6ICdyZ2JhKDEwMiwxMDIsMTAyLDAuNSknLFxuICAgICAgICBzeW1ib2xTdHJva2VXaWR0aDogMCxcbiAgICAgICAgbWFyZ2luOiB7XG4gICAgICAgICAgcmlnaHQ6IDIyXG4gICAgICAgIH0sXG4gICAgICAgIGJ0blRleHRTdHlsZToge1xuICAgICAgICAgIGZvbnRTaXplOiAxNFxuICAgICAgICB9LFxuICAgICAgICBsYWJlbDogZnJvbUZvcm1hdHRlZERhdGVcbiAgICAgIH0pO1xuXG4gICAgICB0b0RhdGVMYWJlbCA9IG5ldyB0aGlzLnRvb2xib3guTGFiZWwoJ1RvOicsIHtcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBwYXBlcjogdGhpcy5ncmFwaGljcy5wYXBlclxuICAgICAgfSwge1xuICAgICAgICB0ZXh0OiB7XG4gICAgICAgICAgc3R5bGU6IHtcbiAgICAgICAgICAgICdmb250LXNpemUnOiAnMTUnLFxuICAgICAgICAgICAgJ2ZvbnQtZmFtaWx5JzogJ015cmlhZFBybydcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzZWxmLnRvRGF0ZSA9IG5ldyB0aGlzLnRvb2xib3guSW5wdXRUZXh0Qm94U3ltYm9sKHtcbiAgICAgICAgd2lkdGg6IDgwLFxuICAgICAgICBoZWlnaHQ6IDIyXG4gICAgICB9LCB7XG4gICAgICAgIHBhcGVyOiB0aGlzLmdyYXBoaWNzLnBhcGVyLFxuICAgICAgICBjaGFydDogdGhpcy5jaGFydCxcbiAgICAgICAgc21hcnRMYWJlbDogdGhpcy5zbWFydExhYmVsLFxuICAgICAgICBjaGFydENvbnRhaW5lcjogdGhpcy5ncmFwaGljcy5jb250YWluZXJcbiAgICAgIH0sIHtcbiAgICAgICAgc3Ryb2tlV2lkdGg6IDEsXG4gICAgICAgIHN0cm9rZTogJ3JnYmEoMTAyLDEwMiwxMDIsMC41KScsXG4gICAgICAgIHN5bWJvbFN0cm9rZVdpZHRoOiAwLFxuICAgICAgICBidG5UZXh0U3R5bGU6IHtcbiAgICAgICAgICBmb250U2l6ZTogMTRcbiAgICAgICAgfSxcbiAgICAgICAgbGFiZWw6IHRvRm9ybWF0dGVkRGF0ZVxuICAgICAgfSk7XG5cbiAgICAgIHNlbGYuZnJvbURhdGUuYXR0YWNoRXZlbnRIYW5kbGVycyh7XG4gICAgICAgIGNsaWNrOiB7XG4gICAgICAgICAgZm46IHNlbGYuZnJvbURhdGUuZWRpdFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0T25CbHVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi5mcm9tRGF0ZS5ibHVyKCk7XG4gICAgICAgICAgc2VsZi5zdGFydERhdGUgPSBzZWxmLmZyb21EYXRlLmdldFRleHQoKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhzZWxmLmZyb21EYXRlLmdldFRleHQoKSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBzZWxmLnRvRGF0ZS5hdHRhY2hFdmVudEhhbmRsZXJzKHtcbiAgICAgICAgY2xpY2s6IHtcbiAgICAgICAgICBmbjogc2VsZi50b0RhdGUuZWRpdFxuICAgICAgICB9LFxuICAgICAgICB0ZXh0T25CbHVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgc2VsZi50b0RhdGUuYmx1cigpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKHNlbGYudG9EYXRlLmdldFRleHQoKSk7XG4gICAgICAgICAgc2VsZi5lbmREYXRlID0gc2VsZi50b0RhdGUuZ2V0VGV4dCgpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgdGhpcy5TeW1ib2xTdG9yZS5yZWdpc3RlcigndGV4dEJveEljb24nLCBmdW5jdGlvbiAoeCwgeSwgcmFkLCB3LCBoLCBwYWRYLCBwYWRZKSB7XG4gICAgICAgIHZhciB4MSA9IHggLSB3IC8gMiArIHBhZFggLyAyLFxuICAgICAgICAgIHgyID0geCArIHcgLyAyIC0gcGFkWCAvIDIsXG4gICAgICAgICAgeTEgPSB5IC0gaCAvIDIgKyBwYWRZIC8gMixcbiAgICAgICAgICB5MiA9IHkgKyBoIC8gMiAtIHBhZFkgLyAyO1xuXG4gICAgICAgIHJldHVybiBbJ00nLCB4MSwgeTEsICdMJywgeDIsIHkxLCAnTCcsIHgyLCB5MiwgJ0wnLCB4MSwgeTIsICdaJ107XG4gICAgICB9KTtcblxuICAgICAgZ3JvdXAuYWRkU3ltYm9sKGZyb21EYXRlTGFiZWwpO1xuICAgICAgZ3JvdXAuYWRkU3ltYm9sKHNlbGYuZnJvbURhdGUpO1xuICAgICAgZ3JvdXAuYWRkU3ltYm9sKHRvRGF0ZUxhYmVsKTtcbiAgICAgIGdyb3VwLmFkZFN5bWJvbChzZWxmLnRvRGF0ZSk7XG4gICAgICB0b29sYmFyLmFkZENvbXBvbmVudChncm91cCk7XG4gICAgICByZXR1cm4gdG9vbGJhcjtcbiAgICB9O1xuXG4gICAgZ2V0TG9naWNhbFNwYWNlIChhdmFpbGFibGVXaWR0aCwgYXZhaWxhYmxlSGVpZ2h0KSB7XG4gICAgICBhdmFpbGFibGVXaWR0aCAvPSAyO1xuICAgICAgdmFyIGxvZ2ljYWxTcGFjZSxcbiAgICAgICAgd2lkdGggPSAwLFxuICAgICAgICBoZWlnaHQgPSAwLFxuICAgICAgICBpLFxuICAgICAgICBsbjtcblxuICAgICAgZm9yIChpID0gMCwgbG4gPSB0aGlzLnRvb2xiYXJzLmxlbmd0aDsgaSA8IGxuOyBpKyspIHtcbiAgICAgICAgbG9naWNhbFNwYWNlID0gdGhpcy50b29sYmFyc1tpXS5nZXRMb2dpY2FsU3BhY2UoYXZhaWxhYmxlV2lkdGgsIGF2YWlsYWJsZUhlaWdodCk7XG4gICAgICAgIHdpZHRoID0gTWF0aC5tYXgobG9naWNhbFNwYWNlLndpZHRoLCB3aWR0aCk7XG4gICAgICAgIGhlaWdodCArPSBsb2dpY2FsU3BhY2UuaGVpZ2h0O1xuICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLndpZHRoID0gbG9naWNhbFNwYWNlLndpZHRoO1xuICAgICAgICB0aGlzLnRvb2xiYXJzW2ldLmhlaWdodCA9IGxvZ2ljYWxTcGFjZS5oZWlnaHQ7XG4gICAgICB9XG4gICAgICBoZWlnaHQgKz0gdGhpcy5wYWRkaW5nO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgfTtcbiAgICB9O1xuXG4gICAgcGxhY2VJbkNhbnZhcyAoKSB7XG4gICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICBzZWxmLnBhZGRpbmcgPSA1O1xuICAgICAgc2VsZi5zcGFjZU1hbmFnZXJJbnN0YW5jZS5hZGQoW3tcbiAgICAgICAgbmFtZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAnVG9vbEJveEV4dCc7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZjogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgIHJldHVybiBvYmpbJzAnXTtcbiAgICAgICAgfSxcbiAgICAgICAgc2VsZjogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiBzZWxmO1xuICAgICAgICB9LFxuICAgICAgICBwcmlvcml0eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHJldHVybiAyO1xuICAgICAgICB9LFxuICAgICAgICBsYXlvdXQ6IGZ1bmN0aW9uIChvYmopIHtcbiAgICAgICAgICByZXR1cm4gb2JqLmlubGluZTtcbiAgICAgICAgfSxcbiAgICAgICAgb3JpZW50YXRpb246IFt7XG4gICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgcmV0dXJuIG9iai5ob3Jpem9udGFsO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgcG9zaXRpb246IFt7XG4gICAgICAgICAgICB0eXBlOiBmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgICAgIHJldHVybiBvYmoudG9wO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGFsaWdubWVudDogW3tcbiAgICAgICAgICAgICAgdHlwZTogZnVuY3Rpb24gKG9iaikge1xuICAgICAgICAgICAgICAgIHJldHVybiBvYmoucmlnaHQ7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgIGRpbWVuc2lvbnM6IFtmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuZ2V0UGFyZW50Q29tcG9uZW50R3JvdXAoKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VsZi5nZXRMb2dpY2FsU3BhY2UocGFyZW50LmdldFdpZHRoKCksIHBhcmVudC5nZXRIZWlnaHQoKSk7XG4gICAgICAgICAgICAgIH1dXG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH1dXG4gICAgICAgIH1dXG4gICAgICB9XSk7XG4gICAgfTtcblxuICAgIHNldERyYXdpbmdDb25maWd1cmF0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCBncm91cCkge1xuICAgICAgdmFyIG1lcyA9IHRoaXMubWVhc3VyZW1lbnQ7XG4gICAgICBtZXMueCA9IHg7XG4gICAgICBtZXMueSA9IHk7XG4gICAgICBtZXMud2lkdGggPSB3aWR0aDtcbiAgICAgIG1lcy5oZWlnaHQgPSBoZWlnaHQ7XG5cbiAgICAgIHRoaXMucGFyZW50R3JvdXAgPSBncm91cDtcblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIGRyYXcgKHgsIHksIHdpZHRoLCBoZWlnaHQsIGdyb3VwKSB7XG4gICAgICB2YXIgbWVhc3VyZW1lbnQgPSB0aGlzLm1lYXN1cmVtZW50LFxuICAgICAgICB0b29sYmFycyA9IHRoaXMudG9vbGJhcnMsXG4gICAgICAgIGxuLFxuICAgICAgICBpLFxuICAgICAgICB0b29sYmFyLFxuICAgICAgICBtb2RlbCA9IHRoaXMuZ2xvYmFsUmVhY3RpdmVNb2RlbCxcbiAgICAgICAgc2VsZiA9IHRoaXM7XG4gICAgICBjb25zb2xlLmxvZyhtb2RlbCk7XG4gICAgICB4ID0geCA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueCA6IHg7XG4gICAgICB5ID0geSA9PT0gdW5kZWZpbmVkID8gbWVhc3VyZW1lbnQueSA6IHk7XG4gICAgICB3aWR0aCA9IHdpZHRoID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC53aWR0aCA6IHdpZHRoO1xuICAgICAgaGVpZ2h0ID0gaGVpZ2h0ID09PSB1bmRlZmluZWQgPyBtZWFzdXJlbWVudC5oZWlnaHQgOiBoZWlnaHQ7XG4gICAgICBncm91cCA9IGdyb3VwID09PSB1bmRlZmluZWQgPyB0aGlzLnBhcmVudEdyb3VwIDogZ3JvdXA7XG4gICAgICBpZiAod2lkdGggJiYgaGVpZ2h0KSB7XG4gICAgICAgIGZvciAoaSA9IDAsIGxuID0gdG9vbGJhcnMubGVuZ3RoOyBpIDwgbG47IGkrKykge1xuICAgICAgICAgIHRvb2xiYXIgPSB0b29sYmFyc1tpXTtcbiAgICAgICAgICB0b29sYmFyLmRyYXcoeCwgeSwgZ3JvdXApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIG1vZGVsLm9uUHJvcHNDaGFuZ2UoWyd4LWF4aXMtdmlzaWJsZS1yYW5nZS1zdGFydCcsICd4LWF4aXMtdmlzaWJsZS1yYW5nZS1lbmQnXSwgZnVuY3Rpb24gKHN0YXJ0LCBlbmQpIHtcbiAgICAgICAgc2VsZi5mcm9tRGF0ZS5ibHVyKG5ldyBEYXRlKHN0YXJ0WzFdKS50b0xvY2FsZURhdGVTdHJpbmcoKSk7XG4gICAgICAgIHNlbGYudG9EYXRlLmJsdXIobmV3IERhdGUoZW5kWzFdKS50b0xvY2FsZURhdGVTdHJpbmcoKSk7XG4gICAgICB9KTtcbiAgICB9O1xuICB9XG4gIHJldHVybiBEYXRlUmFuZ2U7XG59O1xuXG5cblxuLy8gV0VCUEFDSyBGT09URVIgLy9cbi8vIC4vc3JjL2ZjdHMtZXh0LWRhdGVyYW5nZS5qcyJdLCJzb3VyY2VSb290IjoiIn0=
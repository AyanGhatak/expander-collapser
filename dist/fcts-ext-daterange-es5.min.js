!function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={exports:{},id:r,loaded:!1};return t[r].call(a.exports,a,a.exports,e),a.loaded=!0,a.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var r=n(1);FusionCharts.register("extension",["date-range-chooser",function(t){var e=this,n=e.extAPI;window.dr=new r,n(window.dr)}])},function(t,e,n){(function(e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(2),i=n(4),u=n(5),s=function(){function t(){r(this,t),this.dateRange={startDate:0,endDate:0},this.startText={attr:function(){}},this.endText={attr:function(){}}}return a(t,[{key:"init",value:function(t){t("X-Axis","Y-Axis","graphics",function(t,n,r){e.x=t,e.y=n,e.paper=r})}},{key:"placeInCanvas",value:function(){this.range={startDate:12,endDate:23}}},{key:"draw",value:function(){var t=e.paper,n=this.range,r=t.text(20,22,"From: ");r.attr("font-family","sans-serif"),r.attr("fill","#000");var a=t.rect(50,10,90,25);a.attr("stroke","#000"),this.startText=t.text(95,22,u.getFormattedDate(n.startDate)),this.startText.attr("font-family","sans-serif"),this.startText.attr("fill","#000");var o=t.text(170,22,"To: ");o.attr("font-family","sans-serif"),o.attr("fill","#000");var i=t.rect(190,10,90,25);i.attr("stroke","#000"),this.endText=t.text(235,22,u.getFormattedDate(n.endDate)),this.endText.attr("font-family","sans-serif"),this.endText.attr("fill","#000")}},{key:"dispose",value:function(){}},{key:"swapDates",value:function(){var t=this.dateRange.startDate;this.dateRange.startDate=this.dateRange.endDate,this.dateRange.endDate=t}},{key:"syncRange",value:function(){}},{key:"getFormattedDate",value:function(t){return"12/12/2012"}},{key:"getTimestamp",value:function(t){return 6745123}},{key:"setConfig",value:function(t){}},{key:"getConfig",value:function(){return{color:"#000000"}}},{key:"range",get:function(){return this.dateRange},set:function(t){if(t.startDate<=t.endDate){this.dateRange.startDate=t.startDate;var e=u.getFormattedDate(t.startDate);console.log(e),this.startText.attr("text",e),this.dateRange.endDate=t.endDate;var n=u.getFormattedDate(t.endDate);this.endText.attr("text",n);var r=new o;r.timestamp=this.dateRange.startDate;var a=new i;a.timestamp=this.dateRange.endDate}}}]),t}();t.exports=s}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),s=function(t){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),i(e,[{key:"validateDate",value:function(t){return!0}}]),e}(u);t.exports=s},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=function(){function t(){n(this,t),this.timestamp=0}return r(t,[{key:"displayDate",value:function(){}},{key:"date",get:function(){return this.timestamp},set:function(t){this.timestamp=t}}]),t}();t.exports=a},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(3),s=function(t){function e(){return r(this,e),a(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return o(e,t),i(e,[{key:"validateDate",value:function(t){return!0}}]),e}(u);t.exports=s},function(t,e,n){(function(t){"use strict";var e=function(){};e.register=function(t,e){var n=e[1];n.bind(this,565)()},e.getFormattedDate=function(t){return new Date(t).toLocaleDateString()},e.getTimestamp=function(t){var e=new Date(t);return+new Date(e.toLocaleDateString())},e.getComponent=function(t,e){var n={x:24,y:56,width:100,height:20,index:4};return"api"===t&&"toolbox"===e?n:null},e.extAPI=function(t){t.init(function(){for(var t=[],e=arguments[arguments.length-1],n=0;n<arguments.length-1;n++)if("X-Axis"===arguments[n])t.push(156772);else if("Y-Axis"===arguments[n])t.push(156765);else if("graphics"===arguments[n]){var r=Raphael(10,50,500,500);t.push(r)}e.apply(this,t)}),t.placeInCanvas(),t.draw(),t.dispose()},t&&(t.exports=e)}).call(e,n(6)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vZmN0cy1leHQtZGF0ZXJhbmdlLWVzNS5taW4uanMiLCJ3ZWJwYWNrOi8vL3dlYnBhY2svYm9vdHN0cmFwIGJlMjNiOTc0ZTY4OTc1YTkxNDgwIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZXJhbmdlLmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1zdGFydGRhdGVpbnB1dC5qcyIsIndlYnBhY2s6Ly8vLi9zcmMvZmN0cy1leHQtZGF0ZWlucHV0LmpzIiwid2VicGFjazovLy8uL3NyYy9mY3RzLWV4dC1lbmRkYXRlaW5wdXQuanMiLCJ3ZWJwYWNrOi8vLy4vbGliL2Z1c2lvbmNoYXJ0cy5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzIl0sIm5hbWVzIjpbIm1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJpbnN0YWxsZWRNb2R1bGVzIiwiZXhwb3J0cyIsIm1vZHVsZSIsImlkIiwibG9hZGVkIiwiY2FsbCIsIm0iLCJjIiwicCIsIkRhdGVSYW5nZSIsIkZ1c2lvbkNoYXJ0cyIsInJlZ2lzdGVyIiwiZ2xvYmFsIiwidGhpcyIsImV4dEFQSSIsIndpbmRvdyIsImRyIiwiX2NsYXNzQ2FsbENoZWNrIiwiaW5zdGFuY2UiLCJDb25zdHJ1Y3RvciIsIlR5cGVFcnJvciIsIl9jcmVhdGVDbGFzcyIsImRlZmluZVByb3BlcnRpZXMiLCJ0YXJnZXQiLCJwcm9wcyIsImkiLCJsZW5ndGgiLCJkZXNjcmlwdG9yIiwiZW51bWVyYWJsZSIsImNvbmZpZ3VyYWJsZSIsIndyaXRhYmxlIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJrZXkiLCJwcm90b1Byb3BzIiwic3RhdGljUHJvcHMiLCJwcm90b3R5cGUiLCJTdGFydERhdGVJbnB1dCIsIkVuZERhdGVJbnB1dCIsImRhdGVSYW5nZSIsInN0YXJ0RGF0ZSIsImVuZERhdGUiLCJzdGFydFRleHQiLCJhdHRyIiwiZW5kVGV4dCIsInZhbHVlIiwicmVxdWlyZSIsIngiLCJ5IiwiZ3JhcGhpY3MiLCJwYXBlciIsInJhbmdlIiwic3RhcnRMYWJlbCIsInRleHQiLCJzdGFydFJlY3QiLCJyZWN0IiwiZ2V0Rm9ybWF0dGVkRGF0ZSIsImVuZExhYmVsIiwiZW5kUmVjdCIsInRlbXAiLCJ0aW1lc3RhbXAiLCJkYXRlU3RyaW5nIiwiY29uZmlnT2JqIiwiY29sb3IiLCJnZXQiLCJzZXQiLCJmb3JtYXR0ZWRTdGFydERhdGUiLCJjb25zb2xlIiwibG9nIiwiZm9ybWF0dGVkRW5kRGF0ZSIsInNkaSIsImVkaSIsIl9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIiwic2VsZiIsIlJlZmVyZW5jZUVycm9yIiwiX2luaGVyaXRzIiwic3ViQ2xhc3MiLCJzdXBlckNsYXNzIiwiY3JlYXRlIiwiY29uc3RydWN0b3IiLCJzZXRQcm90b3R5cGVPZiIsIl9fcHJvdG9fXyIsIkRhdGVJbnB1dCIsIl9EYXRlSW5wdXQiLCJnZXRQcm90b3R5cGVPZiIsImFwcGx5IiwiYXJndW1lbnRzIiwibXMiLCJleHQiLCJhcnIiLCJmbiIsImJpbmQiLCJEYXRlIiwidG9Mb2NhbGVEYXRlU3RyaW5nIiwiZ2V0VGltZXN0YW1wIiwiZGF0ZSIsImR0IiwiZ2V0Q29tcG9uZW50IiwiY29tcG9uZW50VHlwZSIsImNvbXBvbmVudE5hbWUiLCJ0b29sQm94Iiwid2lkdGgiLCJoZWlnaHQiLCJpbmRleCIsIm9iaiIsImluaXQiLCJhcmdzVG9BcHBseSIsImNiIiwicHVzaCIsIlJhcGhhZWwiLCJwbGFjZUluQ2FudmFzIiwiZHJhdyIsImRpc3Bvc2UiLCJ3ZWJwYWNrUG9seWZpbGwiLCJkZXByZWNhdGUiLCJwYXRocyIsImNoaWxkcmVuIl0sIm1hcHBpbmdzIjoiQ0FBUyxTQUFVQSxHQ0luQixRQUFBQyxHQUFBQyxHQUdBLEdBQUFDLEVBQUFELEdBQ0EsTUFBQUMsR0FBQUQsR0FBQUUsT0FHQSxJQUFBQyxHQUFBRixFQUFB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LEdBQUdJLEtBSTdELFNBQVNBLEVBQVFELEdRbmV2QkMsRUFBQUQsUUFBQSxTQUFBQyxHQVFBLE1BUEFBLEdBQUErRyxrQkFDQS9HLEVBQUFnSCxVQUFBLGFBQ0FoSCxFQUFBaUgsU0FFQWpILEVBQUFrSCxZQUNBbEgsRUFBQStHLGdCQUFBLEdBRUEvRyIsImZpbGUiOiJmY3RzLWV4dC1kYXRlcmFuZ2UtZXM1Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSlcbi8qKioqKiovIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuLyoqKioqKi8gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9LFxuLyoqKioqKi8gXHRcdFx0aWQ6IG1vZHVsZUlkLFxuLyoqKioqKi8gXHRcdFx0bG9hZGVkOiBmYWxzZVxuLyoqKioqKi8gXHRcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuLyoqKioqKi8gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4vKioqKioqLyBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4vKioqKioqLyBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyoqKioqKi8gfSlcbi8qKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiovXG4vKioqKioqLyAoW1xuLyogMCAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0J3VzZSBzdHJpY3QnO1xuXHRcblx0dmFyIERhdGVSYW5nZSA9IF9fd2VicGFja19yZXF1aXJlX18oMSk7XG5cdFxuXHQvLyB2YXIgZmMgPSBuZXcgRnVzaW9uQ2hhcnRzKCk7XG5cdFxuXHRGdXNpb25DaGFydHMucmVnaXN0ZXIoJ2V4dGVuc2lvbicsIFsnZGF0ZS1yYW5nZS1jaG9vc2VyJywgZnVuY3Rpb24gKGlkKSB7XG5cdCAgdmFyIGdsb2JhbCA9IHRoaXM7XG5cdCAgdmFyIGV4dEFQSSA9IGdsb2JhbC5leHRBUEk7XG5cdFxuXHQgIC8vIHZhciBvdGhlckFQSSA9IEZ1c2lvbkNoYXJ0cy5nZXRFeHRDb21wb25lbnQoaWQsICdhcGknLCAnbGVnYWN5ZXh0YXBpJyk7XG5cdCAgLy8gdmFyIHRvb2xCb3hBcGkgPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXHRcblx0ICB3aW5kb3cuZHIgPSBuZXcgRGF0ZVJhbmdlKCk7XG5cdCAgZXh0QVBJKHdpbmRvdy5kcik7XG5cdH1dKTtcblxuLyoqKi8gfSxcbi8qIDEgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqLyhmdW5jdGlvbihnbG9iYWwpIHsndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdHZhciBTdGFydERhdGVJbnB1dCA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cdHZhciBFbmREYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuXHR2YXIgRnVzaW9uQ2hhcnRzID0gX193ZWJwYWNrX3JlcXVpcmVfXyg1KTtcblx0XG5cdC8qKlxuXHQgKiBDbGFzcyByZXByZXNlbnRpbmcgdGhlIERhdGVSYW5nZS5cblx0ICovXG5cdFxuXHR2YXIgRGF0ZVJhbmdlID0gZnVuY3Rpb24gKCkge1xuXHQgIC8qKlxuXHQgICAqIENyZWF0ZSBhIERhdGVSYW5nZS5cblx0ICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBEYXRlUmFuZ2UucmFuZ2Vcblx0ICAgKiBAcHJvcGVydHkge251bWJlcn0gc3RhcnREYXRlIC0gVGhlIHN0YXJ0IGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2UuXG5cdCAgICogQHByb3BlcnR5IHtudW1iZXJ9IGVuZERhdGUgLSBUaGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2UuXG5cdCAgICovXG5cdCAgZnVuY3Rpb24gRGF0ZVJhbmdlKCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGVSYW5nZSk7XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB0aGlzLmRhdGVSYW5nZSA9IHtcblx0ICAgICAgc3RhcnREYXRlOiAwLFxuXHQgICAgICBlbmREYXRlOiAwXG5cdCAgICB9O1xuXHQgICAgdGhpcy5zdGFydFRleHQgPSB7XG5cdCAgICAgIGF0dHI6IGZ1bmN0aW9uIGF0dHIoKSB7fVxuXHQgICAgfTtcblx0ICAgIHRoaXMuZW5kVGV4dCA9IHtcblx0ICAgICAgYXR0cjogZnVuY3Rpb24gYXR0cigpIHt9XG5cdCAgICB9O1xuXHQgIH1cblx0XG5cdCAgLyoqXG5cdCAgICogQW4gb2JqZWN0IHJlcHJlc2VudGluZyB0aGUgc3RhcnQgYW5kIGVuZCBkYXRlcy5cblx0ICAgKiBAdHlwZSB7RGF0ZVJhbmdlLnJhbmdlfVxuXHQgICAqL1xuXHRcblx0XG5cdCAgX2NyZWF0ZUNsYXNzKERhdGVSYW5nZSwgW3tcblx0ICAgIGtleTogJ2luaXQnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQocmVxdWlyZSkge1xuXHQgICAgICByZXF1aXJlKCdYLUF4aXMnLCAnWS1BeGlzJywgJ2dyYXBoaWNzJywgZnVuY3Rpb24gKHgsIHksIGdyYXBoaWNzKSB7XG5cdCAgICAgICAgZ2xvYmFsLnggPSB4O1xuXHQgICAgICAgIGdsb2JhbC55ID0geTtcblx0ICAgICAgICBnbG9iYWwucGFwZXIgPSBncmFwaGljcztcblx0ICAgICAgfSk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncGxhY2VJbkNhbnZhcycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gcGxhY2VJbkNhbnZhcygpIHtcblx0ICAgICAgdGhpcy5yYW5nZSA9IHtcblx0ICAgICAgICBzdGFydERhdGU6IDEyLFxuXHQgICAgICAgIGVuZERhdGU6IDIzXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZHJhdycsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdygpIHtcblx0ICAgICAgdmFyIHBhcGVyID0gZ2xvYmFsLnBhcGVyO1xuXHQgICAgICB2YXIgcmFuZ2UgPSB0aGlzLnJhbmdlO1xuXHRcblx0ICAgICAgdmFyIHN0YXJ0TGFiZWwgPSBwYXBlci50ZXh0KDIwLCAyMiwgJ0Zyb206ICcpO1xuXHQgICAgICBzdGFydExhYmVsLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcblx0ICAgICAgc3RhcnRMYWJlbC5hdHRyKCdmaWxsJywgJyMwMDAnKTtcblx0ICAgICAgdmFyIHN0YXJ0UmVjdCA9IHBhcGVyLnJlY3QoNTAsIDEwLCA5MCwgMjUpO1xuXHQgICAgICBzdGFydFJlY3QuYXR0cignc3Ryb2tlJywgJyMwMDAnKTtcblx0ICAgICAgdGhpcy5zdGFydFRleHQgPSBwYXBlci50ZXh0KDk1LCAyMiwgRnVzaW9uQ2hhcnRzLmdldEZvcm1hdHRlZERhdGUocmFuZ2Uuc3RhcnREYXRlKSk7XG5cdCAgICAgIHRoaXMuc3RhcnRUZXh0LmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcblx0ICAgICAgdGhpcy5zdGFydFRleHQuYXR0cignZmlsbCcsICcjMDAwJyk7XG5cdFxuXHQgICAgICB2YXIgZW5kTGFiZWwgPSBwYXBlci50ZXh0KDE3MCwgMjIsICdUbzogJyk7XG5cdCAgICAgIGVuZExhYmVsLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcblx0ICAgICAgZW5kTGFiZWwuYXR0cignZmlsbCcsICcjMDAwJyk7XG5cdCAgICAgIHZhciBlbmRSZWN0ID0gcGFwZXIucmVjdCgxOTAsIDEwLCA5MCwgMjUpO1xuXHQgICAgICBlbmRSZWN0LmF0dHIoJ3N0cm9rZScsICcjMDAwJyk7XG5cdCAgICAgIHRoaXMuZW5kVGV4dCA9IHBhcGVyLnRleHQoMjM1LCAyMiwgRnVzaW9uQ2hhcnRzLmdldEZvcm1hdHRlZERhdGUocmFuZ2UuZW5kRGF0ZSkpO1xuXHQgICAgICB0aGlzLmVuZFRleHQuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpO1xuXHQgICAgICB0aGlzLmVuZFRleHQuYXR0cignZmlsbCcsICcjMDAwJyk7XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZGlzcG9zZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcG9zZSgpIHt9XG5cdCAgICAvLyBUT0RPOiBkaXNwb3NlIGV4dGVuc2lvblxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN3YXBzIHRoZSBzdGFydCBkYXRlIGFuZCB0aGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2Vcblx0ICAgICAqIEBwcml2YXRlXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnc3dhcERhdGVzJyxcblx0ICAgIHZhbHVlOiBmdW5jdGlvbiBzd2FwRGF0ZXMoKSB7XG5cdCAgICAgIHZhciB0ZW1wID0gdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlO1xuXHQgICAgICB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGUgPSB0aGlzLmRhdGVSYW5nZS5lbmREYXRlO1xuXHQgICAgICB0aGlzLmRhdGVSYW5nZS5lbmREYXRlID0gdGVtcDtcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIFN5bmNzIHRoZSBkYXRlcmFuZ2Ugc2hvd24gYnkgdGhlIEZ1c2lvbkNoYXJ0cyB0aW1lIHNlcmllcyBjaGFydCBhbmQgdGhlIERhdGUgUmFuZ2UgQ2hvb3NlclxuXHQgICAgICogQHByaXZhdGVcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzeW5jUmFuZ2UnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHN5bmNSYW5nZSgpIHt9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBSZXR1cm5zIGEgZm9ybWF0dGVkIGRhdGUgc3RyaW5nIGZyb20gRnVzaW9uQ2hhcnRzIHdoZW4gZ2l2ZW4gYSBVTklYIHRpbWVzdGFtcFxuXHQgICAgICogQHBhcmFtICB7bnVtYmVyfSB0aW1lc3RhbXAgLSBBIFVOSVggdGltZXN0YW1wIHRvIGJlIGNvbnZlcnRlZCB0byBhIGRhdGUgc3RyaW5nXG5cdCAgICAgKiBAcmV0dXJuIHtzdHJpbmd9IEEgZGF0ZSBzdHJpbmcgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gdGltZXN0YW1wXG5cdCAgICAgKi9cblx0XG5cdCAgfSwge1xuXHQgICAga2V5OiAnZ2V0Rm9ybWF0dGVkRGF0ZScsXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0Rm9ybWF0dGVkRGF0ZSh0aW1lc3RhbXApIHtcblx0ICAgICAgcmV0dXJuICcxMi8xMi8yMDEyJztcblx0ICAgIH1cblx0XG5cdCAgICAvKipcblx0ICAgICAqIFJldHVybnMgYSBVTklYIHRpbWVzdGFtcCBmcm9tIEZ1c2lvbkNoYXJ0cyB3aGVuIGdpdmVuIGEgZm9ybWF0dGVkIGRhdGUgc3RyaW5nXG5cdCAgICAgKiBAcGFyYW0gIHtzdHJpbmd9IGRhdGVTdHJpbmcgLSBBIGRhdGUgc3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byBhIFVOSVggdGltZXN0YW1wXG5cdCAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IEEgVU5JWCB0aW1lc3RhbXAgd2hpY2ggaXMgZXF1aXZhbGVudCB0byB0aGUgZ2l2ZW4gZGF0ZSBzdHJpbmdcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRUaW1lc3RhbXAnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFRpbWVzdGFtcChkYXRlU3RyaW5nKSB7XG5cdCAgICAgIHJldHVybiA2NzQ1MTIzO1xuXHQgICAgfVxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogU2V0cyB0aGUgY29uZmlndXJhYmxlIG9wdGlvbnMgb2YgdGhlIGV4dGVuc2lvbiAoZS5nLiBjb3NtZXRpY3MpXG5cdCAgICAgKiBAcGFyYW0ge09iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdzZXRDb25maWcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvbmZpZyhjb25maWdPYmopIHt9XG5cdFxuXHQgICAgLyoqXG5cdCAgICAgKiBHZXRzIHRoZSBjb25maWd1cmFibGUgb3B0aW9ucyBvZiB0aGUgZXh0ZW5zaW9uIChlLmcuIGNvc21ldGljcylcblx0ICAgICAqIEByZXR1cm4ge29iamVjdH0gY29uZmlnT2JqIFRoZSBjb25maWd1cmF0aW9uIG9iamVjdCBjb250YWluaW5nIHZhcmlvdXMgZXh0ZW5zaW9uIG9wdGlvbnNcblx0ICAgICAqL1xuXHRcblx0ICB9LCB7XG5cdCAgICBrZXk6ICdnZXRDb25maWcnLFxuXHQgICAgdmFsdWU6IGZ1bmN0aW9uIGdldENvbmZpZygpIHtcblx0ICAgICAgcmV0dXJuIHtcblx0ICAgICAgICBjb2xvcjogJyMwMDAwMDAnXG5cdCAgICAgIH07XG5cdCAgICB9XG5cdCAgfSwge1xuXHQgICAga2V5OiAncmFuZ2UnLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLmRhdGVSYW5nZTtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChyYW5nZSkge1xuXHQgICAgICBpZiAocmFuZ2Uuc3RhcnREYXRlIDw9IHJhbmdlLmVuZERhdGUpIHtcblx0ICAgICAgICB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGUgPSByYW5nZS5zdGFydERhdGU7XG5cdCAgICAgICAgdmFyIGZvcm1hdHRlZFN0YXJ0RGF0ZSA9IEZ1c2lvbkNoYXJ0cy5nZXRGb3JtYXR0ZWREYXRlKHJhbmdlLnN0YXJ0RGF0ZSk7XG5cdCAgICAgICAgY29uc29sZS5sb2coZm9ybWF0dGVkU3RhcnREYXRlKTtcblx0ICAgICAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCd0ZXh0JywgZm9ybWF0dGVkU3RhcnREYXRlKTtcblx0XG5cdCAgICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHJhbmdlLmVuZERhdGU7XG5cdCAgICAgICAgdmFyIGZvcm1hdHRlZEVuZERhdGUgPSBGdXNpb25DaGFydHMuZ2V0Rm9ybWF0dGVkRGF0ZShyYW5nZS5lbmREYXRlKTtcblx0ICAgICAgICB0aGlzLmVuZFRleHQuYXR0cigndGV4dCcsIGZvcm1hdHRlZEVuZERhdGUpO1xuXHRcblx0ICAgICAgICB2YXIgc2RpID0gbmV3IFN0YXJ0RGF0ZUlucHV0KCk7XG5cdCAgICAgICAgc2RpLnRpbWVzdGFtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcblx0XG5cdCAgICAgICAgdmFyIGVkaSA9IG5ldyBFbmREYXRlSW5wdXQoKTtcblx0ICAgICAgICBlZGkudGltZXN0YW1wID0gdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZTtcblx0ICAgICAgfVxuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIERhdGVSYW5nZTtcblx0fSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEYXRlUmFuZ2U7XG5cdC8qIFdFQlBBQ0sgVkFSIElOSkVDVElPTiAqL30uY2FsbChleHBvcnRzLCAoZnVuY3Rpb24oKSB7IHJldHVybiB0aGlzOyB9KCkpKSlcblxuLyoqKi8gfSxcbi8qIDIgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cdFxuXHRmdW5jdGlvbiBfY2xhc3NDYWxsQ2hlY2soaW5zdGFuY2UsIENvbnN0cnVjdG9yKSB7IGlmICghKGluc3RhbmNlIGluc3RhbmNlb2YgQ29uc3RydWN0b3IpKSB7IHRocm93IG5ldyBUeXBlRXJyb3IoXCJDYW5ub3QgY2FsbCBhIGNsYXNzIGFzIGEgZnVuY3Rpb25cIik7IH0gfVxuXHRcblx0ZnVuY3Rpb24gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oc2VsZiwgY2FsbCkgeyBpZiAoIXNlbGYpIHsgdGhyb3cgbmV3IFJlZmVyZW5jZUVycm9yKFwidGhpcyBoYXNuJ3QgYmVlbiBpbml0aWFsaXNlZCAtIHN1cGVyKCkgaGFzbid0IGJlZW4gY2FsbGVkXCIpOyB9IHJldHVybiBjYWxsICYmICh0eXBlb2YgY2FsbCA9PT0gXCJvYmplY3RcIiB8fCB0eXBlb2YgY2FsbCA9PT0gXCJmdW5jdGlvblwiKSA/IGNhbGwgOiBzZWxmOyB9XG5cdFxuXHRmdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblx0XG5cdHZhciBEYXRlSW5wdXQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDMpO1xuXHRcblx0LyoqXG5cdCAqIEEgY29uY3JldGUgcmVwcmVzZW50YXRpb24gb2YgRGF0ZUlucHV0IGZvciB0aGUgc3RhcnQgZGF0ZS5cblx0ICogQGV4dGVuZHMgRGF0ZUlucHV0XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIFN0YXJ0RGF0ZUlucHV0ID0gZnVuY3Rpb24gKF9EYXRlSW5wdXQpIHtcblx0ICBfaW5oZXJpdHMoU3RhcnREYXRlSW5wdXQsIF9EYXRlSW5wdXQpO1xuXHRcblx0ICBmdW5jdGlvbiBTdGFydERhdGVJbnB1dCgpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTdGFydERhdGVJbnB1dCk7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTdGFydERhdGVJbnB1dC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFN0YXJ0RGF0ZUlucHV0KSkuYXBwbHkodGhpcywgYXJndW1lbnRzKSk7XG5cdCAgfVxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoU3RhcnREYXRlSW5wdXQsIFt7XG5cdCAgICBrZXk6ICd2YWxpZGF0ZURhdGUnLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVmFsaWRhdGUgdGhlIGdpdmVuIHRpbWVzdGFtcFxuXHQgICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZ2l2ZW4gdGltZXN0YW1wIGlzIHZhbGlkIG9yIG5vdFxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHRpbWVzdGFtcCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBTdGFydERhdGVJbnB1dDtcblx0fShEYXRlSW5wdXQpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBTdGFydERhdGVJbnB1dDtcblxuLyoqKi8gfSxcbi8qIDMgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdCd1c2Ugc3RyaWN0Jztcblx0LyoqXG5cdCAqIENsYXNzIHJlcHJlc2VudGluZyBhIGFic3RyYWN0IERhdGVJbnB1dC5cblx0ICogQGFic3RyYWN0XG5cdCAqIEBwcml2YXRlXG5cdCAqL1xuXHRcblx0dmFyIF9jcmVhdGVDbGFzcyA9IGZ1bmN0aW9uICgpIHsgZnVuY3Rpb24gZGVmaW5lUHJvcGVydGllcyh0YXJnZXQsIHByb3BzKSB7IGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHsgdmFyIGRlc2NyaXB0b3IgPSBwcm9wc1tpXTsgZGVzY3JpcHRvci5lbnVtZXJhYmxlID0gZGVzY3JpcHRvci5lbnVtZXJhYmxlIHx8IGZhbHNlOyBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7IGlmIChcInZhbHVlXCIgaW4gZGVzY3JpcHRvcikgZGVzY3JpcHRvci53cml0YWJsZSA9IHRydWU7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0YXJnZXQsIGRlc2NyaXB0b3Iua2V5LCBkZXNjcmlwdG9yKTsgfSB9IHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7IGlmIChwcm90b1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLnByb3RvdHlwZSwgcHJvdG9Qcm9wcyk7IGlmIChzdGF0aWNQcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvciwgc3RhdGljUHJvcHMpOyByZXR1cm4gQ29uc3RydWN0b3I7IH07IH0oKTtcblx0XG5cdGZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cdFxuXHR2YXIgRGF0ZUlucHV0ID0gZnVuY3Rpb24gKCkge1xuXHQgIGZ1bmN0aW9uIERhdGVJbnB1dCgpIHtcblx0ICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEYXRlSW5wdXQpO1xuXHRcblx0ICAgIC8qKlxuXHQgICAgICogQHR5cGVkZWYge29iamVjdH0gRGF0ZUlucHV0LmlucHV0XG5cdCAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGltZXN0YW1wIC0gVGhlIGN1cnJlbnQgdGltZSBzaG93biBvbiB0aGUgZGF0ZSBpbnB1dC5cblx0ICAgICAqL1xuXHQgICAgLyoqXG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB0aGlzLnRpbWVzdGFtcCA9IDA7XG5cdCAgfVxuXHRcblx0ICAvKipcblx0ICAgKiBSZXByZXNlbnRzIHRoZSBudW1lcmljIHZhbHVlIG9mIHRoZSBkYXRlXG5cdCAgICogQHR5cGUgbnVtYmVyXG5cdCAgICovXG5cdFxuXHRcblx0ICBfY3JlYXRlQ2xhc3MoRGF0ZUlucHV0LCBbe1xuXHQgICAga2V5OiAnZGlzcGxheURhdGUnLFxuXHRcblx0XG5cdCAgICAvKipcblx0ICAgICAqIERpc3BsYXlzIHRoZSBkYXRlIG9uIHRoZSBkYXRlIGlucHV0XG5cdCAgICAgKiBAcHJpdmF0ZVxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gZGlzcGxheURhdGUoKSB7fVxuXHQgIH0sIHtcblx0ICAgIGtleTogJ2RhdGUnLFxuXHQgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG5cdCAgICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcblx0ICAgIH0sXG5cdCAgICBzZXQ6IGZ1bmN0aW9uIHNldChtcykge1xuXHQgICAgICB0aGlzLnRpbWVzdGFtcCA9IG1zO1xuXHQgICAgfVxuXHQgIH1dKTtcblx0XG5cdCAgcmV0dXJuIERhdGVJbnB1dDtcblx0fSgpO1xuXHRcblx0bW9kdWxlLmV4cG9ydHMgPSBEYXRlSW5wdXQ7XG5cbi8qKiovIH0sXG4vKiA0ICovXG4vKioqLyBmdW5jdGlvbihtb2R1bGUsIGV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pIHtcblxuXHQndXNlIHN0cmljdCc7XG5cdFxuXHR2YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXHRcblx0ZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblx0XG5cdGZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXHRcblx0ZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cdFxuXHR2YXIgRGF0ZUlucHV0ID0gX193ZWJwYWNrX3JlcXVpcmVfXygzKTtcblx0XG5cdC8qKlxuXHQgKiBBIGNvbmNyZXRlIHJlcHJlc2VudGF0aW9uIG9mIERhdGVJbnB1dCBmb3IgdGhlIGVuZCBkYXRlLlxuXHQgKiBAZXh0ZW5kcyBEYXRlSW5wdXRcblx0ICogQHByaXZhdGVcblx0ICovXG5cdFxuXHR2YXIgRW5kRGF0ZUlucHV0ID0gZnVuY3Rpb24gKF9EYXRlSW5wdXQpIHtcblx0ICBfaW5oZXJpdHMoRW5kRGF0ZUlucHV0LCBfRGF0ZUlucHV0KTtcblx0XG5cdCAgZnVuY3Rpb24gRW5kRGF0ZUlucHV0KCkge1xuXHQgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEVuZERhdGVJbnB1dCk7XG5cdFxuXHQgICAgcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChFbmREYXRlSW5wdXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihFbmREYXRlSW5wdXQpKS5hcHBseSh0aGlzLCBhcmd1bWVudHMpKTtcblx0ICB9XG5cdFxuXHQgIF9jcmVhdGVDbGFzcyhFbmREYXRlSW5wdXQsIFt7XG5cdCAgICBrZXk6ICd2YWxpZGF0ZURhdGUnLFxuXHRcblx0ICAgIC8qKlxuXHQgICAgICogVmFsaWRhdGUgdGhlIGdpdmVuIHRpbWVzdGFtcFxuXHQgICAgICogQHJldHVybiB7Ym9vbGVhbn0gV2hldGhlciB0aGUgZ2l2ZW4gdGltZXN0YW1wIGlzIHZhbGlkIG9yIG5vdFxuXHQgICAgICovXG5cdCAgICB2YWx1ZTogZnVuY3Rpb24gdmFsaWRhdGVEYXRlKHRpbWVzdGFtcCkge1xuXHQgICAgICByZXR1cm4gdHJ1ZTtcblx0ICAgIH1cblx0ICB9XSk7XG5cdFxuXHQgIHJldHVybiBFbmREYXRlSW5wdXQ7XG5cdH0oRGF0ZUlucHV0KTtcblx0XG5cdG1vZHVsZS5leHBvcnRzID0gRW5kRGF0ZUlucHV0O1xuXG4vKioqLyB9LFxuLyogNSAqL1xuLyoqKi8gZnVuY3Rpb24obW9kdWxlLCBleHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblx0LyogV0VCUEFDSyBWQVIgSU5KRUNUSU9OICovKGZ1bmN0aW9uKG1vZHVsZSkgeyd1c2Ugc3RyaWN0Jztcblx0XG5cdHZhciBGdXNpb25DaGFydHMgPSBmdW5jdGlvbiBGdXNpb25DaGFydHMoKSB7fTtcblx0XG5cdEZ1c2lvbkNoYXJ0cy5yZWdpc3RlciA9IGZ1bmN0aW9uIChleHQsIGFycikge1xuXHQgIC8vIHZhciBleHROYW1lID0gYXJyWzBdO1xuXHQgIHZhciBmbiA9IGFyclsxXTtcblx0ICBmbi5iaW5kKHRoaXMsIDU2NSkoKTtcblx0fTtcblx0XG5cdEZ1c2lvbkNoYXJ0cy5nZXRGb3JtYXR0ZWREYXRlID0gZnVuY3Rpb24gKHRpbWVzdGFtcCkge1xuXHQgIHJldHVybiBuZXcgRGF0ZSh0aW1lc3RhbXApLnRvTG9jYWxlRGF0ZVN0cmluZygpO1xuXHR9O1xuXHRcblx0RnVzaW9uQ2hhcnRzLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uIChkYXRlKSB7XG5cdCAgdmFyIGR0ID0gbmV3IERhdGUoZGF0ZSk7XG5cdCAgcmV0dXJuICtuZXcgRGF0ZShkdC50b0xvY2FsZURhdGVTdHJpbmcoKSk7XG5cdH07XG5cdFxuXHRGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudFR5cGUsIGNvbXBvbmVudE5hbWUpIHtcblx0ICB2YXIgdG9vbEJveCA9IHtcblx0ICAgIHg6IDI0LFxuXHQgICAgeTogNTYsXG5cdCAgICB3aWR0aDogMTAwLFxuXHQgICAgaGVpZ2h0OiAyMCxcblx0ICAgIGluZGV4OiA0XG5cdCAgfTtcblx0XG5cdCAgaWYgKGNvbXBvbmVudFR5cGUgPT09ICdhcGknICYmIGNvbXBvbmVudE5hbWUgPT09ICd0b29sYm94Jykge1xuXHQgICAgcmV0dXJuIHRvb2xCb3g7XG5cdCAgfVxuXHRcblx0ICByZXR1cm4gbnVsbDtcblx0fTtcblx0XG5cdEZ1c2lvbkNoYXJ0cy5leHRBUEkgPSBmdW5jdGlvbiAob2JqKSB7XG5cdCAgb2JqLmluaXQoZnVuY3Rpb24gKCkge1xuXHQgICAgdmFyIGFyZ3NUb0FwcGx5ID0gW107XG5cdCAgICB2YXIgY2IgPSBhcmd1bWVudHNbYXJndW1lbnRzLmxlbmd0aCAtIDFdO1xuXHRcblx0ICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aCAtIDE7IGkrKykge1xuXHQgICAgICBpZiAoYXJndW1lbnRzW2ldID09PSAnWC1BeGlzJykge1xuXHQgICAgICAgIGFyZ3NUb0FwcGx5LnB1c2goMTU2NzcyKTtcblx0ICAgICAgfSBlbHNlIGlmIChhcmd1bWVudHNbaV0gPT09ICdZLUF4aXMnKSB7XG5cdCAgICAgICAgYXJnc1RvQXBwbHkucHVzaCgxNTY3NjUpO1xuXHQgICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSA9PT0gJ2dyYXBoaWNzJykge1xuXHQgICAgICAgIHZhciBwYXBlciA9IFJhcGhhZWwoMTAsIDUwLCA1MDAsIDUwMCk7XG5cdCAgICAgICAgYXJnc1RvQXBwbHkucHVzaChwYXBlcik7XG5cdCAgICAgIH1cblx0ICAgIH1cblx0ICAgIGNiLmFwcGx5KHRoaXMsIGFyZ3NUb0FwcGx5KTtcblx0ICB9KTtcblx0XG5cdCAgb2JqLnBsYWNlSW5DYW52YXMoKTtcblx0XG5cdCAgb2JqLmRyYXcoKTtcblx0XG5cdCAgb2JqLmRpc3Bvc2UoKTtcblx0fTtcblx0XG5cdGlmIChtb2R1bGUpIHtcblx0ICBtb2R1bGUuZXhwb3J0cyA9IEZ1c2lvbkNoYXJ0cztcblx0fVxuXHQvKiBXRUJQQUNLIFZBUiBJTkpFQ1RJT04gKi99LmNhbGwoZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyg2KShtb2R1bGUpKSlcblxuLyoqKi8gfSxcbi8qIDYgKi9cbi8qKiovIGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cykge1xuXG5cdG1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24obW9kdWxlKSB7XHJcblx0XHRpZighbW9kdWxlLndlYnBhY2tQb2x5ZmlsbCkge1xyXG5cdFx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdFx0bW9kdWxlLnBhdGhzID0gW107XHJcblx0XHRcdC8vIG1vZHVsZS5wYXJlbnQgPSB1bmRlZmluZWQgYnkgZGVmYXVsdFxyXG5cdFx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdFx0bW9kdWxlLndlYnBhY2tQb2x5ZmlsbCA9IDE7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gbW9kdWxlO1xyXG5cdH1cclxuXG5cbi8qKiovIH1cbi8qKioqKiovIF0pO1xuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIGZjdHMtZXh0LWRhdGVyYW5nZS1lczUubWluLmpzXG4gKiovIiwiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pXG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG5cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGV4cG9ydHM6IHt9LFxuIFx0XHRcdGlkOiBtb2R1bGVJZCxcbiBcdFx0XHRsb2FkZWQ6IGZhbHNlXG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmxvYWRlZCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oMCk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiB3ZWJwYWNrL2Jvb3RzdHJhcCBiZTIzYjk3NGU2ODk3NWE5MTQ4MFxuICoqLyIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IERhdGVSYW5nZSA9IHJlcXVpcmUoJy4vZmN0cy1leHQtZGF0ZXJhbmdlJyk7XG5cbi8vIHZhciBmYyA9IG5ldyBGdXNpb25DaGFydHMoKTtcblxuRnVzaW9uQ2hhcnRzLnJlZ2lzdGVyKCdleHRlbnNpb24nLCBbJ2RhdGUtcmFuZ2UtY2hvb3NlcicsIGZ1bmN0aW9uIChpZCkge1xuICB2YXIgZ2xvYmFsID0gdGhpcztcbiAgdmFyIGV4dEFQSSA9IGdsb2JhbC5leHRBUEk7XG5cbiAgLy8gdmFyIG90aGVyQVBJID0gRnVzaW9uQ2hhcnRzLmdldEV4dENvbXBvbmVudChpZCwgJ2FwaScsICdsZWdhY3lleHRhcGknKTtcbiAgLy8gdmFyIHRvb2xCb3hBcGkgPSBGdXNpb25DaGFydHMuZ2V0Q29tcG9uZW50KCdhcGknLCAndG9vbGJveCcpO1xuXG4gIHdpbmRvdy5kciA9IG5ldyBEYXRlUmFuZ2UoKTtcbiAgZXh0QVBJKHdpbmRvdy5kcik7XG59XSk7XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL3NyYy9pbmRleC5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcbnZhciBTdGFydERhdGVJbnB1dCA9IHJlcXVpcmUoJy4vZmN0cy1leHQtc3RhcnRkYXRlaW5wdXQnKTtcbnZhciBFbmREYXRlSW5wdXQgPSByZXF1aXJlKCcuL2ZjdHMtZXh0LWVuZGRhdGVpbnB1dCcpO1xudmFyIEZ1c2lvbkNoYXJ0cyA9IHJlcXVpcmUoJy4uL2xpYi9mdXNpb25jaGFydHMnKTtcblxuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgdGhlIERhdGVSYW5nZS5cbiAqL1xuY2xhc3MgRGF0ZVJhbmdlIHtcbiAgLyoqXG4gICAqIENyZWF0ZSBhIERhdGVSYW5nZS5cbiAgICogQHR5cGVkZWYge29iamVjdH0gRGF0ZVJhbmdlLnJhbmdlXG4gICAqIEBwcm9wZXJ0eSB7bnVtYmVyfSBzdGFydERhdGUgLSBUaGUgc3RhcnQgZGF0ZSBvZiB0aGUgZGF0ZSByYW5nZS5cbiAgICogQHByb3BlcnR5IHtudW1iZXJ9IGVuZERhdGUgLSBUaGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2UuXG4gICAqL1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgLyoqXG4gICAgICogQHByaXZhdGVcbiAgICAgKi9cbiAgICB0aGlzLmRhdGVSYW5nZSA9IHtcbiAgICAgIHN0YXJ0RGF0ZTogMCxcbiAgICAgIGVuZERhdGU6IDBcbiAgICB9O1xuICAgIHRoaXMuc3RhcnRUZXh0ID0ge1xuICAgICAgYXR0cjogZnVuY3Rpb24gKCkge31cbiAgICB9O1xuICAgIHRoaXMuZW5kVGV4dCA9IHtcbiAgICAgIGF0dHI6IGZ1bmN0aW9uICgpIHt9XG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgcmVwcmVzZW50aW5nIHRoZSBzdGFydCBhbmQgZW5kIGRhdGVzLlxuICAgKiBAdHlwZSB7RGF0ZVJhbmdlLnJhbmdlfVxuICAgKi9cbiAgZ2V0IHJhbmdlICgpIHtcbiAgICByZXR1cm4gdGhpcy5kYXRlUmFuZ2U7XG4gIH1cblxuICBzZXQgcmFuZ2UgKHJhbmdlKSB7XG4gICAgaWYgKHJhbmdlLnN0YXJ0RGF0ZSA8PSByYW5nZS5lbmREYXRlKSB7XG4gICAgICB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGUgPSByYW5nZS5zdGFydERhdGU7XG4gICAgICB2YXIgZm9ybWF0dGVkU3RhcnREYXRlID0gRnVzaW9uQ2hhcnRzLmdldEZvcm1hdHRlZERhdGUocmFuZ2Uuc3RhcnREYXRlKTtcbiAgICAgIGNvbnNvbGUubG9nKGZvcm1hdHRlZFN0YXJ0RGF0ZSk7XG4gICAgICB0aGlzLnN0YXJ0VGV4dC5hdHRyKCd0ZXh0JywgZm9ybWF0dGVkU3RhcnREYXRlKTtcblxuICAgICAgdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZSA9IHJhbmdlLmVuZERhdGU7XG4gICAgICB2YXIgZm9ybWF0dGVkRW5kRGF0ZSA9IEZ1c2lvbkNoYXJ0cy5nZXRGb3JtYXR0ZWREYXRlKHJhbmdlLmVuZERhdGUpO1xuICAgICAgdGhpcy5lbmRUZXh0LmF0dHIoJ3RleHQnLCBmb3JtYXR0ZWRFbmREYXRlKTtcblxuICAgICAgdmFyIHNkaSA9IG5ldyBTdGFydERhdGVJbnB1dCgpO1xuICAgICAgc2RpLnRpbWVzdGFtcCA9IHRoaXMuZGF0ZVJhbmdlLnN0YXJ0RGF0ZTtcblxuICAgICAgdmFyIGVkaSA9IG5ldyBFbmREYXRlSW5wdXQoKTtcbiAgICAgIGVkaS50aW1lc3RhbXAgPSB0aGlzLmRhdGVSYW5nZS5lbmREYXRlO1xuICAgIH1cbiAgfVxuXG4gIGluaXQgKHJlcXVpcmUpIHtcbiAgICByZXF1aXJlKCdYLUF4aXMnLCAnWS1BeGlzJywgJ2dyYXBoaWNzJywgZnVuY3Rpb24gKHgsIHksIGdyYXBoaWNzKSB7XG4gICAgICBnbG9iYWwueCA9IHg7XG4gICAgICBnbG9iYWwueSA9IHk7XG4gICAgICBnbG9iYWwucGFwZXIgPSBncmFwaGljcztcbiAgICB9KTtcbiAgfVxuXG4gIHBsYWNlSW5DYW52YXMgKCkge1xuICAgIHRoaXMucmFuZ2UgPSB7XG4gICAgICBzdGFydERhdGU6IDEyLFxuICAgICAgZW5kRGF0ZTogMjNcbiAgICB9O1xuICB9XG5cbiAgZHJhdyAoKSB7XG4gICAgdmFyIHBhcGVyID0gZ2xvYmFsLnBhcGVyO1xuICAgIHZhciByYW5nZSA9IHRoaXMucmFuZ2U7XG5cbiAgICB2YXIgc3RhcnRMYWJlbCA9IHBhcGVyLnRleHQoMjAsIDIyLCAnRnJvbTogJyk7XG4gICAgc3RhcnRMYWJlbC5hdHRyKCdmb250LWZhbWlseScsICdzYW5zLXNlcmlmJyk7XG4gICAgc3RhcnRMYWJlbC5hdHRyKCdmaWxsJywgJyMwMDAnKTtcbiAgICB2YXIgc3RhcnRSZWN0ID0gcGFwZXIucmVjdCg1MCwgMTAsIDkwLCAyNSk7XG4gICAgc3RhcnRSZWN0LmF0dHIoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgdGhpcy5zdGFydFRleHQgPSBwYXBlci50ZXh0KDk1LCAyMiwgRnVzaW9uQ2hhcnRzLmdldEZvcm1hdHRlZERhdGUocmFuZ2Uuc3RhcnREYXRlKSk7XG4gICAgdGhpcy5zdGFydFRleHQuYXR0cignZm9udC1mYW1pbHknLCAnc2Fucy1zZXJpZicpO1xuICAgIHRoaXMuc3RhcnRUZXh0LmF0dHIoJ2ZpbGwnLCAnIzAwMCcpO1xuXG4gICAgdmFyIGVuZExhYmVsID0gcGFwZXIudGV4dCgxNzAsIDIyLCAnVG86ICcpO1xuICAgIGVuZExhYmVsLmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcbiAgICBlbmRMYWJlbC5hdHRyKCdmaWxsJywgJyMwMDAnKTtcbiAgICB2YXIgZW5kUmVjdCA9IHBhcGVyLnJlY3QoMTkwLCAxMCwgOTAsIDI1KTtcbiAgICBlbmRSZWN0LmF0dHIoJ3N0cm9rZScsICcjMDAwJyk7XG4gICAgdGhpcy5lbmRUZXh0ID0gcGFwZXIudGV4dCgyMzUsIDIyLCBGdXNpb25DaGFydHMuZ2V0Rm9ybWF0dGVkRGF0ZShyYW5nZS5lbmREYXRlKSk7XG4gICAgdGhpcy5lbmRUZXh0LmF0dHIoJ2ZvbnQtZmFtaWx5JywgJ3NhbnMtc2VyaWYnKTtcbiAgICB0aGlzLmVuZFRleHQuYXR0cignZmlsbCcsICcjMDAwJyk7XG4gIH1cblxuICBkaXNwb3NlICgpIHtcbiAgICAvLyBUT0RPOiBkaXNwb3NlIGV4dGVuc2lvblxuICB9XG5cbiAgLyoqXG4gICAqIFN3YXBzIHRoZSBzdGFydCBkYXRlIGFuZCB0aGUgZW5kIGRhdGUgb2YgdGhlIGRhdGUgcmFuZ2VcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN3YXBEYXRlcyAoKSB7XG4gICAgbGV0IHRlbXAgPSB0aGlzLmRhdGVSYW5nZS5zdGFydERhdGU7XG4gICAgdGhpcy5kYXRlUmFuZ2Uuc3RhcnREYXRlID0gdGhpcy5kYXRlUmFuZ2UuZW5kRGF0ZTtcbiAgICB0aGlzLmRhdGVSYW5nZS5lbmREYXRlID0gdGVtcDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTeW5jcyB0aGUgZGF0ZXJhbmdlIHNob3duIGJ5IHRoZSBGdXNpb25DaGFydHMgdGltZSBzZXJpZXMgY2hhcnQgYW5kIHRoZSBEYXRlIFJhbmdlIENob29zZXJcbiAgICogQHByaXZhdGVcbiAgICovXG4gIHN5bmNSYW5nZSAoKSB7fVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgZm9ybWF0dGVkIGRhdGUgc3RyaW5nIGZyb20gRnVzaW9uQ2hhcnRzIHdoZW4gZ2l2ZW4gYSBVTklYIHRpbWVzdGFtcFxuICAgKiBAcGFyYW0gIHtudW1iZXJ9IHRpbWVzdGFtcCAtIEEgVU5JWCB0aW1lc3RhbXAgdG8gYmUgY29udmVydGVkIHRvIGEgZGF0ZSBzdHJpbmdcbiAgICogQHJldHVybiB7c3RyaW5nfSBBIGRhdGUgc3RyaW5nIHdoaWNoIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGdpdmVuIHRpbWVzdGFtcFxuICAgKi9cbiAgZ2V0Rm9ybWF0dGVkRGF0ZSAodGltZXN0YW1wKSB7XG4gICAgcmV0dXJuICcxMi8xMi8yMDEyJztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIGEgVU5JWCB0aW1lc3RhbXAgZnJvbSBGdXNpb25DaGFydHMgd2hlbiBnaXZlbiBhIGZvcm1hdHRlZCBkYXRlIHN0cmluZ1xuICAgKiBAcGFyYW0gIHtzdHJpbmd9IGRhdGVTdHJpbmcgLSBBIGRhdGUgc3RyaW5nIHRvIGJlIGNvbnZlcnRlZCB0byBhIFVOSVggdGltZXN0YW1wXG4gICAqIEByZXR1cm4ge251bWJlcn0gQSBVTklYIHRpbWVzdGFtcCB3aGljaCBpcyBlcXVpdmFsZW50IHRvIHRoZSBnaXZlbiBkYXRlIHN0cmluZ1xuICAgKi9cbiAgZ2V0VGltZXN0YW1wIChkYXRlU3RyaW5nKSB7XG4gICAgcmV0dXJuIDY3NDUxMjM7XG4gIH1cblxuICAvKipcbiAgICogU2V0cyB0aGUgY29uZmlndXJhYmxlIG9wdGlvbnMgb2YgdGhlIGV4dGVuc2lvbiAoZS5nLiBjb3NtZXRpY3MpXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBjb25maWdPYmogVGhlIGNvbmZpZ3VyYXRpb24gb2JqZWN0IGNvbnRhaW5pbmcgdmFyaW91cyBleHRlbnNpb24gb3B0aW9uc1xuICAgKi9cbiAgc2V0Q29uZmlnIChjb25maWdPYmopIHt9XG5cbiAgLyoqXG4gICAqIEdldHMgdGhlIGNvbmZpZ3VyYWJsZSBvcHRpb25zIG9mIHRoZSBleHRlbnNpb24gKGUuZy4gY29zbWV0aWNzKVxuICAgKiBAcmV0dXJuIHtvYmplY3R9IGNvbmZpZ09iaiBUaGUgY29uZmlndXJhdGlvbiBvYmplY3QgY29udGFpbmluZyB2YXJpb3VzIGV4dGVuc2lvbiBvcHRpb25zXG4gICAqL1xuICBnZXRDb25maWcgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBjb2xvcjogJyMwMDAwMDAnXG4gICAgfTtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IERhdGVSYW5nZTtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZjdHMtZXh0LWRhdGVyYW5nZS5qc1xuICoqLyIsIid1c2Ugc3RyaWN0JztcbmNvbnN0IERhdGVJbnB1dCA9IHJlcXVpcmUoJy4vZmN0cy1leHQtZGF0ZWlucHV0Jyk7XG5cbi8qKlxuICogQSBjb25jcmV0ZSByZXByZXNlbnRhdGlvbiBvZiBEYXRlSW5wdXQgZm9yIHRoZSBzdGFydCBkYXRlLlxuICogQGV4dGVuZHMgRGF0ZUlucHV0XG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBTdGFydERhdGVJbnB1dCBleHRlbmRzIERhdGVJbnB1dCB7XG4gIC8qKlxuICAgKiBWYWxpZGF0ZSB0aGUgZ2l2ZW4gdGltZXN0YW1wXG4gICAqIEByZXR1cm4ge2Jvb2xlYW59IFdoZXRoZXIgdGhlIGdpdmVuIHRpbWVzdGFtcCBpcyB2YWxpZCBvciBub3RcbiAgICovXG4gIHZhbGlkYXRlRGF0ZSAodGltZXN0YW1wKSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBTdGFydERhdGVJbnB1dDtcblxuXG5cbi8qKiBXRUJQQUNLIEZPT1RFUiAqKlxuICoqIC4vc3JjL2ZjdHMtZXh0LXN0YXJ0ZGF0ZWlucHV0LmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuLyoqXG4gKiBDbGFzcyByZXByZXNlbnRpbmcgYSBhYnN0cmFjdCBEYXRlSW5wdXQuXG4gKiBAYWJzdHJhY3RcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIERhdGVJbnB1dCB7XG4gIGNvbnN0cnVjdG9yICgpIHtcbiAgICAvKipcbiAgICAgKiBAdHlwZWRlZiB7b2JqZWN0fSBEYXRlSW5wdXQuaW5wdXRcbiAgICAgKiBAcHJvcGVydHkge251bWJlcn0gdGltZXN0YW1wIC0gVGhlIGN1cnJlbnQgdGltZSBzaG93biBvbiB0aGUgZGF0ZSBpbnB1dC5cbiAgICAgKi9cbiAgICAvKipcbiAgICAgKiBAcHJpdmF0ZVxuICAgICAqL1xuICAgIHRoaXMudGltZXN0YW1wID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXByZXNlbnRzIHRoZSBudW1lcmljIHZhbHVlIG9mIHRoZSBkYXRlXG4gICAqIEB0eXBlIG51bWJlclxuICAgKi9cbiAgZ2V0IGRhdGUgKCkge1xuICAgIHJldHVybiB0aGlzLnRpbWVzdGFtcDtcbiAgfVxuXG4gIHNldCBkYXRlIChtcykge1xuICAgIHRoaXMudGltZXN0YW1wID0gbXM7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheXMgdGhlIGRhdGUgb24gdGhlIGRhdGUgaW5wdXRcbiAgICogQHByaXZhdGVcbiAgICovXG4gIGRpc3BsYXlEYXRlICgpIHt9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRGF0ZUlucHV0O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZmN0cy1leHQtZGF0ZWlucHV0LmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xuY29uc3QgRGF0ZUlucHV0ID0gcmVxdWlyZSgnLi9mY3RzLWV4dC1kYXRlaW5wdXQnKTtcblxuLyoqXG4gKiBBIGNvbmNyZXRlIHJlcHJlc2VudGF0aW9uIG9mIERhdGVJbnB1dCBmb3IgdGhlIGVuZCBkYXRlLlxuICogQGV4dGVuZHMgRGF0ZUlucHV0XG4gKiBAcHJpdmF0ZVxuICovXG5jbGFzcyBFbmREYXRlSW5wdXQgZXh0ZW5kcyBEYXRlSW5wdXQge1xuICAvKipcbiAgICogVmFsaWRhdGUgdGhlIGdpdmVuIHRpbWVzdGFtcFxuICAgKiBAcmV0dXJuIHtib29sZWFufSBXaGV0aGVyIHRoZSBnaXZlbiB0aW1lc3RhbXAgaXMgdmFsaWQgb3Igbm90XG4gICAqL1xuICB2YWxpZGF0ZURhdGUgKHRpbWVzdGFtcCkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRW5kRGF0ZUlucHV0O1xuXG5cblxuLyoqIFdFQlBBQ0sgRk9PVEVSICoqXG4gKiogLi9zcmMvZmN0cy1leHQtZW5kZGF0ZWlucHV0LmpzXG4gKiovIiwiJ3VzZSBzdHJpY3QnO1xudmFyIEZ1c2lvbkNoYXJ0cyA9IGZ1bmN0aW9uICgpIHt9O1xuXG5GdXNpb25DaGFydHMucmVnaXN0ZXIgPSBmdW5jdGlvbiAoZXh0LCBhcnIpIHtcbiAgLy8gdmFyIGV4dE5hbWUgPSBhcnJbMF07XG4gIHZhciBmbiA9IGFyclsxXTtcbiAgZm4uYmluZCh0aGlzLCA1NjUpKCk7XG59O1xuXG5GdXNpb25DaGFydHMuZ2V0Rm9ybWF0dGVkRGF0ZSA9IGZ1bmN0aW9uICh0aW1lc3RhbXApIHtcbiAgcmV0dXJuIG5ldyBEYXRlKHRpbWVzdGFtcCkudG9Mb2NhbGVEYXRlU3RyaW5nKCk7XG59O1xuXG5GdXNpb25DaGFydHMuZ2V0VGltZXN0YW1wID0gZnVuY3Rpb24gKGRhdGUpIHtcbiAgdmFyIGR0ID0gbmV3IERhdGUoZGF0ZSk7XG4gIHJldHVybiArbmV3IERhdGUoZHQudG9Mb2NhbGVEYXRlU3RyaW5nKCkpO1xufTtcblxuRnVzaW9uQ2hhcnRzLmdldENvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnRUeXBlLCBjb21wb25lbnROYW1lKSB7XG4gIHZhciB0b29sQm94ID0ge1xuICAgIHg6IDI0LFxuICAgIHk6IDU2LFxuICAgIHdpZHRoOiAxMDAsXG4gICAgaGVpZ2h0OiAyMCxcbiAgICBpbmRleDogNFxuICB9O1xuXG4gIGlmIChjb21wb25lbnRUeXBlID09PSAnYXBpJyAmJiBjb21wb25lbnROYW1lID09PSAndG9vbGJveCcpIHtcbiAgICByZXR1cm4gdG9vbEJveDtcbiAgfVxuXG4gIHJldHVybiBudWxsO1xufTtcblxuRnVzaW9uQ2hhcnRzLmV4dEFQSSA9IGZ1bmN0aW9uIChvYmopIHtcbiAgb2JqLmluaXQoZnVuY3Rpb24gKCkge1xuICAgIHZhciBhcmdzVG9BcHBseSA9IFtdO1xuICAgIHZhciBjYiA9IGFyZ3VtZW50c1thcmd1bWVudHMubGVuZ3RoIC0gMV07XG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGFyZ3VtZW50cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGlmIChhcmd1bWVudHNbaV0gPT09ICdYLUF4aXMnKSB7XG4gICAgICAgIGFyZ3NUb0FwcGx5LnB1c2goMTU2NzcyKTtcbiAgICAgIH0gZWxzZSBpZiAoYXJndW1lbnRzW2ldID09PSAnWS1BeGlzJykge1xuICAgICAgICBhcmdzVG9BcHBseS5wdXNoKDE1Njc2NSk7XG4gICAgICB9IGVsc2UgaWYgKGFyZ3VtZW50c1tpXSA9PT0gJ2dyYXBoaWNzJykge1xuICAgICAgICB2YXIgcGFwZXIgPSBSYXBoYWVsKDEwLCA1MCwgNTAwLCA1MDApO1xuICAgICAgICBhcmdzVG9BcHBseS5wdXNoKHBhcGVyKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY2IuYXBwbHkodGhpcywgYXJnc1RvQXBwbHkpO1xuICB9KTtcblxuICBvYmoucGxhY2VJbkNhbnZhcygpO1xuXG4gIG9iai5kcmF3KCk7XG5cbiAgb2JqLmRpc3Bvc2UoKTtcbn07XG5cbmlmIChtb2R1bGUpIHtcbiAgbW9kdWxlLmV4cG9ydHMgPSBGdXNpb25DaGFydHM7XG59XG5cblxuXG4vKiogV0VCUEFDSyBGT09URVIgKipcbiAqKiAuL2xpYi9mdXNpb25jaGFydHMuanNcbiAqKi8iLCJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG1vZHVsZSkge1xyXG5cdGlmKCFtb2R1bGUud2VicGFja1BvbHlmaWxsKSB7XHJcblx0XHRtb2R1bGUuZGVwcmVjYXRlID0gZnVuY3Rpb24oKSB7fTtcclxuXHRcdG1vZHVsZS5wYXRocyA9IFtdO1xyXG5cdFx0Ly8gbW9kdWxlLnBhcmVudCA9IHVuZGVmaW5lZCBieSBkZWZhdWx0XHJcblx0XHRtb2R1bGUuY2hpbGRyZW4gPSBbXTtcclxuXHRcdG1vZHVsZS53ZWJwYWNrUG9seWZpbGwgPSAxO1xyXG5cdH1cclxuXHRyZXR1cm4gbW9kdWxlO1xyXG59XHJcblxuXG5cbi8qKioqKioqKioqKioqKioqKlxuICoqIFdFQlBBQ0sgRk9PVEVSXG4gKiogKHdlYnBhY2spL2J1aWxkaW4vbW9kdWxlLmpzXG4gKiogbW9kdWxlIGlkID0gNlxuICoqIG1vZHVsZSBjaHVua3MgPSAwXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==